(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Mp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Td={exports:{}},Qo={},Md={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function hb(){if(D0)return Se;D0=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function w(L,_,me){this.props=L,this.context=_,this.refs=k,this.updater=me||v}w.prototype.isReactComponent={},w.prototype.setState=function(L,_){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,_,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=w.prototype;function T(L,_,me){this.props=L,this.context=_,this.refs=k,this.updater=me||v}var D=T.prototype=new C;D.constructor=T,S(D,w.prototype),D.isPureReactComponent=!0;var P=Array.isArray,R=Object.prototype.hasOwnProperty,M={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function B(L,_,me){var ge,Ce={},we=null,Pe=null;if(_!=null)for(ge in _.ref!==void 0&&(Pe=_.ref),_.key!==void 0&&(we=""+_.key),_)R.call(_,ge)&&!I.hasOwnProperty(ge)&&(Ce[ge]=_[ge]);var be=arguments.length-2;if(be===1)Ce.children=me;else if(1<be){for(var Be=Array(be),kt=0;kt<be;kt++)Be[kt]=arguments[kt+2];Ce.children=Be}if(L&&L.defaultProps)for(ge in be=L.defaultProps,be)Ce[ge]===void 0&&(Ce[ge]=be[ge]);return{$$typeof:t,type:L,key:we,ref:Pe,props:Ce,_owner:M.current}}function X(L,_){return{$$typeof:t,type:L.type,key:_,ref:L.ref,props:L.props,_owner:L._owner}}function ue(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function Ee(L){var _={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(me){return _[me]})}var ke=/\/+/g;function Ne(L,_){return typeof L=="object"&&L!==null&&L.key!=null?Ee(""+L.key):_.toString(36)}function xe(L,_,me,ge,Ce){var we=typeof L;(we==="undefined"||we==="boolean")&&(L=null);var Pe=!1;if(L===null)Pe=!0;else switch(we){case"string":case"number":Pe=!0;break;case"object":switch(L.$$typeof){case t:case e:Pe=!0}}if(Pe)return Pe=L,Ce=Ce(Pe),L=ge===""?"."+Ne(Pe,0):ge,P(Ce)?(me="",L!=null&&(me=L.replace(ke,"$&/")+"/"),xe(Ce,_,me,"",function(kt){return kt})):Ce!=null&&(ue(Ce)&&(Ce=X(Ce,me+(!Ce.key||Pe&&Pe.key===Ce.key?"":(""+Ce.key).replace(ke,"$&/")+"/")+L)),_.push(Ce)),1;if(Pe=0,ge=ge===""?".":ge+":",P(L))for(var be=0;be<L.length;be++){we=L[be];var Be=ge+Ne(we,be);Pe+=xe(we,_,me,Be,Ce)}else if(Be=g(L),typeof Be=="function")for(L=Be.call(L),be=0;!(we=L.next()).done;)we=we.value,Be=ge+Ne(we,be++),Pe+=xe(we,_,me,Be,Ce);else if(we==="object")throw _=String(L),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return Pe}function Ae(L,_,me){if(L==null)return L;var ge=[],Ce=0;return xe(L,ge,"","",function(we){return _.call(me,we,Ce++)}),ge}function De(L){if(L._status===-1){var _=L._result;_=_(),_.then(function(me){(L._status===0||L._status===-1)&&(L._status=1,L._result=me)},function(me){(L._status===0||L._status===-1)&&(L._status=2,L._result=me)}),L._status===-1&&(L._status=0,L._result=_)}if(L._status===1)return L._result.default;throw L._result}var se={current:null},G={transition:null},q={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:G,ReactCurrentOwner:M};function J(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:Ae,forEach:function(L,_,me){Ae(L,function(){_.apply(this,arguments)},me)},count:function(L){var _=0;return Ae(L,function(){_++}),_},toArray:function(L){return Ae(L,function(_){return _})||[]},only:function(L){if(!ue(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Se.Component=w,Se.Fragment=n,Se.Profiler=i,Se.PureComponent=T,Se.StrictMode=r,Se.Suspense=c,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Se.act=J,Se.cloneElement=function(L,_,me){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ge=S({},L.props),Ce=L.key,we=L.ref,Pe=L._owner;if(_!=null){if(_.ref!==void 0&&(we=_.ref,Pe=M.current),_.key!==void 0&&(Ce=""+_.key),L.type&&L.type.defaultProps)var be=L.type.defaultProps;for(Be in _)R.call(_,Be)&&!I.hasOwnProperty(Be)&&(ge[Be]=_[Be]===void 0&&be!==void 0?be[Be]:_[Be])}var Be=arguments.length-2;if(Be===1)ge.children=me;else if(1<Be){be=Array(Be);for(var kt=0;kt<Be;kt++)be[kt]=arguments[kt+2];ge.children=be}return{$$typeof:t,type:L.type,key:Ce,ref:we,props:ge,_owner:Pe}},Se.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},Se.createElement=B,Se.createFactory=function(L){var _=B.bind(null,L);return _.type=L,_},Se.createRef=function(){return{current:null}},Se.forwardRef=function(L){return{$$typeof:u,render:L}},Se.isValidElement=ue,Se.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:De}},Se.memo=function(L,_){return{$$typeof:d,type:L,compare:_===void 0?null:_}},Se.startTransition=function(L){var _=G.transition;G.transition={};try{L()}finally{G.transition=_}},Se.unstable_act=J,Se.useCallback=function(L,_){return se.current.useCallback(L,_)},Se.useContext=function(L){return se.current.useContext(L)},Se.useDebugValue=function(){},Se.useDeferredValue=function(L){return se.current.useDeferredValue(L)},Se.useEffect=function(L,_){return se.current.useEffect(L,_)},Se.useId=function(){return se.current.useId()},Se.useImperativeHandle=function(L,_,me){return se.current.useImperativeHandle(L,_,me)},Se.useInsertionEffect=function(L,_){return se.current.useInsertionEffect(L,_)},Se.useLayoutEffect=function(L,_){return se.current.useLayoutEffect(L,_)},Se.useMemo=function(L,_){return se.current.useMemo(L,_)},Se.useReducer=function(L,_,me){return se.current.useReducer(L,_,me)},Se.useRef=function(L){return se.current.useRef(L)},Se.useState=function(L){return se.current.useState(L)},Se.useSyncExternalStore=function(L,_,me){return se.current.useSyncExternalStore(L,_,me)},Se.useTransition=function(){return se.current.useTransition()},Se.version="18.3.1",Se}var P0;function Ll(){return P0||(P0=1,Md.exports=hb()),Md.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function pb(){if(O0)return Qo;O0=1;var t=Ll(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,d){var h,m={},g=null,v=null;d!==void 0&&(g=""+d),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(v=c.ref);for(h in c)r.call(c,h)&&!s.hasOwnProperty(h)&&(m[h]=c[h]);if(u&&u.defaultProps)for(h in c=u.defaultProps,c)m[h]===void 0&&(m[h]=c[h]);return{$$typeof:e,type:u,key:g,ref:v,props:m,_owner:i.current}}return Qo.Fragment=n,Qo.jsx=l,Qo.jsxs=l,Qo}var I0;function mb(){return I0||(I0=1,Td.exports=pb()),Td.exports}var E=mb(),Ja={},Nd={exports:{}},Xt={},Rd={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0;function gb(){return L0||(L0=1,(function(t){function e(G,q){var J=G.length;G.push(q);e:for(;0<J;){var L=J-1>>>1,_=G[L];if(0<i(_,q))G[L]=q,G[J]=_,J=L;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var q=G[0],J=G.pop();if(J!==q){G[0]=J;e:for(var L=0,_=G.length,me=_>>>1;L<me;){var ge=2*(L+1)-1,Ce=G[ge],we=ge+1,Pe=G[we];if(0>i(Ce,J))we<_&&0>i(Pe,Ce)?(G[L]=Pe,G[we]=J,L=we):(G[L]=Ce,G[ge]=J,L=ge);else if(we<_&&0>i(Pe,J))G[L]=Pe,G[we]=J,L=we;else break e}}return q}function i(G,q){var J=G.sortIndex-q.sortIndex;return J!==0?J:G.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],d=[],h=1,m=null,g=3,v=!1,S=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(G){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=G)r(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(d)}}function P(G){if(k=!1,D(G),!S)if(n(c)!==null)S=!0,De(R);else{var q=n(d);q!==null&&se(P,q.startTime-G)}}function R(G,q){S=!1,k&&(k=!1,C(B),B=-1),v=!0;var J=g;try{for(D(q),m=n(c);m!==null&&(!(m.expirationTime>q)||G&&!Ee());){var L=m.callback;if(typeof L=="function"){m.callback=null,g=m.priorityLevel;var _=L(m.expirationTime<=q);q=t.unstable_now(),typeof _=="function"?m.callback=_:m===n(c)&&r(c),D(q)}else r(c);m=n(c)}if(m!==null)var me=!0;else{var ge=n(d);ge!==null&&se(P,ge.startTime-q),me=!1}return me}finally{m=null,g=J,v=!1}}var M=!1,I=null,B=-1,X=5,ue=-1;function Ee(){return!(t.unstable_now()-ue<X)}function ke(){if(I!==null){var G=t.unstable_now();ue=G;var q=!0;try{q=I(!0,G)}finally{q?Ne():(M=!1,I=null)}}else M=!1}var Ne;if(typeof T=="function")Ne=function(){T(ke)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ae=xe.port2;xe.port1.onmessage=ke,Ne=function(){Ae.postMessage(null)}}else Ne=function(){w(ke,0)};function De(G){I=G,M||(M=!0,Ne())}function se(G,q){B=w(function(){G(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){S||v||(S=!0,De(R))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var J=g;g=q;try{return G()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=g;g=G;try{return q()}finally{g=J}},t.unstable_scheduleCallback=function(G,q,J){var L=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?L+J:L):J=L,G){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=J+_,G={id:h++,callback:q,priorityLevel:G,startTime:J,expirationTime:_,sortIndex:-1},J>L?(G.sortIndex=J,e(d,G),n(c)===null&&G===n(d)&&(k?(C(B),B=-1):k=!0,se(P,J-L))):(G.sortIndex=_,e(c,G),S||v||(S=!0,De(R))),G},t.unstable_shouldYield=Ee,t.unstable_wrapCallback=function(G){var q=g;return function(){var J=g;g=q;try{return G.apply(this,arguments)}finally{g=J}}}})(Dd)),Dd}var B0;function yb(){return B0||(B0=1,Rd.exports=gb()),Rd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function vb(){if(F0)return Xt;F0=1;var t=Ll(),e=yb();function n(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,a){l(o,a),l(o+"Capture",a)}function l(o,a){for(i[o]=a,o=0;o<a.length;o++)r.add(a[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function g(o){return c.call(m,o)?!0:c.call(h,o)?!1:d.test(o)?m[o]=!0:(h[o]=!0,!1)}function v(o,a,f,p){if(f!==null&&f.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,a,f,p){if(a===null||typeof a>"u"||v(o,a,f,p))return!0;if(p)return!1;if(f!==null)switch(f.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(o,a,f,p,y,x,A){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=f,this.propertyName=o,this.type=a,this.sanitizeURL=x,this.removeEmptyString=A}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new k(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];w[a]=new k(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new k(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new k(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new k(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new k(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new k(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new k(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new k(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function T(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(C,T);w[a]=new k(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(C,T);w[a]=new k(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(C,T);w[a]=new k(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new k(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new k(o,1,!1,o.toLowerCase(),null,!0,!0)});function D(o,a,f,p){var y=w.hasOwnProperty(a)?w[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,f,y,p)&&(f=null),p||y===null?g(a)&&(f===null?o.removeAttribute(a):o.setAttribute(a,""+f)):y.mustUseProperty?o[y.propertyName]=f===null?y.type===3?!1:"":f:(a=y.attributeName,p=y.attributeNamespace,f===null?o.removeAttribute(a):(y=y.type,f=y===3||y===4&&f===!0?"":""+f,p?o.setAttributeNS(p,a,f):o.setAttribute(a,f))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),M=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),Ee=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),G=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,L;function _(o){if(L===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);L=a&&a[1]||""}return`
`+L+o}var me=!1;function ge(o,a){if(!o||me)return"";me=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(j){var p=j}Reflect.construct(o,[],a)}else{try{a.call()}catch(j){p=j}o.call(a.prototype)}else{try{throw Error()}catch(j){p=j}o()}}catch(j){if(j&&p&&typeof j.stack=="string"){for(var y=j.stack.split(`
`),x=p.stack.split(`
`),A=y.length-1,b=x.length-1;1<=A&&0<=b&&y[A]!==x[b];)b--;for(;1<=A&&0<=b;A--,b--)if(y[A]!==x[b]){if(A!==1||b!==1)do if(A--,b--,0>b||y[A]!==x[b]){var N=`
`+y[A].replace(" at new "," at ");return o.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",o.displayName)),N}while(1<=A&&0<=b);break}}}finally{me=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?_(o):""}function Ce(o){switch(o.tag){case 5:return _(o.type);case 16:return _("Lazy");case 13:return _("Suspense");case 19:return _("SuspenseList");case 0:case 2:case 15:return o=ge(o.type,!1),o;case 11:return o=ge(o.type.render,!1),o;case 1:return o=ge(o.type,!0),o;default:return""}}function we(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case I:return"Fragment";case M:return"Portal";case X:return"Profiler";case B:return"StrictMode";case Ne:return"Suspense";case xe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ee:return(o.displayName||"Context")+".Consumer";case ue:return(o._context.displayName||"Context")+".Provider";case ke:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ae:return a=o.displayName||null,a!==null?a:we(o.type)||"Memo";case De:a=o._payload,o=o._init;try{return we(o(a))}catch{}}return null}function Pe(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Be(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function kt(o){var a=Be(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),p=""+o[a];if(!o.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,x=f.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return y.call(this)},set:function(A){p=""+A,x.call(this,A)}}),Object.defineProperty(o,a,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(A){p=""+A},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function wr(o){o._valueTracker||(o._valueTracker=kt(o))}function rs(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var f=a.getValue(),p="";return o&&(p=Be(o)?o.checked?"true":"false":o.value),o=p,o!==f?(a.setValue(o),!0):!1}function er(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function mi(o,a){var f=a.checked;return J({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function gi(o,a){var f=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;f=be(a.value!=null?a.value:f),o._wrapperState={initialChecked:p,initialValue:f,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function is(o,a){a=a.checked,a!=null&&D(o,"checked",a,!1)}function kr(o,a){is(o,a);var f=be(a.value),p=a.type;if(f!=null)p==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?Ar(o,a.type,f):a.hasOwnProperty("defaultValue")&&Ar(o,a.type,be(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function ss(o,a,f){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,f||a===o.value||(o.value=a),o.defaultValue=a}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function Ar(o,a,f){(a!=="number"||er(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var Cr=Array.isArray;function Vn(o,a,f,p){if(o=o.options,a){a={};for(var y=0;y<f.length;y++)a["$"+f[y]]=!0;for(f=0;f<o.length;f++)y=a.hasOwnProperty("$"+o[f].value),o[f].selected!==y&&(o[f].selected=y),y&&p&&(o[f].defaultSelected=!0)}else{for(f=""+be(f),a=null,y=0;y<o.length;y++){if(o[y].value===f){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}a!==null||o[y].disabled||(a=o[y])}a!==null&&(a.selected=!0)}}function yi(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ls(o,a){var f=a.value;if(f==null){if(f=a.children,a=a.defaultValue,f!=null){if(a!=null)throw Error(n(92));if(Cr(f)){if(1<f.length)throw Error(n(93));f=f[0]}a=f}a==null&&(a=""),f=a}o._wrapperState={initialValue:be(f)}}function as(o,a){var f=be(a.value),p=be(a.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),a.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),p!=null&&(o.defaultValue=""+p)}function vi(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function us(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cs(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?us(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var tr,jn=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,f,p,y){MSApp.execUnsafeLocalFunction(function(){return o(a,f,p,y)})}:o})(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(tr=tr||document.createElement("div"),tr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=tr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function Y(o,a){if(a){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=a;return}}o.textContent=a}var xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lo=["Webkit","ms","Moz","O"];Object.keys(xi).forEach(function(o){lo.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),xi[a]=xi[o]})});function he(o,a,f){return a==null||typeof a=="boolean"||a===""?"":f||typeof a!="number"||a===0||xi.hasOwnProperty(o)&&xi[o]?(""+a).trim():a+"px"}function Te(o,a){o=o.style;for(var f in a)if(a.hasOwnProperty(f)){var p=f.indexOf("--")===0,y=he(f,a[f],p);f==="float"&&(f="cssFloat"),p?o.setProperty(f,y):o[f]=y}}var At=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cn(o,a){if(a){if(At[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Dt(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var at=null;function pt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ut=null,Pt=null,bn=null;function $m(o){if(o=Ro(o)){if(typeof ut!="function")throw Error(n(280));var a=o.stateNode;a&&(a=da(a),ut(o.stateNode,o.type,a))}}function qm(o){Pt?bn?bn.push(o):bn=[o]:Pt=o}function Ym(){if(Pt){var o=Pt,a=bn;if(bn=Pt=null,$m(o),a)for(o=0;o<a.length;o++)$m(a[o])}}function Jm(o,a){return o(a)}function Xm(){}var Hc=!1;function Zm(o,a,f){if(Hc)return o(a,f);Hc=!0;try{return Jm(o,a,f)}finally{Hc=!1,(Pt!==null||bn!==null)&&(Xm(),Ym())}}function ao(o,a){var f=o.stateNode;if(f===null)return null;var p=da(f);if(p===null)return null;f=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,a,typeof f));return f}var Wc=!1;if(u)try{var uo={};Object.defineProperty(uo,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",uo,uo),window.removeEventListener("test",uo,uo)}catch{Wc=!1}function xC(o,a,f,p,y,x,A,b,N){var j=Array.prototype.slice.call(arguments,3);try{a.apply(f,j)}catch(H){this.onError(H)}}var co=!1,Wl=null,Ql=!1,Qc=null,SC={onError:function(o){co=!0,Wl=o}};function wC(o,a,f,p,y,x,A,b,N){co=!1,Wl=null,xC.apply(SC,arguments)}function kC(o,a,f,p,y,x,A,b,N){if(wC.apply(this,arguments),co){if(co){var j=Wl;co=!1,Wl=null}else throw Error(n(198));Ql||(Ql=!0,Qc=j)}}function Si(o){var a=o,f=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(f=a.return),o=a.return;while(o)}return a.tag===3?f:null}function eg(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function tg(o){if(Si(o)!==o)throw Error(n(188))}function AC(o){var a=o.alternate;if(!a){if(a=Si(o),a===null)throw Error(n(188));return a!==o?null:o}for(var f=o,p=a;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return tg(y),o;if(x===p)return tg(y),a;x=x.sibling}throw Error(n(188))}if(f.return!==p.return)f=y,p=x;else{for(var A=!1,b=y.child;b;){if(b===f){A=!0,f=y,p=x;break}if(b===p){A=!0,p=y,f=x;break}b=b.sibling}if(!A){for(b=x.child;b;){if(b===f){A=!0,f=x,p=y;break}if(b===p){A=!0,p=x,f=y;break}b=b.sibling}if(!A)throw Error(n(189))}}if(f.alternate!==p)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:a}function ng(o){return o=AC(o),o!==null?rg(o):null}function rg(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=rg(o);if(a!==null)return a;o=o.sibling}return null}var ig=e.unstable_scheduleCallback,sg=e.unstable_cancelCallback,CC=e.unstable_shouldYield,EC=e.unstable_requestPaint,et=e.unstable_now,bC=e.unstable_getCurrentPriorityLevel,Gc=e.unstable_ImmediatePriority,og=e.unstable_UserBlockingPriority,Gl=e.unstable_NormalPriority,TC=e.unstable_LowPriority,lg=e.unstable_IdlePriority,Kl=null,_n=null;function MC(o){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Kl,o,void 0,(o.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:DC,NC=Math.log,RC=Math.LN2;function DC(o){return o>>>=0,o===0?32:31-(NC(o)/RC|0)|0}var $l=64,ql=4194304;function fo(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Yl(o,a){var f=o.pendingLanes;if(f===0)return 0;var p=0,y=o.suspendedLanes,x=o.pingedLanes,A=f&268435455;if(A!==0){var b=A&~y;b!==0?p=fo(b):(x&=A,x!==0&&(p=fo(x)))}else A=f&~y,A!==0?p=fo(A):x!==0&&(p=fo(x));if(p===0)return 0;if(a!==0&&a!==p&&(a&y)===0&&(y=p&-p,x=a&-a,y>=x||y===16&&(x&4194240)!==0))return a;if((p&4)!==0&&(p|=f&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=p;0<a;)f=31-Tn(a),y=1<<f,p|=o[f],a&=~y;return p}function PC(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OC(o,a){for(var f=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,x=o.pendingLanes;0<x;){var A=31-Tn(x),b=1<<A,N=y[A];N===-1?((b&f)===0||(b&p)!==0)&&(y[A]=PC(b,a)):N<=a&&(o.expiredLanes|=b),x&=~b}}function Kc(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function ag(){var o=$l;return $l<<=1,($l&4194240)===0&&($l=64),o}function $c(o){for(var a=[],f=0;31>f;f++)a.push(o);return a}function ho(o,a,f){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Tn(a),o[a]=f}function IC(o,a){var f=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<f;){var y=31-Tn(f),x=1<<y;a[y]=0,p[y]=-1,o[y]=-1,f&=~x}}function qc(o,a){var f=o.entangledLanes|=a;for(o=o.entanglements;f;){var p=31-Tn(f),y=1<<p;y&a|o[p]&a&&(o[p]|=a),f&=~y}}var Oe=0;function ug(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var cg,Yc,fg,dg,hg,Jc=!1,Jl=[],Er=null,br=null,Tr=null,po=new Map,mo=new Map,Mr=[],LC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pg(o,a){switch(o){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":po.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(a.pointerId)}}function go(o,a,f,p,y,x){return o===null||o.nativeEvent!==x?(o={blockedOn:a,domEventName:f,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},a!==null&&(a=Ro(a),a!==null&&Yc(a)),o):(o.eventSystemFlags|=p,a=o.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),o)}function BC(o,a,f,p,y){switch(a){case"focusin":return Er=go(Er,o,a,f,p,y),!0;case"dragenter":return br=go(br,o,a,f,p,y),!0;case"mouseover":return Tr=go(Tr,o,a,f,p,y),!0;case"pointerover":var x=y.pointerId;return po.set(x,go(po.get(x)||null,o,a,f,p,y)),!0;case"gotpointercapture":return x=y.pointerId,mo.set(x,go(mo.get(x)||null,o,a,f,p,y)),!0}return!1}function mg(o){var a=wi(o.target);if(a!==null){var f=Si(a);if(f!==null){if(a=f.tag,a===13){if(a=eg(f),a!==null){o.blockedOn=a,hg(o.priority,function(){fg(f)});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xl(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var f=Zc(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var p=new f.constructor(f.type,f);at=p,f.target.dispatchEvent(p),at=null}else return a=Ro(f),a!==null&&Yc(a),o.blockedOn=f,!1;a.shift()}return!0}function gg(o,a,f){Xl(o)&&f.delete(a)}function FC(){Jc=!1,Er!==null&&Xl(Er)&&(Er=null),br!==null&&Xl(br)&&(br=null),Tr!==null&&Xl(Tr)&&(Tr=null),po.forEach(gg),mo.forEach(gg)}function yo(o,a){o.blockedOn===a&&(o.blockedOn=null,Jc||(Jc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,FC)))}function vo(o){function a(y){return yo(y,o)}if(0<Jl.length){yo(Jl[0],o);for(var f=1;f<Jl.length;f++){var p=Jl[f];p.blockedOn===o&&(p.blockedOn=null)}}for(Er!==null&&yo(Er,o),br!==null&&yo(br,o),Tr!==null&&yo(Tr,o),po.forEach(a),mo.forEach(a),f=0;f<Mr.length;f++)p=Mr[f],p.blockedOn===o&&(p.blockedOn=null);for(;0<Mr.length&&(f=Mr[0],f.blockedOn===null);)mg(f),f.blockedOn===null&&Mr.shift()}var fs=P.ReactCurrentBatchConfig,Zl=!0;function zC(o,a,f,p){var y=Oe,x=fs.transition;fs.transition=null;try{Oe=1,Xc(o,a,f,p)}finally{Oe=y,fs.transition=x}}function VC(o,a,f,p){var y=Oe,x=fs.transition;fs.transition=null;try{Oe=4,Xc(o,a,f,p)}finally{Oe=y,fs.transition=x}}function Xc(o,a,f,p){if(Zl){var y=Zc(o,a,f,p);if(y===null)yf(o,a,p,ea,f),pg(o,p);else if(BC(y,o,a,f,p))p.stopPropagation();else if(pg(o,p),a&4&&-1<LC.indexOf(o)){for(;y!==null;){var x=Ro(y);if(x!==null&&cg(x),x=Zc(o,a,f,p),x===null&&yf(o,a,p,ea,f),x===y)break;y=x}y!==null&&p.stopPropagation()}else yf(o,a,p,null,f)}}var ea=null;function Zc(o,a,f,p){if(ea=null,o=pt(p),o=wi(o),o!==null)if(a=Si(o),a===null)o=null;else if(f=a.tag,f===13){if(o=eg(a),o!==null)return o;o=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return ea=o,null}function yg(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bC()){case Gc:return 1;case og:return 4;case Gl:case TC:return 16;case lg:return 536870912;default:return 16}default:return 16}}var Nr=null,ef=null,ta=null;function vg(){if(ta)return ta;var o,a=ef,f=a.length,p,y="value"in Nr?Nr.value:Nr.textContent,x=y.length;for(o=0;o<f&&a[o]===y[o];o++);var A=f-o;for(p=1;p<=A&&a[f-p]===y[x-p];p++);return ta=y.slice(o,1<p?1-p:void 0)}function na(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function ra(){return!0}function xg(){return!1}function nn(o){function a(f,p,y,x,A){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=A,this.currentTarget=null;for(var b in o)o.hasOwnProperty(b)&&(f=o[b],this[b]=f?f(x):x[b]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ra:xg,this.isPropagationStopped=xg,this}return J(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),a}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=nn(ds),xo=J({},ds,{view:0,detail:0}),jC=nn(xo),nf,rf,So,ia=J({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==So&&(So&&o.type==="mousemove"?(nf=o.screenX-So.screenX,rf=o.screenY-So.screenY):rf=nf=0,So=o),nf)},movementY:function(o){return"movementY"in o?o.movementY:rf}}),Sg=nn(ia),_C=J({},ia,{dataTransfer:0}),UC=nn(_C),HC=J({},xo,{relatedTarget:0}),sf=nn(HC),WC=J({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),QC=nn(WC),GC=J({},ds,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),KC=nn(GC),$C=J({},ds,{data:0}),wg=nn($C),qC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XC(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=JC[o])?!!a[o]:!1}function of(){return XC}var ZC=J({},xo,{key:function(o){if(o.key){var a=qC[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=na(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?YC[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(o){return o.type==="keypress"?na(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?na(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),eE=nn(ZC),tE=J({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kg=nn(tE),nE=J({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),rE=nn(nE),iE=J({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),sE=nn(iE),oE=J({},ia,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lE=nn(oE),aE=[9,13,27,32],lf=u&&"CompositionEvent"in window,wo=null;u&&"documentMode"in document&&(wo=document.documentMode);var uE=u&&"TextEvent"in window&&!wo,Ag=u&&(!lf||wo&&8<wo&&11>=wo),Cg=" ",Eg=!1;function bg(o,a){switch(o){case"keyup":return aE.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tg(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var hs=!1;function cE(o,a){switch(o){case"compositionend":return Tg(a);case"keypress":return a.which!==32?null:(Eg=!0,Cg);case"textInput":return o=a.data,o===Cg&&Eg?null:o;default:return null}}function fE(o,a){if(hs)return o==="compositionend"||!lf&&bg(o,a)?(o=vg(),ta=ef=Nr=null,hs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ag&&a.locale!=="ko"?null:a.data;default:return null}}var dE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!dE[o.type]:a==="textarea"}function Ng(o,a,f,p){qm(p),a=ua(a,"onChange"),0<a.length&&(f=new tf("onChange","change",null,f,p),o.push({event:f,listeners:a}))}var ko=null,Ao=null;function hE(o){Kg(o,0)}function sa(o){var a=vs(o);if(rs(a))return o}function pE(o,a){if(o==="change")return a}var Rg=!1;if(u){var af;if(u){var uf="oninput"in document;if(!uf){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),uf=typeof Dg.oninput=="function"}af=uf}else af=!1;Rg=af&&(!document.documentMode||9<document.documentMode)}function Pg(){ko&&(ko.detachEvent("onpropertychange",Og),Ao=ko=null)}function Og(o){if(o.propertyName==="value"&&sa(Ao)){var a=[];Ng(a,Ao,o,pt(o)),Zm(hE,a)}}function mE(o,a,f){o==="focusin"?(Pg(),ko=a,Ao=f,ko.attachEvent("onpropertychange",Og)):o==="focusout"&&Pg()}function gE(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return sa(Ao)}function yE(o,a){if(o==="click")return sa(a)}function vE(o,a){if(o==="input"||o==="change")return sa(a)}function xE(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Mn=typeof Object.is=="function"?Object.is:xE;function Co(o,a){if(Mn(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var f=Object.keys(o),p=Object.keys(a);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!c.call(a,y)||!Mn(o[y],a[y]))return!1}return!0}function Ig(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Lg(o,a){var f=Ig(o);o=0;for(var p;f;){if(f.nodeType===3){if(p=o+f.textContent.length,o<=a&&p>=a)return{node:f,offset:a-o};o=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Ig(f)}}function Bg(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?Bg(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function Fg(){for(var o=window,a=er();a instanceof o.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)o=a.contentWindow;else break;a=er(o.document)}return a}function cf(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function SE(o){var a=Fg(),f=o.focusedElem,p=o.selectionRange;if(a!==f&&f&&f.ownerDocument&&Bg(f.ownerDocument.documentElement,f)){if(p!==null&&cf(f)){if(a=p.start,o=p.end,o===void 0&&(o=a),"selectionStart"in f)f.selectionStart=a,f.selectionEnd=Math.min(o,f.value.length);else if(o=(a=f.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var y=f.textContent.length,x=Math.min(p.start,y);p=p.end===void 0?x:Math.min(p.end,y),!o.extend&&x>p&&(y=p,p=x,x=y),y=Lg(f,x);var A=Lg(f,p);y&&A&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==A.node||o.focusOffset!==A.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),o.removeAllRanges(),x>p?(o.addRange(a),o.extend(A.node,A.offset)):(a.setEnd(A.node,A.offset),o.addRange(a)))}}for(a=[],o=f;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<a.length;f++)o=a[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var wE=u&&"documentMode"in document&&11>=document.documentMode,ps=null,ff=null,Eo=null,df=!1;function zg(o,a,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;df||ps==null||ps!==er(p)||(p=ps,"selectionStart"in p&&cf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Eo&&Co(Eo,p)||(Eo=p,p=ua(ff,"onSelect"),0<p.length&&(a=new tf("onSelect","select",null,a,f),o.push({event:a,listeners:p}),a.target=ps)))}function oa(o,a){var f={};return f[o.toLowerCase()]=a.toLowerCase(),f["Webkit"+o]="webkit"+a,f["Moz"+o]="moz"+a,f}var ms={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},hf={},Vg={};u&&(Vg=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function la(o){if(hf[o])return hf[o];if(!ms[o])return o;var a=ms[o],f;for(f in a)if(a.hasOwnProperty(f)&&f in Vg)return hf[o]=a[f];return o}var jg=la("animationend"),_g=la("animationiteration"),Ug=la("animationstart"),Hg=la("transitionend"),Wg=new Map,Qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(o,a){Wg.set(o,a),s(a,[o])}for(var pf=0;pf<Qg.length;pf++){var mf=Qg[pf],kE=mf.toLowerCase(),AE=mf[0].toUpperCase()+mf.slice(1);Rr(kE,"on"+AE)}Rr(jg,"onAnimationEnd"),Rr(_g,"onAnimationIteration"),Rr(Ug,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Hg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CE=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function Gg(o,a,f){var p=o.type||"unknown-event";o.currentTarget=f,kC(p,a,void 0,o),o.currentTarget=null}function Kg(o,a){a=(a&4)!==0;for(var f=0;f<o.length;f++){var p=o[f],y=p.event;p=p.listeners;e:{var x=void 0;if(a)for(var A=p.length-1;0<=A;A--){var b=p[A],N=b.instance,j=b.currentTarget;if(b=b.listener,N!==x&&y.isPropagationStopped())break e;Gg(y,b,j),x=N}else for(A=0;A<p.length;A++){if(b=p[A],N=b.instance,j=b.currentTarget,b=b.listener,N!==x&&y.isPropagationStopped())break e;Gg(y,b,j),x=N}}}if(Ql)throw o=Qc,Ql=!1,Qc=null,o}function Ve(o,a){var f=a[Af];f===void 0&&(f=a[Af]=new Set);var p=o+"__bubble";f.has(p)||($g(a,o,2,!1),f.add(p))}function gf(o,a,f){var p=0;a&&(p|=4),$g(f,o,p,a)}var aa="_reactListening"+Math.random().toString(36).slice(2);function To(o){if(!o[aa]){o[aa]=!0,r.forEach(function(f){f!=="selectionchange"&&(CE.has(f)||gf(f,!1,o),gf(f,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[aa]||(a[aa]=!0,gf("selectionchange",!1,a))}}function $g(o,a,f,p){switch(yg(a)){case 1:var y=zC;break;case 4:y=VC;break;default:y=Xc}f=y.bind(null,a,f,o),y=void 0,!Wc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(a,f,{capture:!0,passive:y}):o.addEventListener(a,f,!0):y!==void 0?o.addEventListener(a,f,{passive:y}):o.addEventListener(a,f,!1)}function yf(o,a,f,p,y){var x=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var b=p.stateNode.containerInfo;if(b===y||b.nodeType===8&&b.parentNode===y)break;if(A===4)for(A=p.return;A!==null;){var N=A.tag;if((N===3||N===4)&&(N=A.stateNode.containerInfo,N===y||N.nodeType===8&&N.parentNode===y))return;A=A.return}for(;b!==null;){if(A=wi(b),A===null)return;if(N=A.tag,N===5||N===6){p=x=A;continue e}b=b.parentNode}}p=p.return}Zm(function(){var j=x,H=pt(f),Q=[];e:{var U=Wg.get(o);if(U!==void 0){var Z=tf,re=o;switch(o){case"keypress":if(na(f)===0)break e;case"keydown":case"keyup":Z=eE;break;case"focusin":re="focus",Z=sf;break;case"focusout":re="blur",Z=sf;break;case"beforeblur":case"afterblur":Z=sf;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=UC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=rE;break;case jg:case _g:case Ug:Z=QC;break;case Hg:Z=sE;break;case"scroll":Z=jC;break;case"wheel":Z=lE;break;case"copy":case"cut":case"paste":Z=KC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=kg}var ie=(a&4)!==0,tt=!ie&&o==="scroll",z=ie?U!==null?U+"Capture":null:U;ie=[];for(var O=j,V;O!==null;){V=O;var $=V.stateNode;if(V.tag===5&&$!==null&&(V=$,z!==null&&($=ao(O,z),$!=null&&ie.push(Mo(O,$,V)))),tt)break;O=O.return}0<ie.length&&(U=new Z(U,re,null,f,H),Q.push({event:U,listeners:ie}))}}if((a&7)===0){e:{if(U=o==="mouseover"||o==="pointerover",Z=o==="mouseout"||o==="pointerout",U&&f!==at&&(re=f.relatedTarget||f.fromElement)&&(wi(re)||re[nr]))break e;if((Z||U)&&(U=H.window===H?H:(U=H.ownerDocument)?U.defaultView||U.parentWindow:window,Z?(re=f.relatedTarget||f.toElement,Z=j,re=re?wi(re):null,re!==null&&(tt=Si(re),re!==tt||re.tag!==5&&re.tag!==6)&&(re=null)):(Z=null,re=j),Z!==re)){if(ie=Sg,$="onMouseLeave",z="onMouseEnter",O="mouse",(o==="pointerout"||o==="pointerover")&&(ie=kg,$="onPointerLeave",z="onPointerEnter",O="pointer"),tt=Z==null?U:vs(Z),V=re==null?U:vs(re),U=new ie($,O+"leave",Z,f,H),U.target=tt,U.relatedTarget=V,$=null,wi(H)===j&&(ie=new ie(z,O+"enter",re,f,H),ie.target=V,ie.relatedTarget=tt,$=ie),tt=$,Z&&re)t:{for(ie=Z,z=re,O=0,V=ie;V;V=gs(V))O++;for(V=0,$=z;$;$=gs($))V++;for(;0<O-V;)ie=gs(ie),O--;for(;0<V-O;)z=gs(z),V--;for(;O--;){if(ie===z||z!==null&&ie===z.alternate)break t;ie=gs(ie),z=gs(z)}ie=null}else ie=null;Z!==null&&qg(Q,U,Z,ie,!1),re!==null&&tt!==null&&qg(Q,tt,re,ie,!0)}}e:{if(U=j?vs(j):window,Z=U.nodeName&&U.nodeName.toLowerCase(),Z==="select"||Z==="input"&&U.type==="file")var oe=pE;else if(Mg(U))if(Rg)oe=vE;else{oe=gE;var ce=mE}else(Z=U.nodeName)&&Z.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(oe=yE);if(oe&&(oe=oe(o,j))){Ng(Q,oe,f,H);break e}ce&&ce(o,U,j),o==="focusout"&&(ce=U._wrapperState)&&ce.controlled&&U.type==="number"&&Ar(U,"number",U.value)}switch(ce=j?vs(j):window,o){case"focusin":(Mg(ce)||ce.contentEditable==="true")&&(ps=ce,ff=j,Eo=null);break;case"focusout":Eo=ff=ps=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,zg(Q,f,H);break;case"selectionchange":if(wE)break;case"keydown":case"keyup":zg(Q,f,H)}var fe;if(lf)e:{switch(o){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else hs?bg(o,f)&&(de="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(de="onCompositionStart");de&&(Ag&&f.locale!=="ko"&&(hs||de!=="onCompositionStart"?de==="onCompositionEnd"&&hs&&(fe=vg()):(Nr=H,ef="value"in Nr?Nr.value:Nr.textContent,hs=!0)),ce=ua(j,de),0<ce.length&&(de=new wg(de,o,null,f,H),Q.push({event:de,listeners:ce}),fe?de.data=fe:(fe=Tg(f),fe!==null&&(de.data=fe)))),(fe=uE?cE(o,f):fE(o,f))&&(j=ua(j,"onBeforeInput"),0<j.length&&(H=new wg("onBeforeInput","beforeinput",null,f,H),Q.push({event:H,listeners:j}),H.data=fe))}Kg(Q,a)})}function Mo(o,a,f){return{instance:o,listener:a,currentTarget:f}}function ua(o,a){for(var f=a+"Capture",p=[];o!==null;){var y=o,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=ao(o,f),x!=null&&p.unshift(Mo(o,x,y)),x=ao(o,a),x!=null&&p.push(Mo(o,x,y))),o=o.return}return p}function gs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function qg(o,a,f,p,y){for(var x=a._reactName,A=[];f!==null&&f!==p;){var b=f,N=b.alternate,j=b.stateNode;if(N!==null&&N===p)break;b.tag===5&&j!==null&&(b=j,y?(N=ao(f,x),N!=null&&A.unshift(Mo(f,N,b))):y||(N=ao(f,x),N!=null&&A.push(Mo(f,N,b)))),f=f.return}A.length!==0&&o.push({event:a,listeners:A})}var EE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function Yg(o){return(typeof o=="string"?o:""+o).replace(EE,`
`).replace(bE,"")}function ca(o,a,f){if(a=Yg(a),Yg(o)!==a&&f)throw Error(n(425))}function fa(){}var vf=null,xf=null;function Sf(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,ME=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(o){return Jg.resolve(null).then(o).catch(NE)}:wf;function NE(o){setTimeout(function(){throw o})}function kf(o,a){var f=a,p=0;do{var y=f.nextSibling;if(o.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"){if(p===0){o.removeChild(y),vo(a);return}p--}else f!=="$"&&f!=="$?"&&f!=="$!"||p++;f=y}while(f);vo(a)}function Dr(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function Xg(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return o;a--}else f==="/$"&&a++}o=o.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Un="__reactFiber$"+ys,No="__reactProps$"+ys,nr="__reactContainer$"+ys,Af="__reactEvents$"+ys,RE="__reactListeners$"+ys,DE="__reactHandles$"+ys;function wi(o){var a=o[Un];if(a)return a;for(var f=o.parentNode;f;){if(a=f[nr]||f[Un]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(o=Xg(o);o!==null;){if(f=o[Un])return f;o=Xg(o)}return a}o=f,f=o.parentNode}return null}function Ro(o){return o=o[Un]||o[nr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function vs(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function da(o){return o[No]||null}var Cf=[],xs=-1;function Pr(o){return{current:o}}function je(o){0>xs||(o.current=Cf[xs],Cf[xs]=null,xs--)}function ze(o,a){xs++,Cf[xs]=o.current,o.current=a}var Or={},Ot=Pr(Or),Kt=Pr(!1),ki=Or;function Ss(o,a){var f=o.type.contextTypes;if(!f)return Or;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in f)y[x]=a[x];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=y),y}function $t(o){return o=o.childContextTypes,o!=null}function ha(){je(Kt),je(Ot)}function Zg(o,a,f){if(Ot.current!==Or)throw Error(n(168));ze(Ot,a),ze(Kt,f)}function ey(o,a,f){var p=o.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return f;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(n(108,Pe(o)||"Unknown",y));return J({},f,p)}function pa(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Or,ki=Ot.current,ze(Ot,o),ze(Kt,Kt.current),!0}function ty(o,a,f){var p=o.stateNode;if(!p)throw Error(n(169));f?(o=ey(o,a,ki),p.__reactInternalMemoizedMergedChildContext=o,je(Kt),je(Ot),ze(Ot,o)):je(Kt),ze(Kt,f)}var rr=null,ma=!1,Ef=!1;function ny(o){rr===null?rr=[o]:rr.push(o)}function PE(o){ma=!0,ny(o)}function Ir(){if(!Ef&&rr!==null){Ef=!0;var o=0,a=Oe;try{var f=rr;for(Oe=1;o<f.length;o++){var p=f[o];do p=p(!0);while(p!==null)}rr=null,ma=!1}catch(y){throw rr!==null&&(rr=rr.slice(o+1)),ig(Gc,Ir),y}finally{Oe=a,Ef=!1}}return null}var ws=[],ks=0,ga=null,ya=0,fn=[],dn=0,Ai=null,ir=1,sr="";function Ci(o,a){ws[ks++]=ya,ws[ks++]=ga,ga=o,ya=a}function ry(o,a,f){fn[dn++]=ir,fn[dn++]=sr,fn[dn++]=Ai,Ai=o;var p=ir;o=sr;var y=32-Tn(p)-1;p&=~(1<<y),f+=1;var x=32-Tn(a)+y;if(30<x){var A=y-y%5;x=(p&(1<<A)-1).toString(32),p>>=A,y-=A,ir=1<<32-Tn(a)+y|f<<y|p,sr=x+o}else ir=1<<x|f<<y|p,sr=o}function bf(o){o.return!==null&&(Ci(o,1),ry(o,1,0))}function Tf(o){for(;o===ga;)ga=ws[--ks],ws[ks]=null,ya=ws[--ks],ws[ks]=null;for(;o===Ai;)Ai=fn[--dn],fn[dn]=null,sr=fn[--dn],fn[dn]=null,ir=fn[--dn],fn[dn]=null}var rn=null,sn=null,He=!1,Nn=null;function iy(o,a){var f=gn(5,null,null,0);f.elementType="DELETED",f.stateNode=a,f.return=o,a=o.deletions,a===null?(o.deletions=[f],o.flags|=16):a.push(f)}function sy(o,a){switch(o.tag){case 5:var f=o.type;return a=a.nodeType!==1||f.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,rn=o,sn=Dr(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,rn=o,sn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(f=Ai!==null?{id:ir,overflow:sr}:null,o.memoizedState={dehydrated:a,treeContext:f,retryLane:1073741824},f=gn(18,null,null,0),f.stateNode=a,f.return=o,o.child=f,rn=o,sn=null,!0):!1;default:return!1}}function Mf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Nf(o){if(He){var a=sn;if(a){var f=a;if(!sy(o,a)){if(Mf(o))throw Error(n(418));a=Dr(f.nextSibling);var p=rn;a&&sy(o,a)?iy(p,f):(o.flags=o.flags&-4097|2,He=!1,rn=o)}}else{if(Mf(o))throw Error(n(418));o.flags=o.flags&-4097|2,He=!1,rn=o}}}function oy(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;rn=o}function va(o){if(o!==rn)return!1;if(!He)return oy(o),He=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!Sf(o.type,o.memoizedProps)),a&&(a=sn)){if(Mf(o))throw ly(),Error(n(418));for(;a;)iy(o,a),a=Dr(a.nextSibling)}if(oy(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(a===0){sn=Dr(o.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++}o=o.nextSibling}sn=null}}else sn=rn?Dr(o.stateNode.nextSibling):null;return!0}function ly(){for(var o=sn;o;)o=Dr(o.nextSibling)}function As(){sn=rn=null,He=!1}function Rf(o){Nn===null?Nn=[o]:Nn.push(o)}var OE=P.ReactCurrentBatchConfig;function Do(o,a,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var p=f.stateNode}if(!p)throw Error(n(147,o));var y=p,x=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(A){var b=y.refs;A===null?delete b[x]:b[x]=A},a._stringRef=x,a)}if(typeof o!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,o))}return o}function xa(o,a){throw o=Object.prototype.toString.call(a),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function ay(o){var a=o._init;return a(o._payload)}function uy(o){function a(z,O){if(o){var V=z.deletions;V===null?(z.deletions=[O],z.flags|=16):V.push(O)}}function f(z,O){if(!o)return null;for(;O!==null;)a(z,O),O=O.sibling;return null}function p(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function y(z,O){return z=Ur(z,O),z.index=0,z.sibling=null,z}function x(z,O,V){return z.index=V,o?(V=z.alternate,V!==null?(V=V.index,V<O?(z.flags|=2,O):V):(z.flags|=2,O)):(z.flags|=1048576,O)}function A(z){return o&&z.alternate===null&&(z.flags|=2),z}function b(z,O,V,$){return O===null||O.tag!==6?(O=wd(V,z.mode,$),O.return=z,O):(O=y(O,V),O.return=z,O)}function N(z,O,V,$){var oe=V.type;return oe===I?H(z,O,V.props.children,$,V.key):O!==null&&(O.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===De&&ay(oe)===O.type)?($=y(O,V.props),$.ref=Do(z,O,V),$.return=z,$):($=Ha(V.type,V.key,V.props,null,z.mode,$),$.ref=Do(z,O,V),$.return=z,$)}function j(z,O,V,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==V.containerInfo||O.stateNode.implementation!==V.implementation?(O=kd(V,z.mode,$),O.return=z,O):(O=y(O,V.children||[]),O.return=z,O)}function H(z,O,V,$,oe){return O===null||O.tag!==7?(O=Pi(V,z.mode,$,oe),O.return=z,O):(O=y(O,V),O.return=z,O)}function Q(z,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return O=wd(""+O,z.mode,V),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case R:return V=Ha(O.type,O.key,O.props,null,z.mode,V),V.ref=Do(z,null,O),V.return=z,V;case M:return O=kd(O,z.mode,V),O.return=z,O;case De:var $=O._init;return Q(z,$(O._payload),V)}if(Cr(O)||q(O))return O=Pi(O,z.mode,V,null),O.return=z,O;xa(z,O)}return null}function U(z,O,V,$){var oe=O!==null?O.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return oe!==null?null:b(z,O,""+V,$);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return V.key===oe?N(z,O,V,$):null;case M:return V.key===oe?j(z,O,V,$):null;case De:return oe=V._init,U(z,O,oe(V._payload),$)}if(Cr(V)||q(V))return oe!==null?null:H(z,O,V,$,null);xa(z,V)}return null}function Z(z,O,V,$,oe){if(typeof $=="string"&&$!==""||typeof $=="number")return z=z.get(V)||null,b(O,z,""+$,oe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case R:return z=z.get($.key===null?V:$.key)||null,N(O,z,$,oe);case M:return z=z.get($.key===null?V:$.key)||null,j(O,z,$,oe);case De:var ce=$._init;return Z(z,O,V,ce($._payload),oe)}if(Cr($)||q($))return z=z.get(V)||null,H(O,z,$,oe,null);xa(O,$)}return null}function re(z,O,V,$){for(var oe=null,ce=null,fe=O,de=O=0,yt=null;fe!==null&&de<V.length;de++){fe.index>de?(yt=fe,fe=null):yt=fe.sibling;var Re=U(z,fe,V[de],$);if(Re===null){fe===null&&(fe=yt);break}o&&fe&&Re.alternate===null&&a(z,fe),O=x(Re,O,de),ce===null?oe=Re:ce.sibling=Re,ce=Re,fe=yt}if(de===V.length)return f(z,fe),He&&Ci(z,de),oe;if(fe===null){for(;de<V.length;de++)fe=Q(z,V[de],$),fe!==null&&(O=x(fe,O,de),ce===null?oe=fe:ce.sibling=fe,ce=fe);return He&&Ci(z,de),oe}for(fe=p(z,fe);de<V.length;de++)yt=Z(fe,z,de,V[de],$),yt!==null&&(o&&yt.alternate!==null&&fe.delete(yt.key===null?de:yt.key),O=x(yt,O,de),ce===null?oe=yt:ce.sibling=yt,ce=yt);return o&&fe.forEach(function(Hr){return a(z,Hr)}),He&&Ci(z,de),oe}function ie(z,O,V,$){var oe=q(V);if(typeof oe!="function")throw Error(n(150));if(V=oe.call(V),V==null)throw Error(n(151));for(var ce=oe=null,fe=O,de=O=0,yt=null,Re=V.next();fe!==null&&!Re.done;de++,Re=V.next()){fe.index>de?(yt=fe,fe=null):yt=fe.sibling;var Hr=U(z,fe,Re.value,$);if(Hr===null){fe===null&&(fe=yt);break}o&&fe&&Hr.alternate===null&&a(z,fe),O=x(Hr,O,de),ce===null?oe=Hr:ce.sibling=Hr,ce=Hr,fe=yt}if(Re.done)return f(z,fe),He&&Ci(z,de),oe;if(fe===null){for(;!Re.done;de++,Re=V.next())Re=Q(z,Re.value,$),Re!==null&&(O=x(Re,O,de),ce===null?oe=Re:ce.sibling=Re,ce=Re);return He&&Ci(z,de),oe}for(fe=p(z,fe);!Re.done;de++,Re=V.next())Re=Z(fe,z,de,Re.value,$),Re!==null&&(o&&Re.alternate!==null&&fe.delete(Re.key===null?de:Re.key),O=x(Re,O,de),ce===null?oe=Re:ce.sibling=Re,ce=Re);return o&&fe.forEach(function(db){return a(z,db)}),He&&Ci(z,de),oe}function tt(z,O,V,$){if(typeof V=="object"&&V!==null&&V.type===I&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case R:e:{for(var oe=V.key,ce=O;ce!==null;){if(ce.key===oe){if(oe=V.type,oe===I){if(ce.tag===7){f(z,ce.sibling),O=y(ce,V.props.children),O.return=z,z=O;break e}}else if(ce.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===De&&ay(oe)===ce.type){f(z,ce.sibling),O=y(ce,V.props),O.ref=Do(z,ce,V),O.return=z,z=O;break e}f(z,ce);break}else a(z,ce);ce=ce.sibling}V.type===I?(O=Pi(V.props.children,z.mode,$,V.key),O.return=z,z=O):($=Ha(V.type,V.key,V.props,null,z.mode,$),$.ref=Do(z,O,V),$.return=z,z=$)}return A(z);case M:e:{for(ce=V.key;O!==null;){if(O.key===ce)if(O.tag===4&&O.stateNode.containerInfo===V.containerInfo&&O.stateNode.implementation===V.implementation){f(z,O.sibling),O=y(O,V.children||[]),O.return=z,z=O;break e}else{f(z,O);break}else a(z,O);O=O.sibling}O=kd(V,z.mode,$),O.return=z,z=O}return A(z);case De:return ce=V._init,tt(z,O,ce(V._payload),$)}if(Cr(V))return re(z,O,V,$);if(q(V))return ie(z,O,V,$);xa(z,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,O!==null&&O.tag===6?(f(z,O.sibling),O=y(O,V),O.return=z,z=O):(f(z,O),O=wd(V,z.mode,$),O.return=z,z=O),A(z)):f(z,O)}return tt}var Cs=uy(!0),cy=uy(!1),Sa=Pr(null),wa=null,Es=null,Df=null;function Pf(){Df=Es=wa=null}function Of(o){var a=Sa.current;je(Sa),o._currentValue=a}function If(o,a,f){for(;o!==null;){var p=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),o===f)break;o=o.return}}function bs(o,a){wa=o,Df=Es=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(qt=!0),o.firstContext=null)}function hn(o){var a=o._currentValue;if(Df!==o)if(o={context:o,memoizedValue:a,next:null},Es===null){if(wa===null)throw Error(n(308));Es=o,wa.dependencies={lanes:0,firstContext:o}}else Es=Es.next=o;return a}var Ei=null;function Lf(o){Ei===null?Ei=[o]:Ei.push(o)}function fy(o,a,f,p){var y=a.interleaved;return y===null?(f.next=f,Lf(a)):(f.next=y.next,y.next=f),a.interleaved=f,or(o,p)}function or(o,a){o.lanes|=a;var f=o.alternate;for(f!==null&&(f.lanes|=a),f=o,o=o.return;o!==null;)o.childLanes|=a,f=o.alternate,f!==null&&(f.childLanes|=a),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Lr=!1;function Bf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function lr(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function Br(o,a,f){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Me&2)!==0){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,or(o,f)}return y=p.interleaved,y===null?(a.next=a,Lf(p)):(a.next=y.next,y.next=a),p.interleaved=a,or(o,f)}function ka(o,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194240)!==0)){var p=a.lanes;p&=o.pendingLanes,f|=p,a.lanes=f,qc(o,f)}}function hy(o,a){var f=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var A={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};x===null?y=x=A:x=x.next=A,f=f.next}while(f!==null);x===null?y=x=a:x=x.next=a}else y=x=a;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,effects:p.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=a:o.next=a,f.lastBaseUpdate=a}function Aa(o,a,f,p){var y=o.updateQueue;Lr=!1;var x=y.firstBaseUpdate,A=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var N=b,j=N.next;N.next=null,A===null?x=j:A.next=j,A=N;var H=o.alternate;H!==null&&(H=H.updateQueue,b=H.lastBaseUpdate,b!==A&&(b===null?H.firstBaseUpdate=j:b.next=j,H.lastBaseUpdate=N))}if(x!==null){var Q=y.baseState;A=0,H=j=N=null,b=x;do{var U=b.lane,Z=b.eventTime;if((p&U)===U){H!==null&&(H=H.next={eventTime:Z,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var re=o,ie=b;switch(U=a,Z=f,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){Q=re.call(Z,Q,U);break e}Q=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,U=typeof re=="function"?re.call(Z,Q,U):re,U==null)break e;Q=J({},Q,U);break e;case 2:Lr=!0}}b.callback!==null&&b.lane!==0&&(o.flags|=64,U=y.effects,U===null?y.effects=[b]:U.push(b))}else Z={eventTime:Z,lane:U,tag:b.tag,payload:b.payload,callback:b.callback,next:null},H===null?(j=H=Z,N=Q):H=H.next=Z,A|=U;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;U=b,b=U.next,U.next=null,y.lastBaseUpdate=U,y.shared.pending=null}}while(!0);if(H===null&&(N=Q),y.baseState=N,y.firstBaseUpdate=j,y.lastBaseUpdate=H,a=y.shared.interleaved,a!==null){y=a;do A|=y.lane,y=y.next;while(y!==a)}else x===null&&(y.shared.lanes=0);Mi|=A,o.lanes=A,o.memoizedState=Q}}function py(o,a,f){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var p=o[a],y=p.callback;if(y!==null){if(p.callback=null,p=f,typeof y!="function")throw Error(n(191,y));y.call(p)}}}var Po={},Hn=Pr(Po),Oo=Pr(Po),Io=Pr(Po);function bi(o){if(o===Po)throw Error(n(174));return o}function Ff(o,a){switch(ze(Io,a),ze(Oo,o),ze(Hn,Po),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:cs(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=cs(a,o)}je(Hn),ze(Hn,a)}function Ts(){je(Hn),je(Oo),je(Io)}function my(o){bi(Io.current);var a=bi(Hn.current),f=cs(a,o.type);a!==f&&(ze(Oo,o),ze(Hn,f))}function zf(o){Oo.current===o&&(je(Hn),je(Oo))}var Qe=Pr(0);function Ca(o){for(var a=o;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Vf=[];function jf(){for(var o=0;o<Vf.length;o++)Vf[o]._workInProgressVersionPrimary=null;Vf.length=0}var Ea=P.ReactCurrentDispatcher,_f=P.ReactCurrentBatchConfig,Ti=0,Ge=null,ct=null,mt=null,ba=!1,Lo=!1,Bo=0,IE=0;function It(){throw Error(n(321))}function Uf(o,a){if(a===null)return!1;for(var f=0;f<a.length&&f<o.length;f++)if(!Mn(o[f],a[f]))return!1;return!0}function Hf(o,a,f,p,y,x){if(Ti=x,Ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ea.current=o===null||o.memoizedState===null?zE:VE,o=f(p,y),Lo){x=0;do{if(Lo=!1,Bo=0,25<=x)throw Error(n(301));x+=1,mt=ct=null,a.updateQueue=null,Ea.current=jE,o=f(p,y)}while(Lo)}if(Ea.current=Na,a=ct!==null&&ct.next!==null,Ti=0,mt=ct=Ge=null,ba=!1,a)throw Error(n(300));return o}function Wf(){var o=Bo!==0;return Bo=0,o}function Wn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ge.memoizedState=mt=o:mt=mt.next=o,mt}function pn(){if(ct===null){var o=Ge.alternate;o=o!==null?o.memoizedState:null}else o=ct.next;var a=mt===null?Ge.memoizedState:mt.next;if(a!==null)mt=a,ct=o;else{if(o===null)throw Error(n(310));ct=o,o={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ge.memoizedState=mt=o:mt=mt.next=o}return mt}function Fo(o,a){return typeof a=="function"?a(o):a}function Qf(o){var a=pn(),f=a.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var p=ct,y=p.baseQueue,x=f.pending;if(x!==null){if(y!==null){var A=y.next;y.next=x.next,x.next=A}p.baseQueue=y=x,f.pending=null}if(y!==null){x=y.next,p=p.baseState;var b=A=null,N=null,j=x;do{var H=j.lane;if((Ti&H)===H)N!==null&&(N=N.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),p=j.hasEagerState?j.eagerState:o(p,j.action);else{var Q={lane:H,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};N===null?(b=N=Q,A=p):N=N.next=Q,Ge.lanes|=H,Mi|=H}j=j.next}while(j!==null&&j!==x);N===null?A=p:N.next=b,Mn(p,a.memoizedState)||(qt=!0),a.memoizedState=p,a.baseState=A,a.baseQueue=N,f.lastRenderedState=p}if(o=f.interleaved,o!==null){y=o;do x=y.lane,Ge.lanes|=x,Mi|=x,y=y.next;while(y!==o)}else y===null&&(f.lanes=0);return[a.memoizedState,f.dispatch]}function Gf(o){var a=pn(),f=a.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var p=f.dispatch,y=f.pending,x=a.memoizedState;if(y!==null){f.pending=null;var A=y=y.next;do x=o(x,A.action),A=A.next;while(A!==y);Mn(x,a.memoizedState)||(qt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),f.lastRenderedState=x}return[x,p]}function gy(){}function yy(o,a){var f=Ge,p=pn(),y=a(),x=!Mn(p.memoizedState,y);if(x&&(p.memoizedState=y,qt=!0),p=p.queue,Kf(Sy.bind(null,f,p,o),[o]),p.getSnapshot!==a||x||mt!==null&&mt.memoizedState.tag&1){if(f.flags|=2048,zo(9,xy.bind(null,f,p,y,a),void 0,null),gt===null)throw Error(n(349));(Ti&30)!==0||vy(f,a,y)}return y}function vy(o,a,f){o.flags|=16384,o={getSnapshot:a,value:f},a=Ge.updateQueue,a===null?(a={lastEffect:null,stores:null},Ge.updateQueue=a,a.stores=[o]):(f=a.stores,f===null?a.stores=[o]:f.push(o))}function xy(o,a,f,p){a.value=f,a.getSnapshot=p,wy(a)&&ky(o)}function Sy(o,a,f){return f(function(){wy(a)&&ky(o)})}function wy(o){var a=o.getSnapshot;o=o.value;try{var f=a();return!Mn(o,f)}catch{return!0}}function ky(o){var a=or(o,1);a!==null&&On(a,o,1,-1)}function Ay(o){var a=Wn();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fo,lastRenderedState:o},a.queue=o,o=o.dispatch=FE.bind(null,Ge,o),[a.memoizedState,o]}function zo(o,a,f,p){return o={tag:o,create:a,destroy:f,deps:p,next:null},a=Ge.updateQueue,a===null?(a={lastEffect:null,stores:null},Ge.updateQueue=a,a.lastEffect=o.next=o):(f=a.lastEffect,f===null?a.lastEffect=o.next=o:(p=f.next,f.next=o,o.next=p,a.lastEffect=o)),o}function Cy(){return pn().memoizedState}function Ta(o,a,f,p){var y=Wn();Ge.flags|=o,y.memoizedState=zo(1|a,f,void 0,p===void 0?null:p)}function Ma(o,a,f,p){var y=pn();p=p===void 0?null:p;var x=void 0;if(ct!==null){var A=ct.memoizedState;if(x=A.destroy,p!==null&&Uf(p,A.deps)){y.memoizedState=zo(a,f,x,p);return}}Ge.flags|=o,y.memoizedState=zo(1|a,f,x,p)}function Ey(o,a){return Ta(8390656,8,o,a)}function Kf(o,a){return Ma(2048,8,o,a)}function by(o,a){return Ma(4,2,o,a)}function Ty(o,a){return Ma(4,4,o,a)}function My(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function Ny(o,a,f){return f=f!=null?f.concat([o]):null,Ma(4,4,My.bind(null,a,o),f)}function $f(){}function Ry(o,a){var f=pn();a=a===void 0?null:a;var p=f.memoizedState;return p!==null&&a!==null&&Uf(a,p[1])?p[0]:(f.memoizedState=[o,a],o)}function Dy(o,a){var f=pn();a=a===void 0?null:a;var p=f.memoizedState;return p!==null&&a!==null&&Uf(a,p[1])?p[0]:(o=o(),f.memoizedState=[o,a],o)}function Py(o,a,f){return(Ti&21)===0?(o.baseState&&(o.baseState=!1,qt=!0),o.memoizedState=f):(Mn(f,a)||(f=ag(),Ge.lanes|=f,Mi|=f,o.baseState=!0),a)}function LE(o,a){var f=Oe;Oe=f!==0&&4>f?f:4,o(!0);var p=_f.transition;_f.transition={};try{o(!1),a()}finally{Oe=f,_f.transition=p}}function Oy(){return pn().memoizedState}function BE(o,a,f){var p=jr(o);if(f={lane:p,action:f,hasEagerState:!1,eagerState:null,next:null},Iy(o))Ly(a,f);else if(f=fy(o,a,f,p),f!==null){var y=_t();On(f,o,p,y),By(f,a,p)}}function FE(o,a,f){var p=jr(o),y={lane:p,action:f,hasEagerState:!1,eagerState:null,next:null};if(Iy(o))Ly(a,y);else{var x=o.alternate;if(o.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var A=a.lastRenderedState,b=x(A,f);if(y.hasEagerState=!0,y.eagerState=b,Mn(b,A)){var N=a.interleaved;N===null?(y.next=y,Lf(a)):(y.next=N.next,N.next=y),a.interleaved=y;return}}catch{}finally{}f=fy(o,a,y,p),f!==null&&(y=_t(),On(f,o,p,y),By(f,a,p))}}function Iy(o){var a=o.alternate;return o===Ge||a!==null&&a===Ge}function Ly(o,a){Lo=ba=!0;var f=o.pending;f===null?a.next=a:(a.next=f.next,f.next=a),o.pending=a}function By(o,a,f){if((f&4194240)!==0){var p=a.lanes;p&=o.pendingLanes,f|=p,a.lanes=f,qc(o,f)}}var Na={readContext:hn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},zE={readContext:hn,useCallback:function(o,a){return Wn().memoizedState=[o,a===void 0?null:a],o},useContext:hn,useEffect:Ey,useImperativeHandle:function(o,a,f){return f=f!=null?f.concat([o]):null,Ta(4194308,4,My.bind(null,a,o),f)},useLayoutEffect:function(o,a){return Ta(4194308,4,o,a)},useInsertionEffect:function(o,a){return Ta(4,2,o,a)},useMemo:function(o,a){var f=Wn();return a=a===void 0?null:a,o=o(),f.memoizedState=[o,a],o},useReducer:function(o,a,f){var p=Wn();return a=f!==void 0?f(a):a,p.memoizedState=p.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},p.queue=o,o=o.dispatch=BE.bind(null,Ge,o),[p.memoizedState,o]},useRef:function(o){var a=Wn();return o={current:o},a.memoizedState=o},useState:Ay,useDebugValue:$f,useDeferredValue:function(o){return Wn().memoizedState=o},useTransition:function(){var o=Ay(!1),a=o[0];return o=LE.bind(null,o[1]),Wn().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,f){var p=Ge,y=Wn();if(He){if(f===void 0)throw Error(n(407));f=f()}else{if(f=a(),gt===null)throw Error(n(349));(Ti&30)!==0||vy(p,a,f)}y.memoizedState=f;var x={value:f,getSnapshot:a};return y.queue=x,Ey(Sy.bind(null,p,x,o),[o]),p.flags|=2048,zo(9,xy.bind(null,p,x,f,a),void 0,null),f},useId:function(){var o=Wn(),a=gt.identifierPrefix;if(He){var f=sr,p=ir;f=(p&~(1<<32-Tn(p)-1)).toString(32)+f,a=":"+a+"R"+f,f=Bo++,0<f&&(a+="H"+f.toString(32)),a+=":"}else f=IE++,a=":"+a+"r"+f.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},VE={readContext:hn,useCallback:Ry,useContext:hn,useEffect:Kf,useImperativeHandle:Ny,useInsertionEffect:by,useLayoutEffect:Ty,useMemo:Dy,useReducer:Qf,useRef:Cy,useState:function(){return Qf(Fo)},useDebugValue:$f,useDeferredValue:function(o){var a=pn();return Py(a,ct.memoizedState,o)},useTransition:function(){var o=Qf(Fo)[0],a=pn().memoizedState;return[o,a]},useMutableSource:gy,useSyncExternalStore:yy,useId:Oy,unstable_isNewReconciler:!1},jE={readContext:hn,useCallback:Ry,useContext:hn,useEffect:Kf,useImperativeHandle:Ny,useInsertionEffect:by,useLayoutEffect:Ty,useMemo:Dy,useReducer:Gf,useRef:Cy,useState:function(){return Gf(Fo)},useDebugValue:$f,useDeferredValue:function(o){var a=pn();return ct===null?a.memoizedState=o:Py(a,ct.memoizedState,o)},useTransition:function(){var o=Gf(Fo)[0],a=pn().memoizedState;return[o,a]},useMutableSource:gy,useSyncExternalStore:yy,useId:Oy,unstable_isNewReconciler:!1};function Rn(o,a){if(o&&o.defaultProps){a=J({},a),o=o.defaultProps;for(var f in o)a[f]===void 0&&(a[f]=o[f]);return a}return a}function qf(o,a,f,p){a=o.memoizedState,f=f(p,a),f=f==null?a:J({},a,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var Ra={isMounted:function(o){return(o=o._reactInternals)?Si(o)===o:!1},enqueueSetState:function(o,a,f){o=o._reactInternals;var p=_t(),y=jr(o),x=lr(p,y);x.payload=a,f!=null&&(x.callback=f),a=Br(o,x,y),a!==null&&(On(a,o,y,p),ka(a,o,y))},enqueueReplaceState:function(o,a,f){o=o._reactInternals;var p=_t(),y=jr(o),x=lr(p,y);x.tag=1,x.payload=a,f!=null&&(x.callback=f),a=Br(o,x,y),a!==null&&(On(a,o,y,p),ka(a,o,y))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var f=_t(),p=jr(o),y=lr(f,p);y.tag=2,a!=null&&(y.callback=a),a=Br(o,y,p),a!==null&&(On(a,o,p,f),ka(a,o,p))}};function Fy(o,a,f,p,y,x,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,x,A):a.prototype&&a.prototype.isPureReactComponent?!Co(f,p)||!Co(y,x):!0}function zy(o,a,f){var p=!1,y=Or,x=a.contextType;return typeof x=="object"&&x!==null?x=hn(x):(y=$t(a)?ki:Ot.current,p=a.contextTypes,x=(p=p!=null)?Ss(o,y):Or),a=new a(f,x),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ra,o.stateNode=a,a._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=x),a}function Vy(o,a,f,p){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,p),a.state!==o&&Ra.enqueueReplaceState(a,a.state,null)}function Yf(o,a,f,p){var y=o.stateNode;y.props=f,y.state=o.memoizedState,y.refs={},Bf(o);var x=a.contextType;typeof x=="object"&&x!==null?y.context=hn(x):(x=$t(a)?ki:Ot.current,y.context=Ss(o,x)),y.state=o.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(qf(o,a,x,f),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Ra.enqueueReplaceState(y,y.state,null),Aa(o,f,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Ms(o,a){try{var f="",p=a;do f+=Ce(p),p=p.return;while(p);var y=f}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:o,source:a,stack:y,digest:null}}function Jf(o,a,f){return{value:o,source:null,stack:f??null,digest:a??null}}function Xf(o,a){try{console.error(a.value)}catch(f){setTimeout(function(){throw f})}}var _E=typeof WeakMap=="function"?WeakMap:Map;function jy(o,a,f){f=lr(-1,f),f.tag=3,f.payload={element:null};var p=a.value;return f.callback=function(){Fa||(Fa=!0,hd=p),Xf(o,a)},f}function _y(o,a,f){f=lr(-1,f),f.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;f.payload=function(){return p(y)},f.callback=function(){Xf(o,a)}}var x=o.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(f.callback=function(){Xf(o,a),typeof p!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var A=a.stack;this.componentDidCatch(a.value,{componentStack:A!==null?A:""})}),f}function Uy(o,a,f){var p=o.pingCache;if(p===null){p=o.pingCache=new _E;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(f)||(y.add(f),o=tb.bind(null,o,a,f),a.then(o,o))}function Hy(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function Wy(o,a,f,p,y){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(a=lr(-1,1),a.tag=2,Br(f,a,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var UE=P.ReactCurrentOwner,qt=!1;function jt(o,a,f,p){a.child=o===null?cy(a,null,f,p):Cs(a,o.child,f,p)}function Qy(o,a,f,p,y){f=f.render;var x=a.ref;return bs(a,y),p=Hf(o,a,f,p,x,y),f=Wf(),o!==null&&!qt?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,ar(o,a,y)):(He&&f&&bf(a),a.flags|=1,jt(o,a,p,y),a.child)}function Gy(o,a,f,p,y){if(o===null){var x=f.type;return typeof x=="function"&&!Sd(x)&&x.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(a.tag=15,a.type=x,Ky(o,a,x,p,y)):(o=Ha(f.type,null,p,a,a.mode,y),o.ref=a.ref,o.return=a,a.child=o)}if(x=o.child,(o.lanes&y)===0){var A=x.memoizedProps;if(f=f.compare,f=f!==null?f:Co,f(A,p)&&o.ref===a.ref)return ar(o,a,y)}return a.flags|=1,o=Ur(x,p),o.ref=a.ref,o.return=a,a.child=o}function Ky(o,a,f,p,y){if(o!==null){var x=o.memoizedProps;if(Co(x,p)&&o.ref===a.ref)if(qt=!1,a.pendingProps=p=x,(o.lanes&y)!==0)(o.flags&131072)!==0&&(qt=!0);else return a.lanes=o.lanes,ar(o,a,y)}return Zf(o,a,f,p,y)}function $y(o,a,f){var p=a.pendingProps,y=p.children,x=o!==null?o.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Rs,on),on|=f;else{if((f&1073741824)===0)return o=x!==null?x.baseLanes|f:f,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,ze(Rs,on),on|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:f,ze(Rs,on),on|=p}else x!==null?(p=x.baseLanes|f,a.memoizedState=null):p=f,ze(Rs,on),on|=p;return jt(o,a,y,f),a.child}function qy(o,a){var f=a.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(a.flags|=512,a.flags|=2097152)}function Zf(o,a,f,p,y){var x=$t(f)?ki:Ot.current;return x=Ss(a,x),bs(a,y),f=Hf(o,a,f,p,x,y),p=Wf(),o!==null&&!qt?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,ar(o,a,y)):(He&&p&&bf(a),a.flags|=1,jt(o,a,f,y),a.child)}function Yy(o,a,f,p,y){if($t(f)){var x=!0;pa(a)}else x=!1;if(bs(a,y),a.stateNode===null)Pa(o,a),zy(a,f,p),Yf(a,f,p,y),p=!0;else if(o===null){var A=a.stateNode,b=a.memoizedProps;A.props=b;var N=A.context,j=f.contextType;typeof j=="object"&&j!==null?j=hn(j):(j=$t(f)?ki:Ot.current,j=Ss(a,j));var H=f.getDerivedStateFromProps,Q=typeof H=="function"||typeof A.getSnapshotBeforeUpdate=="function";Q||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==p||N!==j)&&Vy(a,A,p,j),Lr=!1;var U=a.memoizedState;A.state=U,Aa(a,p,A,y),N=a.memoizedState,b!==p||U!==N||Kt.current||Lr?(typeof H=="function"&&(qf(a,f,H,p),N=a.memoizedState),(b=Lr||Fy(a,f,b,p,U,N,j))?(Q||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(a.flags|=4194308)):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=N),A.props=p,A.state=N,A.context=j,p=b):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{A=a.stateNode,dy(o,a),b=a.memoizedProps,j=a.type===a.elementType?b:Rn(a.type,b),A.props=j,Q=a.pendingProps,U=A.context,N=f.contextType,typeof N=="object"&&N!==null?N=hn(N):(N=$t(f)?ki:Ot.current,N=Ss(a,N));var Z=f.getDerivedStateFromProps;(H=typeof Z=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(b!==Q||U!==N)&&Vy(a,A,p,N),Lr=!1,U=a.memoizedState,A.state=U,Aa(a,p,A,y);var re=a.memoizedState;b!==Q||U!==re||Kt.current||Lr?(typeof Z=="function"&&(qf(a,f,Z,p),re=a.memoizedState),(j=Lr||Fy(a,f,j,p,U,re,N)||!1)?(H||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,re,N),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,re,N)),typeof A.componentDidUpdate=="function"&&(a.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof A.componentDidUpdate!="function"||b===o.memoizedProps&&U===o.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===o.memoizedProps&&U===o.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=re),A.props=p,A.state=re,A.context=N,p=j):(typeof A.componentDidUpdate!="function"||b===o.memoizedProps&&U===o.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||b===o.memoizedProps&&U===o.memoizedState||(a.flags|=1024),p=!1)}return ed(o,a,f,p,x,y)}function ed(o,a,f,p,y,x){qy(o,a);var A=(a.flags&128)!==0;if(!p&&!A)return y&&ty(a,f,!1),ar(o,a,x);p=a.stateNode,UE.current=a;var b=A&&typeof f.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,o!==null&&A?(a.child=Cs(a,o.child,null,x),a.child=Cs(a,null,b,x)):jt(o,a,b,x),a.memoizedState=p.state,y&&ty(a,f,!0),a.child}function Jy(o){var a=o.stateNode;a.pendingContext?Zg(o,a.pendingContext,a.pendingContext!==a.context):a.context&&Zg(o,a.context,!1),Ff(o,a.containerInfo)}function Xy(o,a,f,p,y){return As(),Rf(y),a.flags|=256,jt(o,a,f,p),a.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(o){return{baseLanes:o,cachePool:null,transitions:null}}function Zy(o,a,f){var p=a.pendingProps,y=Qe.current,x=!1,A=(a.flags&128)!==0,b;if((b=A)||(b=o!==null&&o.memoizedState===null?!1:(y&2)!==0),b?(x=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),ze(Qe,y&1),o===null)return Nf(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(A=p.children,o=p.fallback,x?(p=a.mode,x=a.child,A={mode:"hidden",children:A},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=A):x=Wa(A,p,0,null),o=Pi(o,p,f,null),x.return=a,o.return=a,x.sibling=o,a.child=x,a.child.memoizedState=nd(f),a.memoizedState=td,o):rd(a,A));if(y=o.memoizedState,y!==null&&(b=y.dehydrated,b!==null))return HE(o,a,A,p,b,y,f);if(x){x=p.fallback,A=a.mode,y=o.child,b=y.sibling;var N={mode:"hidden",children:p.children};return(A&1)===0&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=N,a.deletions=null):(p=Ur(y,N),p.subtreeFlags=y.subtreeFlags&14680064),b!==null?x=Ur(b,x):(x=Pi(x,A,f,null),x.flags|=2),x.return=a,p.return=a,p.sibling=x,a.child=p,p=x,x=a.child,A=o.child.memoizedState,A=A===null?nd(f):{baseLanes:A.baseLanes|f,cachePool:null,transitions:A.transitions},x.memoizedState=A,x.childLanes=o.childLanes&~f,a.memoizedState=td,p}return x=o.child,o=x.sibling,p=Ur(x,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=f),p.return=a,p.sibling=null,o!==null&&(f=a.deletions,f===null?(a.deletions=[o],a.flags|=16):f.push(o)),a.child=p,a.memoizedState=null,p}function rd(o,a){return a=Wa({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Da(o,a,f,p){return p!==null&&Rf(p),Cs(a,o.child,null,f),o=rd(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function HE(o,a,f,p,y,x,A){if(f)return a.flags&256?(a.flags&=-257,p=Jf(Error(n(422))),Da(o,a,A,p)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(x=p.fallback,y=a.mode,p=Wa({mode:"visible",children:p.children},y,0,null),x=Pi(x,y,A,null),x.flags|=2,p.return=a,x.return=a,p.sibling=x,a.child=p,(a.mode&1)!==0&&Cs(a,o.child,null,A),a.child.memoizedState=nd(A),a.memoizedState=td,x);if((a.mode&1)===0)return Da(o,a,A,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var b=p.dgst;return p=b,x=Error(n(419)),p=Jf(x,p,void 0),Da(o,a,A,p)}if(b=(A&o.childLanes)!==0,qt||b){if(p=gt,p!==null){switch(A&-A){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|A))!==0?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,or(o,y),On(p,o,y,-1))}return xd(),p=Jf(Error(n(421))),Da(o,a,A,p)}return y.data==="$?"?(a.flags|=128,a.child=o.child,a=nb.bind(null,o),y._reactRetry=a,null):(o=x.treeContext,sn=Dr(y.nextSibling),rn=a,He=!0,Nn=null,o!==null&&(fn[dn++]=ir,fn[dn++]=sr,fn[dn++]=Ai,ir=o.id,sr=o.overflow,Ai=a),a=rd(a,p.children),a.flags|=4096,a)}function e0(o,a,f){o.lanes|=a;var p=o.alternate;p!==null&&(p.lanes|=a),If(o.return,a,f)}function id(o,a,f,p,y){var x=o.memoizedState;x===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=f,x.tailMode=y)}function t0(o,a,f){var p=a.pendingProps,y=p.revealOrder,x=p.tail;if(jt(o,a,p.children,f),p=Qe.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&e0(o,f,a);else if(o.tag===19)e0(o,f,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(ze(Qe,p),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(f=a.child,y=null;f!==null;)o=f.alternate,o!==null&&Ca(o)===null&&(y=f),f=f.sibling;f=y,f===null?(y=a.child,a.child=null):(y=f.sibling,f.sibling=null),id(a,!1,y,f,x);break;case"backwards":for(f=null,y=a.child,a.child=null;y!==null;){if(o=y.alternate,o!==null&&Ca(o)===null){a.child=y;break}o=y.sibling,y.sibling=f,f=y,y=o}id(a,!0,f,null,x);break;case"together":id(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Pa(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function ar(o,a,f){if(o!==null&&(a.dependencies=o.dependencies),Mi|=a.lanes,(f&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(n(153));if(a.child!==null){for(o=a.child,f=Ur(o,o.pendingProps),a.child=f,f.return=a;o.sibling!==null;)o=o.sibling,f=f.sibling=Ur(o,o.pendingProps),f.return=a;f.sibling=null}return a.child}function WE(o,a,f){switch(a.tag){case 3:Jy(a),As();break;case 5:my(a);break;case 1:$t(a.type)&&pa(a);break;case 4:Ff(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;ze(Sa,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(ze(Qe,Qe.current&1),a.flags|=128,null):(f&a.child.childLanes)!==0?Zy(o,a,f):(ze(Qe,Qe.current&1),o=ar(o,a,f),o!==null?o.sibling:null);ze(Qe,Qe.current&1);break;case 19:if(p=(f&a.childLanes)!==0,(o.flags&128)!==0){if(p)return t0(o,a,f);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ze(Qe,Qe.current),p)break;return null;case 22:case 23:return a.lanes=0,$y(o,a,f)}return ar(o,a,f)}var n0,sd,r0,i0;n0=function(o,a){for(var f=a.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===a)break;for(;f.sibling===null;){if(f.return===null||f.return===a)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},sd=function(){},r0=function(o,a,f,p){var y=o.memoizedProps;if(y!==p){o=a.stateNode,bi(Hn.current);var x=null;switch(f){case"input":y=mi(o,y),p=mi(o,p),x=[];break;case"select":y=J({},y,{value:void 0}),p=J({},p,{value:void 0}),x=[];break;case"textarea":y=yi(o,y),p=yi(o,p),x=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=fa)}cn(f,p);var A;f=null;for(j in y)if(!p.hasOwnProperty(j)&&y.hasOwnProperty(j)&&y[j]!=null)if(j==="style"){var b=y[j];for(A in b)b.hasOwnProperty(A)&&(f||(f={}),f[A]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?x||(x=[]):(x=x||[]).push(j,null));for(j in p){var N=p[j];if(b=y?.[j],p.hasOwnProperty(j)&&N!==b&&(N!=null||b!=null))if(j==="style")if(b){for(A in b)!b.hasOwnProperty(A)||N&&N.hasOwnProperty(A)||(f||(f={}),f[A]="");for(A in N)N.hasOwnProperty(A)&&b[A]!==N[A]&&(f||(f={}),f[A]=N[A])}else f||(x||(x=[]),x.push(j,f)),f=N;else j==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,b=b?b.__html:void 0,N!=null&&b!==N&&(x=x||[]).push(j,N)):j==="children"?typeof N!="string"&&typeof N!="number"||(x=x||[]).push(j,""+N):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(i.hasOwnProperty(j)?(N!=null&&j==="onScroll"&&Ve("scroll",o),x||b===N||(x=[])):(x=x||[]).push(j,N))}f&&(x=x||[]).push("style",f);var j=x;(a.updateQueue=j)&&(a.flags|=4)}},i0=function(o,a,f,p){f!==p&&(a.flags|=4)};function Vo(o,a){if(!He)switch(o.tailMode){case"hidden":a=o.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Lt(o){var a=o.alternate!==null&&o.alternate.child===o.child,f=0,p=0;if(a)for(var y=o.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=f,a}function QE(o,a,f){var p=a.pendingProps;switch(Tf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return $t(a.type)&&ha(),Lt(a),null;case 3:return p=a.stateNode,Ts(),je(Kt),je(Ot),jf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(va(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Nn!==null&&(gd(Nn),Nn=null))),sd(o,a),Lt(a),null;case 5:zf(a);var y=bi(Io.current);if(f=a.type,o!==null&&a.stateNode!=null)r0(o,a,f,p,y),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(n(166));return Lt(a),null}if(o=bi(Hn.current),va(a)){p=a.stateNode,f=a.type;var x=a.memoizedProps;switch(p[Un]=a,p[No]=x,o=(a.mode&1)!==0,f){case"dialog":Ve("cancel",p),Ve("close",p);break;case"iframe":case"object":case"embed":Ve("load",p);break;case"video":case"audio":for(y=0;y<bo.length;y++)Ve(bo[y],p);break;case"source":Ve("error",p);break;case"img":case"image":case"link":Ve("error",p),Ve("load",p);break;case"details":Ve("toggle",p);break;case"input":gi(p,x),Ve("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},Ve("invalid",p);break;case"textarea":ls(p,x),Ve("invalid",p)}cn(f,x),y=null;for(var A in x)if(x.hasOwnProperty(A)){var b=x[A];A==="children"?typeof b=="string"?p.textContent!==b&&(x.suppressHydrationWarning!==!0&&ca(p.textContent,b,o),y=["children",b]):typeof b=="number"&&p.textContent!==""+b&&(x.suppressHydrationWarning!==!0&&ca(p.textContent,b,o),y=["children",""+b]):i.hasOwnProperty(A)&&b!=null&&A==="onScroll"&&Ve("scroll",p)}switch(f){case"input":wr(p),ss(p,x,!0);break;case"textarea":wr(p),vi(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=fa)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{A=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=us(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=A.createElement(f,{is:p.is}):(o=A.createElement(f),f==="select"&&(A=o,p.multiple?A.multiple=!0:p.size&&(A.size=p.size))):o=A.createElementNS(o,f),o[Un]=a,o[No]=p,n0(o,a,!1,!1),a.stateNode=o;e:{switch(A=Dt(f,p),f){case"dialog":Ve("cancel",o),Ve("close",o),y=p;break;case"iframe":case"object":case"embed":Ve("load",o),y=p;break;case"video":case"audio":for(y=0;y<bo.length;y++)Ve(bo[y],o);y=p;break;case"source":Ve("error",o),y=p;break;case"img":case"image":case"link":Ve("error",o),Ve("load",o),y=p;break;case"details":Ve("toggle",o),y=p;break;case"input":gi(o,p),y=mi(o,p),Ve("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=J({},p,{value:void 0}),Ve("invalid",o);break;case"textarea":ls(o,p),y=yi(o,p),Ve("invalid",o);break;default:y=p}cn(f,y),b=y;for(x in b)if(b.hasOwnProperty(x)){var N=b[x];x==="style"?Te(o,N):x==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&jn(o,N)):x==="children"?typeof N=="string"?(f!=="textarea"||N!=="")&&Y(o,N):typeof N=="number"&&Y(o,""+N):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?N!=null&&x==="onScroll"&&Ve("scroll",o):N!=null&&D(o,x,N,A))}switch(f){case"input":wr(o),ss(o,p,!1);break;case"textarea":wr(o),vi(o);break;case"option":p.value!=null&&o.setAttribute("value",""+be(p.value));break;case"select":o.multiple=!!p.multiple,x=p.value,x!=null?Vn(o,!!p.multiple,x,!1):p.defaultValue!=null&&Vn(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=fa)}switch(f){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Lt(a),null;case 6:if(o&&a.stateNode!=null)i0(o,a,o.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(n(166));if(f=bi(Io.current),bi(Hn.current),va(a)){if(p=a.stateNode,f=a.memoizedProps,p[Un]=a,(x=p.nodeValue!==f)&&(o=rn,o!==null))switch(o.tag){case 3:ca(p.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ca(p.nodeValue,f,(o.mode&1)!==0)}x&&(a.flags|=4)}else p=(f.nodeType===9?f:f.ownerDocument).createTextNode(p),p[Un]=a,a.stateNode=p}return Lt(a),null;case 13:if(je(Qe),p=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(He&&sn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)ly(),As(),a.flags|=98560,x=!1;else if(x=va(a),p!==null&&p.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Un]=a}else As(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),x=!1}else Nn!==null&&(gd(Nn),Nn=null),x=!0;if(!x)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=f,a):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(Qe.current&1)!==0?ft===0&&(ft=3):xd())),a.updateQueue!==null&&(a.flags|=4),Lt(a),null);case 4:return Ts(),sd(o,a),o===null&&To(a.stateNode.containerInfo),Lt(a),null;case 10:return Of(a.type._context),Lt(a),null;case 17:return $t(a.type)&&ha(),Lt(a),null;case 19:if(je(Qe),x=a.memoizedState,x===null)return Lt(a),null;if(p=(a.flags&128)!==0,A=x.rendering,A===null)if(p)Vo(x,!1);else{if(ft!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(A=Ca(o),A!==null){for(a.flags|=128,Vo(x,!1),p=A.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=f,f=a.child;f!==null;)x=f,o=p,x.flags&=14680066,A=x.alternate,A===null?(x.childLanes=0,x.lanes=o,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=A.childLanes,x.lanes=A.lanes,x.child=A.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=A.memoizedProps,x.memoizedState=A.memoizedState,x.updateQueue=A.updateQueue,x.type=A.type,o=A.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return ze(Qe,Qe.current&1|2),a.child}o=o.sibling}x.tail!==null&&et()>Ds&&(a.flags|=128,p=!0,Vo(x,!1),a.lanes=4194304)}else{if(!p)if(o=Ca(A),o!==null){if(a.flags|=128,p=!0,f=o.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),Vo(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!He)return Lt(a),null}else 2*et()-x.renderingStartTime>Ds&&f!==1073741824&&(a.flags|=128,p=!0,Vo(x,!1),a.lanes=4194304);x.isBackwards?(A.sibling=a.child,a.child=A):(f=x.last,f!==null?f.sibling=A:a.child=A,x.last=A)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=et(),a.sibling=null,f=Qe.current,ze(Qe,p?f&1|2:f&1),a):(Lt(a),null);case 22:case 23:return vd(),p=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(on&1073741824)!==0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function GE(o,a){switch(Tf(a),a.tag){case 1:return $t(a.type)&&ha(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Ts(),je(Kt),je(Ot),jf(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return zf(a),null;case 13:if(je(Qe),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(n(340));As()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return je(Qe),null;case 4:return Ts(),null;case 10:return Of(a.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var Oa=!1,Bt=!1,KE=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Ns(o,a){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(p){Ye(o,a,p)}else f.current=null}function od(o,a,f){try{f()}catch(p){Ye(o,a,p)}}var s0=!1;function $E(o,a){if(vf=Zl,o=Fg(),cf(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var A=0,b=-1,N=-1,j=0,H=0,Q=o,U=null;t:for(;;){for(var Z;Q!==f||y!==0&&Q.nodeType!==3||(b=A+y),Q!==x||p!==0&&Q.nodeType!==3||(N=A+p),Q.nodeType===3&&(A+=Q.nodeValue.length),(Z=Q.firstChild)!==null;)U=Q,Q=Z;for(;;){if(Q===o)break t;if(U===f&&++j===y&&(b=A),U===x&&++H===p&&(N=A),(Z=Q.nextSibling)!==null)break;Q=U,U=Q.parentNode}Q=Z}f=b===-1||N===-1?null:{start:b,end:N}}else f=null}f=f||{start:0,end:0}}else f=null;for(xf={focusedElem:o,selectionRange:f},Zl=!1,ne=a;ne!==null;)if(a=ne,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,ne=o;else for(;ne!==null;){a=ne;try{var re=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,tt=re.memoizedState,z=a.stateNode,O=z.getSnapshotBeforeUpdate(a.elementType===a.type?ie:Rn(a.type,ie),tt);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var V=a.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch($){Ye(a,a.return,$)}if(o=a.sibling,o!==null){o.return=a.return,ne=o;break}ne=a.return}return re=s0,s0=!1,re}function jo(o,a,f){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var x=y.destroy;y.destroy=void 0,x!==void 0&&od(a,f,x)}y=y.next}while(y!==p)}}function Ia(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var f=a=a.next;do{if((f.tag&o)===o){var p=f.create;f.destroy=p()}f=f.next}while(f!==a)}}function ld(o){var a=o.ref;if(a!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof a=="function"?a(o):a.current=o}}function o0(o){var a=o.alternate;a!==null&&(o.alternate=null,o0(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[Un],delete a[No],delete a[Af],delete a[RE],delete a[DE])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function l0(o){return o.tag===5||o.tag===3||o.tag===4}function a0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||l0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ad(o,a,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,a?f.nodeType===8?f.parentNode.insertBefore(o,a):f.insertBefore(o,a):(f.nodeType===8?(a=f.parentNode,a.insertBefore(o,f)):(a=f,a.appendChild(o)),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=fa));else if(p!==4&&(o=o.child,o!==null))for(ad(o,a,f),o=o.sibling;o!==null;)ad(o,a,f),o=o.sibling}function ud(o,a,f){var p=o.tag;if(p===5||p===6)o=o.stateNode,a?f.insertBefore(o,a):f.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(ud(o,a,f),o=o.sibling;o!==null;)ud(o,a,f),o=o.sibling}var Ct=null,Dn=!1;function Fr(o,a,f){for(f=f.child;f!==null;)u0(o,a,f),f=f.sibling}function u0(o,a,f){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Kl,f)}catch{}switch(f.tag){case 5:Bt||Ns(f,a);case 6:var p=Ct,y=Dn;Ct=null,Fr(o,a,f),Ct=p,Dn=y,Ct!==null&&(Dn?(o=Ct,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):Ct.removeChild(f.stateNode));break;case 18:Ct!==null&&(Dn?(o=Ct,f=f.stateNode,o.nodeType===8?kf(o.parentNode,f):o.nodeType===1&&kf(o,f),vo(o)):kf(Ct,f.stateNode));break;case 4:p=Ct,y=Dn,Ct=f.stateNode.containerInfo,Dn=!0,Fr(o,a,f),Ct=p,Dn=y;break;case 0:case 11:case 14:case 15:if(!Bt&&(p=f.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var x=y,A=x.destroy;x=x.tag,A!==void 0&&((x&2)!==0||(x&4)!==0)&&od(f,a,A),y=y.next}while(y!==p)}Fr(o,a,f);break;case 1:if(!Bt&&(Ns(f,a),p=f.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=f.memoizedProps,p.state=f.memoizedState,p.componentWillUnmount()}catch(b){Ye(f,a,b)}Fr(o,a,f);break;case 21:Fr(o,a,f);break;case 22:f.mode&1?(Bt=(p=Bt)||f.memoizedState!==null,Fr(o,a,f),Bt=p):Fr(o,a,f);break;default:Fr(o,a,f)}}function c0(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new KE),a.forEach(function(p){var y=rb.bind(null,o,p);f.has(p)||(f.add(p),p.then(y,y))})}}function Pn(o,a){var f=a.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];try{var x=o,A=a,b=A;e:for(;b!==null;){switch(b.tag){case 5:Ct=b.stateNode,Dn=!1;break e;case 3:Ct=b.stateNode.containerInfo,Dn=!0;break e;case 4:Ct=b.stateNode.containerInfo,Dn=!0;break e}b=b.return}if(Ct===null)throw Error(n(160));u0(x,A,y),Ct=null,Dn=!1;var N=y.alternate;N!==null&&(N.return=null),y.return=null}catch(j){Ye(y,a,j)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)f0(a,o),a=a.sibling}function f0(o,a){var f=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Pn(a,o),Qn(o),p&4){try{jo(3,o,o.return),Ia(3,o)}catch(ie){Ye(o,o.return,ie)}try{jo(5,o,o.return)}catch(ie){Ye(o,o.return,ie)}}break;case 1:Pn(a,o),Qn(o),p&512&&f!==null&&Ns(f,f.return);break;case 5:if(Pn(a,o),Qn(o),p&512&&f!==null&&Ns(f,f.return),o.flags&32){var y=o.stateNode;try{Y(y,"")}catch(ie){Ye(o,o.return,ie)}}if(p&4&&(y=o.stateNode,y!=null)){var x=o.memoizedProps,A=f!==null?f.memoizedProps:x,b=o.type,N=o.updateQueue;if(o.updateQueue=null,N!==null)try{b==="input"&&x.type==="radio"&&x.name!=null&&is(y,x),Dt(b,A);var j=Dt(b,x);for(A=0;A<N.length;A+=2){var H=N[A],Q=N[A+1];H==="style"?Te(y,Q):H==="dangerouslySetInnerHTML"?jn(y,Q):H==="children"?Y(y,Q):D(y,H,Q,j)}switch(b){case"input":kr(y,x);break;case"textarea":as(y,x);break;case"select":var U=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var Z=x.value;Z!=null?Vn(y,!!x.multiple,Z,!1):U!==!!x.multiple&&(x.defaultValue!=null?Vn(y,!!x.multiple,x.defaultValue,!0):Vn(y,!!x.multiple,x.multiple?[]:"",!1))}y[No]=x}catch(ie){Ye(o,o.return,ie)}}break;case 6:if(Pn(a,o),Qn(o),p&4){if(o.stateNode===null)throw Error(n(162));y=o.stateNode,x=o.memoizedProps;try{y.nodeValue=x}catch(ie){Ye(o,o.return,ie)}}break;case 3:if(Pn(a,o),Qn(o),p&4&&f!==null&&f.memoizedState.isDehydrated)try{vo(a.containerInfo)}catch(ie){Ye(o,o.return,ie)}break;case 4:Pn(a,o),Qn(o);break;case 13:Pn(a,o),Qn(o),y=o.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(dd=et())),p&4&&c0(o);break;case 22:if(H=f!==null&&f.memoizedState!==null,o.mode&1?(Bt=(j=Bt)||H,Pn(a,o),Bt=j):Pn(a,o),Qn(o),p&8192){if(j=o.memoizedState!==null,(o.stateNode.isHidden=j)&&!H&&(o.mode&1)!==0)for(ne=o,H=o.child;H!==null;){for(Q=ne=H;ne!==null;){switch(U=ne,Z=U.child,U.tag){case 0:case 11:case 14:case 15:jo(4,U,U.return);break;case 1:Ns(U,U.return);var re=U.stateNode;if(typeof re.componentWillUnmount=="function"){p=U,f=U.return;try{a=p,re.props=a.memoizedProps,re.state=a.memoizedState,re.componentWillUnmount()}catch(ie){Ye(p,f,ie)}}break;case 5:Ns(U,U.return);break;case 22:if(U.memoizedState!==null){p0(Q);continue}}Z!==null?(Z.return=U,ne=Z):p0(Q)}H=H.sibling}e:for(H=null,Q=o;;){if(Q.tag===5){if(H===null){H=Q;try{y=Q.stateNode,j?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(b=Q.stateNode,N=Q.memoizedProps.style,A=N!=null&&N.hasOwnProperty("display")?N.display:null,b.style.display=he("display",A))}catch(ie){Ye(o,o.return,ie)}}}else if(Q.tag===6){if(H===null)try{Q.stateNode.nodeValue=j?"":Q.memoizedProps}catch(ie){Ye(o,o.return,ie)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===o)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===o)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===o)break e;H===Q&&(H=null),Q=Q.return}H===Q&&(H=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Pn(a,o),Qn(o),p&4&&c0(o);break;case 21:break;default:Pn(a,o),Qn(o)}}function Qn(o){var a=o.flags;if(a&2){try{e:{for(var f=o.return;f!==null;){if(l0(f)){var p=f;break e}f=f.return}throw Error(n(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Y(y,""),p.flags&=-33);var x=a0(o);ud(o,x,y);break;case 3:case 4:var A=p.stateNode.containerInfo,b=a0(o);ad(o,b,A);break;default:throw Error(n(161))}}catch(N){Ye(o,o.return,N)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function qE(o,a,f){ne=o,d0(o)}function d0(o,a,f){for(var p=(o.mode&1)!==0;ne!==null;){var y=ne,x=y.child;if(y.tag===22&&p){var A=y.memoizedState!==null||Oa;if(!A){var b=y.alternate,N=b!==null&&b.memoizedState!==null||Bt;b=Oa;var j=Bt;if(Oa=A,(Bt=N)&&!j)for(ne=y;ne!==null;)A=ne,N=A.child,A.tag===22&&A.memoizedState!==null?m0(y):N!==null?(N.return=A,ne=N):m0(y);for(;x!==null;)ne=x,d0(x),x=x.sibling;ne=y,Oa=b,Bt=j}h0(o)}else(y.subtreeFlags&8772)!==0&&x!==null?(x.return=y,ne=x):h0(o)}}function h0(o){for(;ne!==null;){var a=ne;if((a.flags&8772)!==0){var f=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Bt||Ia(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Bt)if(f===null)p.componentDidMount();else{var y=a.elementType===a.type?f.memoizedProps:Rn(a.type,f.memoizedProps);p.componentDidUpdate(y,f.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&py(a,x,p);break;case 3:var A=a.updateQueue;if(A!==null){if(f=null,a.child!==null)switch(a.child.tag){case 5:f=a.child.stateNode;break;case 1:f=a.child.stateNode}py(a,A,f)}break;case 5:var b=a.stateNode;if(f===null&&a.flags&4){f=b;var N=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&f.focus();break;case"img":N.src&&(f.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var j=a.alternate;if(j!==null){var H=j.memoizedState;if(H!==null){var Q=H.dehydrated;Q!==null&&vo(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bt||a.flags&512&&ld(a)}catch(U){Ye(a,a.return,U)}}if(a===o){ne=null;break}if(f=a.sibling,f!==null){f.return=a.return,ne=f;break}ne=a.return}}function p0(o){for(;ne!==null;){var a=ne;if(a===o){ne=null;break}var f=a.sibling;if(f!==null){f.return=a.return,ne=f;break}ne=a.return}}function m0(o){for(;ne!==null;){var a=ne;try{switch(a.tag){case 0:case 11:case 15:var f=a.return;try{Ia(4,a)}catch(N){Ye(a,f,N)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch(N){Ye(a,y,N)}}var x=a.return;try{ld(a)}catch(N){Ye(a,x,N)}break;case 5:var A=a.return;try{ld(a)}catch(N){Ye(a,A,N)}}}catch(N){Ye(a,a.return,N)}if(a===o){ne=null;break}var b=a.sibling;if(b!==null){b.return=a.return,ne=b;break}ne=a.return}}var YE=Math.ceil,La=P.ReactCurrentDispatcher,cd=P.ReactCurrentOwner,mn=P.ReactCurrentBatchConfig,Me=0,gt=null,rt=null,Et=0,on=0,Rs=Pr(0),ft=0,_o=null,Mi=0,Ba=0,fd=0,Uo=null,Yt=null,dd=0,Ds=1/0,ur=null,Fa=!1,hd=null,zr=null,za=!1,Vr=null,Va=0,Ho=0,pd=null,ja=-1,_a=0;function _t(){return(Me&6)!==0?et():ja!==-1?ja:ja=et()}function jr(o){return(o.mode&1)===0?1:(Me&2)!==0&&Et!==0?Et&-Et:OE.transition!==null?(_a===0&&(_a=ag()),_a):(o=Oe,o!==0||(o=window.event,o=o===void 0?16:yg(o.type)),o)}function On(o,a,f,p){if(50<Ho)throw Ho=0,pd=null,Error(n(185));ho(o,f,p),((Me&2)===0||o!==gt)&&(o===gt&&((Me&2)===0&&(Ba|=f),ft===4&&_r(o,Et)),Jt(o,p),f===1&&Me===0&&(a.mode&1)===0&&(Ds=et()+500,ma&&Ir()))}function Jt(o,a){var f=o.callbackNode;OC(o,a);var p=Yl(o,o===gt?Et:0);if(p===0)f!==null&&sg(f),o.callbackNode=null,o.callbackPriority=0;else if(a=p&-p,o.callbackPriority!==a){if(f!=null&&sg(f),a===1)o.tag===0?PE(y0.bind(null,o)):ny(y0.bind(null,o)),ME(function(){(Me&6)===0&&Ir()}),f=null;else{switch(ug(p)){case 1:f=Gc;break;case 4:f=og;break;case 16:f=Gl;break;case 536870912:f=lg;break;default:f=Gl}f=E0(f,g0.bind(null,o))}o.callbackPriority=a,o.callbackNode=f}}function g0(o,a){if(ja=-1,_a=0,(Me&6)!==0)throw Error(n(327));var f=o.callbackNode;if(Ps()&&o.callbackNode!==f)return null;var p=Yl(o,o===gt?Et:0);if(p===0)return null;if((p&30)!==0||(p&o.expiredLanes)!==0||a)a=Ua(o,p);else{a=p;var y=Me;Me|=2;var x=x0();(gt!==o||Et!==a)&&(ur=null,Ds=et()+500,Ri(o,a));do try{ZE();break}catch(b){v0(o,b)}while(!0);Pf(),La.current=x,Me=y,rt!==null?a=0:(gt=null,Et=0,a=ft)}if(a!==0){if(a===2&&(y=Kc(o),y!==0&&(p=y,a=md(o,y))),a===1)throw f=_o,Ri(o,0),_r(o,p),Jt(o,et()),f;if(a===6)_r(o,p);else{if(y=o.current.alternate,(p&30)===0&&!JE(y)&&(a=Ua(o,p),a===2&&(x=Kc(o),x!==0&&(p=x,a=md(o,x))),a===1))throw f=_o,Ri(o,0),_r(o,p),Jt(o,et()),f;switch(o.finishedWork=y,o.finishedLanes=p,a){case 0:case 1:throw Error(n(345));case 2:Di(o,Yt,ur);break;case 3:if(_r(o,p),(p&130023424)===p&&(a=dd+500-et(),10<a)){if(Yl(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){_t(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=wf(Di.bind(null,o,Yt,ur),a);break}Di(o,Yt,ur);break;case 4:if(_r(o,p),(p&4194240)===p)break;for(a=o.eventTimes,y=-1;0<p;){var A=31-Tn(p);x=1<<A,A=a[A],A>y&&(y=A),p&=~x}if(p=y,p=et()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*YE(p/1960))-p,10<p){o.timeoutHandle=wf(Di.bind(null,o,Yt,ur),p);break}Di(o,Yt,ur);break;case 5:Di(o,Yt,ur);break;default:throw Error(n(329))}}}return Jt(o,et()),o.callbackNode===f?g0.bind(null,o):null}function md(o,a){var f=Uo;return o.current.memoizedState.isDehydrated&&(Ri(o,a).flags|=256),o=Ua(o,a),o!==2&&(a=Yt,Yt=f,a!==null&&gd(a)),o}function gd(o){Yt===null?Yt=o:Yt.push.apply(Yt,o)}function JE(o){for(var a=o;;){if(a.flags&16384){var f=a.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var p=0;p<f.length;p++){var y=f[p],x=y.getSnapshot;y=y.value;try{if(!Mn(x(),y))return!1}catch{return!1}}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _r(o,a){for(a&=~fd,a&=~Ba,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var f=31-Tn(a),p=1<<f;o[f]=-1,a&=~p}}function y0(o){if((Me&6)!==0)throw Error(n(327));Ps();var a=Yl(o,0);if((a&1)===0)return Jt(o,et()),null;var f=Ua(o,a);if(o.tag!==0&&f===2){var p=Kc(o);p!==0&&(a=p,f=md(o,p))}if(f===1)throw f=_o,Ri(o,0),_r(o,a),Jt(o,et()),f;if(f===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,Di(o,Yt,ur),Jt(o,et()),null}function yd(o,a){var f=Me;Me|=1;try{return o(a)}finally{Me=f,Me===0&&(Ds=et()+500,ma&&Ir())}}function Ni(o){Vr!==null&&Vr.tag===0&&(Me&6)===0&&Ps();var a=Me;Me|=1;var f=mn.transition,p=Oe;try{if(mn.transition=null,Oe=1,o)return o()}finally{Oe=p,mn.transition=f,Me=a,(Me&6)===0&&Ir()}}function vd(){on=Rs.current,je(Rs)}function Ri(o,a){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,TE(f)),rt!==null)for(f=rt.return;f!==null;){var p=f;switch(Tf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ha();break;case 3:Ts(),je(Kt),je(Ot),jf();break;case 5:zf(p);break;case 4:Ts();break;case 13:je(Qe);break;case 19:je(Qe);break;case 10:Of(p.type._context);break;case 22:case 23:vd()}f=f.return}if(gt=o,rt=o=Ur(o.current,null),Et=on=a,ft=0,_o=null,fd=Ba=Mi=0,Yt=Uo=null,Ei!==null){for(a=0;a<Ei.length;a++)if(f=Ei[a],p=f.interleaved,p!==null){f.interleaved=null;var y=p.next,x=f.pending;if(x!==null){var A=x.next;x.next=y,p.next=A}f.pending=p}Ei=null}return o}function v0(o,a){do{var f=rt;try{if(Pf(),Ea.current=Na,ba){for(var p=Ge.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}ba=!1}if(Ti=0,mt=ct=Ge=null,Lo=!1,Bo=0,cd.current=null,f===null||f.return===null){ft=1,_o=a,rt=null;break}e:{var x=o,A=f.return,b=f,N=a;if(a=Et,b.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var j=N,H=b,Q=H.tag;if((H.mode&1)===0&&(Q===0||Q===11||Q===15)){var U=H.alternate;U?(H.updateQueue=U.updateQueue,H.memoizedState=U.memoizedState,H.lanes=U.lanes):(H.updateQueue=null,H.memoizedState=null)}var Z=Hy(A);if(Z!==null){Z.flags&=-257,Wy(Z,A,b,x,a),Z.mode&1&&Uy(x,j,a),a=Z,N=j;var re=a.updateQueue;if(re===null){var ie=new Set;ie.add(N),a.updateQueue=ie}else re.add(N);break e}else{if((a&1)===0){Uy(x,j,a),xd();break e}N=Error(n(426))}}else if(He&&b.mode&1){var tt=Hy(A);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),Wy(tt,A,b,x,a),Rf(Ms(N,b));break e}}x=N=Ms(N,b),ft!==4&&(ft=2),Uo===null?Uo=[x]:Uo.push(x),x=A;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var z=jy(x,N,a);hy(x,z);break e;case 1:b=N;var O=x.type,V=x.stateNode;if((x.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(zr===null||!zr.has(V)))){x.flags|=65536,a&=-a,x.lanes|=a;var $=_y(x,b,a);hy(x,$);break e}}x=x.return}while(x!==null)}w0(f)}catch(oe){a=oe,rt===f&&f!==null&&(rt=f=f.return);continue}break}while(!0)}function x0(){var o=La.current;return La.current=Na,o===null?Na:o}function xd(){(ft===0||ft===3||ft===2)&&(ft=4),gt===null||(Mi&268435455)===0&&(Ba&268435455)===0||_r(gt,Et)}function Ua(o,a){var f=Me;Me|=2;var p=x0();(gt!==o||Et!==a)&&(ur=null,Ri(o,a));do try{XE();break}catch(y){v0(o,y)}while(!0);if(Pf(),Me=f,La.current=p,rt!==null)throw Error(n(261));return gt=null,Et=0,ft}function XE(){for(;rt!==null;)S0(rt)}function ZE(){for(;rt!==null&&!CC();)S0(rt)}function S0(o){var a=C0(o.alternate,o,on);o.memoizedProps=o.pendingProps,a===null?w0(o):rt=a,cd.current=null}function w0(o){var a=o;do{var f=a.alternate;if(o=a.return,(a.flags&32768)===0){if(f=QE(f,a,on),f!==null){rt=f;return}}else{if(f=GE(f,a),f!==null){f.flags&=32767,rt=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{ft=6,rt=null;return}}if(a=a.sibling,a!==null){rt=a;return}rt=a=o}while(a!==null);ft===0&&(ft=5)}function Di(o,a,f){var p=Oe,y=mn.transition;try{mn.transition=null,Oe=1,eb(o,a,f,p)}finally{mn.transition=y,Oe=p}return null}function eb(o,a,f,p){do Ps();while(Vr!==null);if((Me&6)!==0)throw Error(n(327));f=o.finishedWork;var y=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var x=f.lanes|f.childLanes;if(IC(o,x),o===gt&&(rt=gt=null,Et=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||za||(za=!0,E0(Gl,function(){return Ps(),null})),x=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||x){x=mn.transition,mn.transition=null;var A=Oe;Oe=1;var b=Me;Me|=4,cd.current=null,$E(o,f),f0(f,o),SE(xf),Zl=!!vf,xf=vf=null,o.current=f,qE(f),EC(),Me=b,Oe=A,mn.transition=x}else o.current=f;if(za&&(za=!1,Vr=o,Va=y),x=o.pendingLanes,x===0&&(zr=null),MC(f.stateNode),Jt(o,et()),a!==null)for(p=o.onRecoverableError,f=0;f<a.length;f++)y=a[f],p(y.value,{componentStack:y.stack,digest:y.digest});if(Fa)throw Fa=!1,o=hd,hd=null,o;return(Va&1)!==0&&o.tag!==0&&Ps(),x=o.pendingLanes,(x&1)!==0?o===pd?Ho++:(Ho=0,pd=o):Ho=0,Ir(),null}function Ps(){if(Vr!==null){var o=ug(Va),a=mn.transition,f=Oe;try{if(mn.transition=null,Oe=16>o?16:o,Vr===null)var p=!1;else{if(o=Vr,Vr=null,Va=0,(Me&6)!==0)throw Error(n(331));var y=Me;for(Me|=4,ne=o.current;ne!==null;){var x=ne,A=x.child;if((ne.flags&16)!==0){var b=x.deletions;if(b!==null){for(var N=0;N<b.length;N++){var j=b[N];for(ne=j;ne!==null;){var H=ne;switch(H.tag){case 0:case 11:case 15:jo(8,H,x)}var Q=H.child;if(Q!==null)Q.return=H,ne=Q;else for(;ne!==null;){H=ne;var U=H.sibling,Z=H.return;if(o0(H),H===j){ne=null;break}if(U!==null){U.return=Z,ne=U;break}ne=Z}}}var re=x.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var tt=ie.sibling;ie.sibling=null,ie=tt}while(ie!==null)}}ne=x}}if((x.subtreeFlags&2064)!==0&&A!==null)A.return=x,ne=A;else e:for(;ne!==null;){if(x=ne,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:jo(9,x,x.return)}var z=x.sibling;if(z!==null){z.return=x.return,ne=z;break e}ne=x.return}}var O=o.current;for(ne=O;ne!==null;){A=ne;var V=A.child;if((A.subtreeFlags&2064)!==0&&V!==null)V.return=A,ne=V;else e:for(A=O;ne!==null;){if(b=ne,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Ia(9,b)}}catch(oe){Ye(b,b.return,oe)}if(b===A){ne=null;break e}var $=b.sibling;if($!==null){$.return=b.return,ne=$;break e}ne=b.return}}if(Me=y,Ir(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Kl,o)}catch{}p=!0}return p}finally{Oe=f,mn.transition=a}}return!1}function k0(o,a,f){a=Ms(f,a),a=jy(o,a,1),o=Br(o,a,1),a=_t(),o!==null&&(ho(o,1,a),Jt(o,a))}function Ye(o,a,f){if(o.tag===3)k0(o,o,f);else for(;a!==null;){if(a.tag===3){k0(a,o,f);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(zr===null||!zr.has(p))){o=Ms(f,o),o=_y(a,o,1),a=Br(a,o,1),o=_t(),a!==null&&(ho(a,1,o),Jt(a,o));break}}a=a.return}}function tb(o,a,f){var p=o.pingCache;p!==null&&p.delete(a),a=_t(),o.pingedLanes|=o.suspendedLanes&f,gt===o&&(Et&f)===f&&(ft===4||ft===3&&(Et&130023424)===Et&&500>et()-dd?Ri(o,0):fd|=f),Jt(o,a)}function A0(o,a){a===0&&((o.mode&1)===0?a=1:(a=ql,ql<<=1,(ql&130023424)===0&&(ql=4194304)));var f=_t();o=or(o,a),o!==null&&(ho(o,a,f),Jt(o,f))}function nb(o){var a=o.memoizedState,f=0;a!==null&&(f=a.retryLane),A0(o,f)}function rb(o,a){var f=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(a),A0(o,f)}var C0;C0=function(o,a,f){if(o!==null)if(o.memoizedProps!==a.pendingProps||Kt.current)qt=!0;else{if((o.lanes&f)===0&&(a.flags&128)===0)return qt=!1,WE(o,a,f);qt=(o.flags&131072)!==0}else qt=!1,He&&(a.flags&1048576)!==0&&ry(a,ya,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Pa(o,a),o=a.pendingProps;var y=Ss(a,Ot.current);bs(a,f),y=Hf(null,a,p,o,y,f);var x=Wf();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,$t(p)?(x=!0,pa(a)):x=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Bf(a),y.updater=Ra,a.stateNode=y,y._reactInternals=a,Yf(a,p,o,f),a=ed(null,a,p,!0,x,f)):(a.tag=0,He&&x&&bf(a),jt(null,a,y,f),a=a.child),a;case 16:p=a.elementType;e:{switch(Pa(o,a),o=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=sb(p),o=Rn(p,o),y){case 0:a=Zf(null,a,p,o,f);break e;case 1:a=Yy(null,a,p,o,f);break e;case 11:a=Qy(null,a,p,o,f);break e;case 14:a=Gy(null,a,p,Rn(p.type,o),f);break e}throw Error(n(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Rn(p,y),Zf(o,a,p,y,f);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Rn(p,y),Yy(o,a,p,y,f);case 3:e:{if(Jy(a),o===null)throw Error(n(387));p=a.pendingProps,x=a.memoizedState,y=x.element,dy(o,a),Aa(a,p,null,f);var A=a.memoizedState;if(p=A.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){y=Ms(Error(n(423)),a),a=Xy(o,a,p,f,y);break e}else if(p!==y){y=Ms(Error(n(424)),a),a=Xy(o,a,p,f,y);break e}else for(sn=Dr(a.stateNode.containerInfo.firstChild),rn=a,He=!0,Nn=null,f=cy(a,null,p,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(As(),p===y){a=ar(o,a,f);break e}jt(o,a,p,f)}a=a.child}return a;case 5:return my(a),o===null&&Nf(a),p=a.type,y=a.pendingProps,x=o!==null?o.memoizedProps:null,A=y.children,Sf(p,y)?A=null:x!==null&&Sf(p,x)&&(a.flags|=32),qy(o,a),jt(o,a,A,f),a.child;case 6:return o===null&&Nf(a),null;case 13:return Zy(o,a,f);case 4:return Ff(a,a.stateNode.containerInfo),p=a.pendingProps,o===null?a.child=Cs(a,null,p,f):jt(o,a,p,f),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Rn(p,y),Qy(o,a,p,y,f);case 7:return jt(o,a,a.pendingProps,f),a.child;case 8:return jt(o,a,a.pendingProps.children,f),a.child;case 12:return jt(o,a,a.pendingProps.children,f),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,x=a.memoizedProps,A=y.value,ze(Sa,p._currentValue),p._currentValue=A,x!==null)if(Mn(x.value,A)){if(x.children===y.children&&!Kt.current){a=ar(o,a,f);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var b=x.dependencies;if(b!==null){A=x.child;for(var N=b.firstContext;N!==null;){if(N.context===p){if(x.tag===1){N=lr(-1,f&-f),N.tag=2;var j=x.updateQueue;if(j!==null){j=j.shared;var H=j.pending;H===null?N.next=N:(N.next=H.next,H.next=N),j.pending=N}}x.lanes|=f,N=x.alternate,N!==null&&(N.lanes|=f),If(x.return,f,a),b.lanes|=f;break}N=N.next}}else if(x.tag===10)A=x.type===a.type?null:x.child;else if(x.tag===18){if(A=x.return,A===null)throw Error(n(341));A.lanes|=f,b=A.alternate,b!==null&&(b.lanes|=f),If(A,f,a),A=x.sibling}else A=x.child;if(A!==null)A.return=x;else for(A=x;A!==null;){if(A===a){A=null;break}if(x=A.sibling,x!==null){x.return=A.return,A=x;break}A=A.return}x=A}jt(o,a,y.children,f),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,bs(a,f),y=hn(y),p=p(y),a.flags|=1,jt(o,a,p,f),a.child;case 14:return p=a.type,y=Rn(p,a.pendingProps),y=Rn(p.type,y),Gy(o,a,p,y,f);case 15:return Ky(o,a,a.type,a.pendingProps,f);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:Rn(p,y),Pa(o,a),a.tag=1,$t(p)?(o=!0,pa(a)):o=!1,bs(a,f),zy(a,p,y),Yf(a,p,y,f),ed(null,a,p,!0,o,f);case 19:return t0(o,a,f);case 22:return $y(o,a,f)}throw Error(n(156,a.tag))};function E0(o,a){return ig(o,a)}function ib(o,a,f,p){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(o,a,f,p){return new ib(o,a,f,p)}function Sd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function sb(o){if(typeof o=="function")return Sd(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ke)return 11;if(o===Ae)return 14}return 2}function Ur(o,a){var f=o.alternate;return f===null?(f=gn(o.tag,a,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=a,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,a=o.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function Ha(o,a,f,p,y,x){var A=2;if(p=o,typeof o=="function")Sd(o)&&(A=1);else if(typeof o=="string")A=5;else e:switch(o){case I:return Pi(f.children,y,x,a);case B:A=8,y|=8;break;case X:return o=gn(12,f,a,y|2),o.elementType=X,o.lanes=x,o;case Ne:return o=gn(13,f,a,y),o.elementType=Ne,o.lanes=x,o;case xe:return o=gn(19,f,a,y),o.elementType=xe,o.lanes=x,o;case se:return Wa(f,y,x,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ue:A=10;break e;case Ee:A=9;break e;case ke:A=11;break e;case Ae:A=14;break e;case De:A=16,p=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return a=gn(A,f,a,y),a.elementType=o,a.type=p,a.lanes=x,a}function Pi(o,a,f,p){return o=gn(7,o,p,a),o.lanes=f,o}function Wa(o,a,f,p){return o=gn(22,o,p,a),o.elementType=se,o.lanes=f,o.stateNode={isHidden:!1},o}function wd(o,a,f){return o=gn(6,o,null,a),o.lanes=f,o}function kd(o,a,f){return a=gn(4,o.children!==null?o.children:[],o.key,a),a.lanes=f,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function ob(o,a,f,p,y){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$c(0),this.expirationTimes=$c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$c(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Ad(o,a,f,p,y,x,A,b,N){return o=new ob(o,a,f,b,N),a===1?(a=1,x===!0&&(a|=8)):a=0,x=gn(3,null,null,a),o.current=x,x.stateNode=o,x.memoizedState={element:p,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bf(x),o}function lb(o,a,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:p==null?null:""+p,children:o,containerInfo:a,implementation:f}}function b0(o){if(!o)return Or;o=o._reactInternals;e:{if(Si(o)!==o||o.tag!==1)throw Error(n(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if($t(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(o.tag===1){var f=o.type;if($t(f))return ey(o,f,a)}return a}function T0(o,a,f,p,y,x,A,b,N){return o=Ad(f,p,!0,o,y,x,A,b,N),o.context=b0(null),f=o.current,p=_t(),y=jr(f),x=lr(p,y),x.callback=a??null,Br(f,x,y),o.current.lanes=y,ho(o,y,p),Jt(o,p),o}function Qa(o,a,f,p){var y=a.current,x=_t(),A=jr(y);return f=b0(f),a.context===null?a.context=f:a.pendingContext=f,a=lr(x,A),a.payload={element:o},p=p===void 0?null:p,p!==null&&(a.callback=p),o=Br(y,a,A),o!==null&&(On(o,y,A,x),ka(o,y,A)),A}function Ga(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function M0(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<a?f:a}}function Cd(o,a){M0(o,a),(o=o.alternate)&&M0(o,a)}function ab(){return null}var N0=typeof reportError=="function"?reportError:function(o){console.error(o)};function Ed(o){this._internalRoot=o}Ka.prototype.render=Ed.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(n(409));Qa(o,a,null,null)},Ka.prototype.unmount=Ed.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;Ni(function(){Qa(null,o,null,null)}),a[nr]=null}};function Ka(o){this._internalRoot=o}Ka.prototype.unstable_scheduleHydration=function(o){if(o){var a=dg();o={blockedOn:null,target:o,priority:a};for(var f=0;f<Mr.length&&a!==0&&a<Mr[f].priority;f++);Mr.splice(f,0,o),f===0&&mg(o)}};function bd(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function $a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function R0(){}function ub(o,a,f,p,y){if(y){if(typeof p=="function"){var x=p;p=function(){var j=Ga(A);x.call(j)}}var A=T0(a,p,o,0,null,!1,!1,"",R0);return o._reactRootContainer=A,o[nr]=A.current,To(o.nodeType===8?o.parentNode:o),Ni(),A}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var b=p;p=function(){var j=Ga(N);b.call(j)}}var N=Ad(o,0,!1,null,null,!1,!1,"",R0);return o._reactRootContainer=N,o[nr]=N.current,To(o.nodeType===8?o.parentNode:o),Ni(function(){Qa(a,N,f,p)}),N}function qa(o,a,f,p,y){var x=f._reactRootContainer;if(x){var A=x;if(typeof y=="function"){var b=y;y=function(){var N=Ga(A);b.call(N)}}Qa(a,A,o,y)}else A=ub(f,a,o,y,p);return Ga(A)}cg=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var f=fo(a.pendingLanes);f!==0&&(qc(a,f|1),Jt(a,et()),(Me&6)===0&&(Ds=et()+500,Ir()))}break;case 13:Ni(function(){var p=or(o,1);if(p!==null){var y=_t();On(p,o,1,y)}}),Cd(o,1)}},Yc=function(o){if(o.tag===13){var a=or(o,134217728);if(a!==null){var f=_t();On(a,o,134217728,f)}Cd(o,134217728)}},fg=function(o){if(o.tag===13){var a=jr(o),f=or(o,a);if(f!==null){var p=_t();On(f,o,a,p)}Cd(o,a)}},dg=function(){return Oe},hg=function(o,a){var f=Oe;try{return Oe=o,a()}finally{Oe=f}},ut=function(o,a,f){switch(a){case"input":if(kr(o,f),a=f.name,f.type==="radio"&&a!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<f.length;a++){var p=f[a];if(p!==o&&p.form===o.form){var y=da(p);if(!y)throw Error(n(90));rs(p),kr(p,y)}}}break;case"textarea":as(o,f);break;case"select":a=f.value,a!=null&&Vn(o,!!f.multiple,a,!1)}},Jm=yd,Xm=Ni;var cb={usingClientEntryPoint:!1,Events:[Ro,vs,da,qm,Ym,yd]},Wo={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fb={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ng(o),o===null?null:o.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Kl=Ya.inject(fb),_n=Ya}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cb,Xt.createPortal=function(o,a){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bd(a))throw Error(n(200));return lb(o,a,null,f)},Xt.createRoot=function(o,a){if(!bd(o))throw Error(n(299));var f=!1,p="",y=N0;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Ad(o,1,!1,null,null,f,!1,p,y),o[nr]=a.current,To(o.nodeType===8?o.parentNode:o),new Ed(a)},Xt.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=ng(a),o=o===null?null:o.stateNode,o},Xt.flushSync=function(o){return Ni(o)},Xt.hydrate=function(o,a,f){if(!$a(a))throw Error(n(200));return qa(null,o,a,!0,f)},Xt.hydrateRoot=function(o,a,f){if(!bd(o))throw Error(n(405));var p=f!=null&&f.hydratedSources||null,y=!1,x="",A=N0;if(f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onRecoverableError!==void 0&&(A=f.onRecoverableError)),a=T0(a,null,o,1,f??null,y,!1,x,A),o[nr]=a.current,To(o),p)for(o=0;o<p.length;o++)f=p[o],y=f._getVersion,y=y(f._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[f,y]:a.mutableSourceEagerHydrationData.push(f,y);return new Ka(a)},Xt.render=function(o,a,f){if(!$a(a))throw Error(n(200));return qa(null,o,a,!1,f)},Xt.unmountComponentAtNode=function(o){if(!$a(o))throw Error(n(40));return o._reactRootContainer?(Ni(function(){qa(null,null,o,!1,function(){o._reactRootContainer=null,o[nr]=null})}),!0):!1},Xt.unstable_batchedUpdates=yd,Xt.unstable_renderSubtreeIntoContainer=function(o,a,f,p){if(!$a(f))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return qa(o,a,f,!1,p)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var z0;function H1(){if(z0)return Nd.exports;z0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Nd.exports=vb(),Nd.exports}var V0;function xb(){if(V0)return Ja;V0=1;var t=H1();return Ja.createRoot=t.createRoot,Ja.hydrateRoot=t.hydrateRoot,Ja}var Sb=xb(),F=Ll();const zn=Mp(F),Np=F.createContext({});function Rp(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const W1=typeof window<"u",Q1=W1?F.useLayoutEffect:F.useEffect,Cc=F.createContext(null);function Dp(t,e){t.indexOf(e)===-1&&t.push(e)}function Pp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Jn=(t,e,n)=>n>e?e:n<t?t:n;let Op=()=>{};const xr={},G1=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function K1(t){return typeof t=="object"&&t!==null}const $1=t=>/^0[^.\s]+$/u.test(t);function Ip(t){let e;return()=>(e===void 0&&(e=t()),e)}const An=t=>t,wb=(t,e)=>n=>e(t(n)),Bl=(...t)=>t.reduce(wb),xl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Lp{constructor(){this.subscriptions=[]}add(e){return Dp(this.subscriptions,e),()=>Pp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const l=this.subscriptions[s];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gr=t=>t*1e3,kn=t=>t/1e3;function q1(t,e){return e?t*(1e3/e):0}const Y1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kb=1e-7,Ab=12;function Cb(t,e,n,r,i){let s,l,u=0;do l=e+(n-e)/2,s=Y1(l,r,i)-t,s>0?n=l:e=l;while(Math.abs(s)>kb&&++u<Ab);return l}function Fl(t,e,n,r){if(t===e&&n===r)return An;const i=s=>Cb(s,0,1,t,n);return s=>s===0||s===1?s:Y1(i(s),e,r)}const J1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,X1=t=>e=>1-t(1-e),Z1=Fl(.33,1.53,.69,.99),Bp=X1(Z1),eS=J1(Bp),tS=t=>(t*=2)<1?.5*Bp(t):.5*(2-Math.pow(2,-10*(t-1))),Fp=t=>1-Math.sin(Math.acos(t)),nS=X1(Fp),rS=J1(Fp),Eb=Fl(.42,0,1,1),bb=Fl(0,0,.58,1),iS=Fl(.42,0,.58,1),Tb=t=>Array.isArray(t)&&typeof t[0]!="number",sS=t=>Array.isArray(t)&&typeof t[0]=="number",Mb={linear:An,easeIn:Eb,easeInOut:iS,easeOut:bb,circIn:Fp,circInOut:rS,circOut:nS,backIn:Bp,backInOut:eS,backOut:Z1,anticipate:tS},Nb=t=>typeof t=="string",j0=t=>{if(sS(t)){Op(t.length===4);const[e,n,r,i]=t;return Fl(e,n,r,i)}else if(Nb(t))return Mb[t];return t},Xa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Rb(t,e){let n=new Set,r=new Set,i=!1,s=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function c(h){l.has(h)&&(d.schedule(h),t()),h(u)}const d={schedule:(h,m=!1,g=!1)=>{const S=g&&i?n:r;return m&&l.add(h),S.has(h)||S.add(h),h},cancel:h=>{r.delete(h),l.delete(h)},process:h=>{if(u=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const Db=40;function oS(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,l=Xa.reduce((D,P)=>(D[P]=Rb(s),D),{}),{setup:u,read:c,resolveKeyframes:d,preUpdate:h,update:m,preRender:g,render:v,postRender:S}=l,k=()=>{const D=xr.useManualTiming?i.timestamp:performance.now();n=!1,xr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(D-i.timestamp,Db),1)),i.timestamp=D,i.isProcessing=!0,u.process(i),c.process(i),d.process(i),h.process(i),m.process(i),g.process(i),v.process(i),S.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(k))},w=()=>{n=!0,r=!0,i.isProcessing||t(k)};return{schedule:Xa.reduce((D,P)=>{const R=l[P];return D[P]=(M,I=!1,B=!1)=>(n||w(),R.schedule(M,I,B)),D},{}),cancel:D=>{for(let P=0;P<Xa.length;P++)l[Xa[P]].cancel(D)},state:i,steps:l}}const{schedule:Ue,cancel:oi,state:Tt,steps:Pd}=oS(typeof requestAnimationFrame<"u"?requestAnimationFrame:An,!0);let vu;function Pb(){vu=void 0}const Ut={now:()=>(vu===void 0&&Ut.set(Tt.isProcessing||xr.useManualTiming?Tt.timestamp:performance.now()),vu),set:t=>{vu=t,queueMicrotask(Pb)}},lS=t=>e=>typeof e=="string"&&e.startsWith(t),aS=lS("--"),Ob=lS("var(--"),zp=t=>Ob(t)?Ib.test(t.split("/*")[0].trim()):!1,Ib=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function _0(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const ro={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sl={...ro,transform:t=>Jn(0,1,t)},Za={...ro,default:1},il=t=>Math.round(t*1e5)/1e5,Vp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Lb(t){return t==null}const Bb=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jp=(t,e)=>n=>!!(typeof n=="string"&&Bb.test(n)&&n.startsWith(t)||e&&!Lb(n)&&Object.prototype.hasOwnProperty.call(n,e)),uS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,l,u]=r.match(Vp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Fb=t=>Jn(0,255,t),Od={...ro,transform:t=>Math.round(Fb(t))},Fi={test:jp("rgb","red"),parse:uS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Od.transform(t)+", "+Od.transform(e)+", "+Od.transform(n)+", "+il(Sl.transform(r))+")"};function zb(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Mh={test:jp("#"),parse:zb,transform:Fi.transform},zl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qr=zl("deg"),Yn=zl("%"),te=zl("px"),Vb=zl("vh"),jb=zl("vw"),U0={...Yn,parse:t=>Yn.parse(t)/100,transform:t=>Yn.transform(t*100)},_s={test:jp("hsl","hue"),parse:uS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Yn.transform(il(e))+", "+Yn.transform(il(n))+", "+il(Sl.transform(r))+")"},it={test:t=>Fi.test(t)||Mh.test(t)||_s.test(t),parse:t=>Fi.test(t)?Fi.parse(t):_s.test(t)?_s.parse(t):Mh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fi.transform(t):_s.transform(t),getAnimatableNone:t=>{const e=it.parse(t);return e.alpha=0,it.transform(e)}},_b=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ub(t){return isNaN(t)&&typeof t=="string"&&(t.match(Vp)?.length||0)+(t.match(_b)?.length||0)>0}const cS="number",fS="color",Hb="var",Wb="var(",H0="${}",Qb=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const u=e.replace(Qb,c=>(it.test(c)?(r.color.push(s),i.push(fS),n.push(it.parse(c))):c.startsWith(Wb)?(r.var.push(s),i.push(Hb),n.push(c)):(r.number.push(s),i.push(cS),n.push(parseFloat(c))),++s,H0)).split(H0);return{values:n,split:u,indexes:r,types:i}}function dS(t){return wl(t).values}function hS(t){const{split:e,types:n}=wl(t),r=e.length;return i=>{let s="";for(let l=0;l<r;l++)if(s+=e[l],i[l]!==void 0){const u=n[l];u===cS?s+=il(i[l]):u===fS?s+=it.transform(i[l]):s+=i[l]}return s}}const Gb=t=>typeof t=="number"?0:it.test(t)?it.getAnimatableNone(t):t;function Kb(t){const e=dS(t);return hS(t)(e.map(Gb))}const li={test:Ub,parse:dS,createTransformer:hS,getAnimatableNone:Kb};function Id(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $b({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,l=0;if(!e)i=s=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;i=Id(c,u,t+1/3),s=Id(c,u,t),l=Id(c,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(l*255),alpha:r}}function Tu(t,e){return n=>n>0?e:t}const $e=(t,e,n)=>t+(e-t)*n,Ld=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},qb=[Mh,Fi,_s],Yb=t=>qb.find(e=>e.test(t));function W0(t){const e=Yb(t);if(!e)return!1;let n=e.parse(t);return e===_s&&(n=$b(n)),n}const Q0=(t,e)=>{const n=W0(t),r=W0(e);if(!n||!r)return Tu(t,e);const i={...n};return s=>(i.red=Ld(n.red,r.red,s),i.green=Ld(n.green,r.green,s),i.blue=Ld(n.blue,r.blue,s),i.alpha=$e(n.alpha,r.alpha,s),Fi.transform(i))},Nh=new Set(["none","hidden"]);function Jb(t,e){return Nh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Xb(t,e){return n=>$e(t,e,n)}function _p(t){return typeof t=="number"?Xb:typeof t=="string"?zp(t)?Tu:it.test(t)?Q0:tT:Array.isArray(t)?pS:typeof t=="object"?it.test(t)?Q0:Zb:Tu}function pS(t,e){const n=[...t],r=n.length,i=t.map((s,l)=>_p(s)(s,e[l]));return s=>{for(let l=0;l<r;l++)n[l]=i[l](s);return n}}function Zb(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=_p(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function eT(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],l=t.indexes[s][r[s]],u=t.values[l]??0;n[i]=u,r[s]++}return n}const tT=(t,e)=>{const n=li.createTransformer(e),r=wl(t),i=wl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Nh.has(t)&&!i.values.length||Nh.has(e)&&!r.values.length?Jb(t,e):Bl(pS(eT(r,i),i.values),n):Tu(t,e)};function mS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$e(t,e,n):_p(t)(t,e)}const nT=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ue.update(e,n),stop:()=>oi(e),now:()=>Tt.isProcessing?Tt.timestamp:Ut.now()}},gS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mu=2e4;function Up(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mu;)e+=n,r=t.next(e);return e>=Mu?1/0:e}function rT(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Up(r),Mu);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:kn(i)}}const iT=5;function yS(t,e,n){const r=Math.max(e-iT,0);return q1(n-t(r),e-r)}const Xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bd=.001;function sT({duration:t=Xe.duration,bounce:e=Xe.bounce,velocity:n=Xe.velocity,mass:r=Xe.mass}){let i,s,l=1-e;l=Jn(Xe.minDamping,Xe.maxDamping,l),t=Jn(Xe.minDuration,Xe.maxDuration,kn(t)),l<1?(i=d=>{const h=d*l,m=h*t,g=h-n,v=Rh(d,l),S=Math.exp(-m);return Bd-g/v*S},s=d=>{const m=d*l*t,g=m*n+n,v=Math.pow(l,2)*Math.pow(d,2)*t,S=Math.exp(-m),k=Rh(Math.pow(d,2),l);return(-i(d)+Bd>0?-1:1)*((g-v)*S)/k}):(i=d=>{const h=Math.exp(-d*t),m=(d-n)*t+1;return-Bd+h*m},s=d=>{const h=Math.exp(-d*t),m=(n-d)*(t*t);return h*m});const u=5/t,c=lT(i,s,u);if(t=gr(t),isNaN(c))return{stiffness:Xe.stiffness,damping:Xe.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:l*2*Math.sqrt(r*d),duration:t}}}const oT=12;function lT(t,e,n){let r=n;for(let i=1;i<oT;i++)r=r-t(r)/e(r);return r}function Rh(t,e){return t*Math.sqrt(1-e*e)}const aT=["duration","bounce"],uT=["stiffness","damping","mass"];function G0(t,e){return e.some(n=>t[n]!==void 0)}function cT(t){let e={velocity:Xe.velocity,stiffness:Xe.stiffness,damping:Xe.damping,mass:Xe.mass,isResolvedFromDuration:!1,...t};if(!G0(t,uT)&&G0(t,aT))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Jn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Xe.mass,stiffness:i,damping:s}}else{const n=sT(t);e={...e,...n,mass:Xe.mass},e.isResolvedFromDuration=!0}return e}function Nu(t=Xe.visualDuration,e=Xe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:m,velocity:g,isResolvedFromDuration:v}=cT({...n,velocity:-kn(n.velocity||0)}),S=g||0,k=d/(2*Math.sqrt(c*h)),w=l-s,C=kn(Math.sqrt(c/h)),T=Math.abs(w)<5;r||(r=T?Xe.restSpeed.granular:Xe.restSpeed.default),i||(i=T?Xe.restDelta.granular:Xe.restDelta.default);let D;if(k<1){const R=Rh(C,k);D=M=>{const I=Math.exp(-k*C*M);return l-I*((S+k*C*w)/R*Math.sin(R*M)+w*Math.cos(R*M))}}else if(k===1)D=R=>l-Math.exp(-C*R)*(w+(S+C*w)*R);else{const R=C*Math.sqrt(k*k-1);D=M=>{const I=Math.exp(-k*C*M),B=Math.min(R*M,300);return l-I*((S+k*C*w)*Math.sinh(B)+R*w*Math.cosh(B))/R}}const P={calculatedDuration:v&&m||null,next:R=>{const M=D(R);if(v)u.done=R>=m;else{let I=R===0?S:0;k<1&&(I=R===0?gr(S):yS(D,R,M));const B=Math.abs(I)<=r,X=Math.abs(l-M)<=i;u.done=B&&X}return u.value=u.done?l:M,u},toString:()=>{const R=Math.min(Up(P),Mu),M=gS(I=>P.next(R*I).value,R,30);return R+"ms "+M},toTransition:()=>{}};return P}Nu.applyToOptions=t=>{const e=rT(t,100,Nu);return t.ease=e.ease,t.duration=gr(e.duration),t.type="keyframes",t};function Dh({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:l,min:u,max:c,restDelta:d=.5,restSpeed:h}){const m=t[0],g={done:!1,value:m},v=B=>u!==void 0&&B<u||c!==void 0&&B>c,S=B=>u===void 0?c:c===void 0||Math.abs(u-B)<Math.abs(c-B)?u:c;let k=n*e;const w=m+k,C=l===void 0?w:l(w);C!==w&&(k=C-m);const T=B=>-k*Math.exp(-B/r),D=B=>C+T(B),P=B=>{const X=T(B),ue=D(B);g.done=Math.abs(X)<=d,g.value=g.done?C:ue};let R,M;const I=B=>{v(g.value)&&(R=B,M=Nu({keyframes:[g.value,S(g.value)],velocity:yS(D,B,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return I(0),{calculatedDuration:null,next:B=>{let X=!1;return!M&&R===void 0&&(X=!0,P(B),I(B)),R!==void 0&&B>=R?M.next(B-R):(!X&&P(B),g)}}}function fT(t,e,n){const r=[],i=n||xr.mix||mS,s=t.length-1;for(let l=0;l<s;l++){let u=i(t[l],t[l+1]);if(e){const c=Array.isArray(e)?e[l]||An:e;u=Bl(c,u)}r.push(u)}return r}function dT(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Op(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=fT(e,r,i),c=u.length,d=h=>{if(l&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const g=xl(t[m],t[m+1],h);return u[m](g)};return n?h=>d(Jn(t[0],t[s-1],h)):d}function hT(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=xl(0,e,r);t.push($e(n,1,i))}}function pT(t){const e=[0];return hT(e,t.length-1),e}function mT(t,e){return t.map(n=>n*e)}function gT(t,e){return t.map(()=>e||iS).splice(0,t.length-1)}function sl({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Tb(r)?r.map(j0):j0(r),s={done:!1,value:e[0]},l=mT(n&&n.length===e.length?n:pT(e),t),u=dT(l,e,{ease:Array.isArray(i)?i:gT(e,i)});return{calculatedDuration:t,next:c=>(s.value=u(c),s.done=c>=t,s)}}const yT=t=>t!==null;function Hp(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(yT),u=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!u||r===void 0?s[u]:r}const vT={decay:Dh,inertia:Dh,tween:sl,keyframes:sl,spring:Nu};function vS(t){typeof t.type=="string"&&(t.type=vT[t.type])}class Wp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const xT=t=>t/100;class Qp extends Wp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Ut.now()&&this.tick(Ut.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;vS(e);const{type:n=sl,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:l=0}=e;let{keyframes:u}=e;const c=n||sl;c!==sl&&typeof u[0]!="number"&&(this.mixKeyframes=Bl(xT,mS(u[0],u[1])),u=[0,100]);const d=c({...e,keyframes:u});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...u].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=Up(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:m,repeatType:g,repeatDelay:v,type:S,onUpdate:k,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let D=this.currentTime,P=r;if(m){const B=Math.min(this.currentTime,i)/u;let X=Math.floor(B),ue=B%1;!ue&&B>=1&&(ue=1),ue===1&&X--,X=Math.min(X,m+1),!!(X%2)&&(g==="reverse"?(ue=1-ue,v&&(ue-=v/u)):g==="mirror"&&(P=l)),D=Jn(0,1,ue)*u}const R=T?{done:!1,value:h[0]}:P.next(D);s&&(R.value=s(R.value));let{done:M}=R;!T&&c!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return I&&S!==Dh&&(R.value=Hp(h,this.options,w,this.speed)),k&&k(R.value),I&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return kn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kn(e)}get time(){return kn(this.currentTime)}set time(e){e=gr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ut.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=kn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=nT,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ut.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function ST(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const zi=t=>t*180/Math.PI,Ph=t=>{const e=zi(Math.atan2(t[1],t[0]));return Oh(e)},wT={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ph,rotateZ:Ph,skewX:t=>zi(Math.atan(t[1])),skewY:t=>zi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Oh=t=>(t=t%360,t<0&&(t+=360),t),K0=Ph,$0=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),q0=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kT={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$0,scaleY:q0,scale:t=>($0(t)+q0(t))/2,rotateX:t=>Oh(zi(Math.atan2(t[6],t[5]))),rotateY:t=>Oh(zi(Math.atan2(-t[2],t[0]))),rotateZ:K0,rotate:K0,skewX:t=>zi(Math.atan(t[4])),skewY:t=>zi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ih(t){return t.includes("scale")?1:0}function Lh(t,e){if(!t||t==="none")return Ih(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kT,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=wT,i=u}if(!i)return Ih(e);const s=r[e],l=i[1].split(",").map(CT);return typeof s=="function"?s(l):l[s]}const AT=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Lh(n,e)};function CT(t){return parseFloat(t.trim())}const io=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],so=new Set(io),Y0=t=>t===ro||t===te,ET=new Set(["x","y","z"]),bT=io.filter(t=>!ET.has(t));function TT(t){const e=[];return bT.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Xr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Lh(e,"x"),y:(t,{transform:e})=>Lh(e,"y")};Xr.translateX=Xr.x;Xr.translateY=Xr.y;const Wi=new Set;let Bh=!1,Fh=!1,zh=!1;function xS(){if(Fh){const t=Array.from(Wi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=TT(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,l])=>{r.getValue(s)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Fh=!1,Bh=!1,Wi.forEach(t=>t.complete(zh)),Wi.clear()}function SS(){Wi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Fh=!0)})}function MT(){zh=!0,SS(),xS(),zh=!1}class Gp{constructor(e,n,r,i,s,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Wi.add(this),Bh||(Bh=!0,Ue.read(SS),Ue.resolveKeyframes(xS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),l=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),i&&s===void 0&&i.set(e[0])}ST(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Wi.delete(this)}cancel(){this.state==="scheduled"&&(Wi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const NT=t=>t.startsWith("--");function RT(t,e,n){NT(e)?t.style.setProperty(e,n):t.style[e]=n}const DT=Ip(()=>window.ScrollTimeline!==void 0),PT={};function OT(t,e){const n=Ip(t);return()=>PT[e]??n()}const wS=OT(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,J0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xo([0,.65,.55,1]),circOut:Xo([.55,0,1,.45]),backIn:Xo([.31,.01,.66,-.59]),backOut:Xo([.33,1.53,.69,.99])};function kS(t,e){if(t)return typeof t=="function"?wS()?gS(t,e):"ease-out":sS(t)?Xo(t):Array.isArray(t)?t.map(n=>kS(n,e)||J0.easeOut):J0[t]}function IT(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:l="loop",ease:u="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const m=kS(u,i);Array.isArray(m)&&(h.easing=m);const g={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:l==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),t.animate(h,g)}function AS(t){return typeof t=="function"&&"applyToOptions"in t}function LT({type:t,...e}){return AS(t)&&wS()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class BT extends Wp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:l=!1,finalKeyframe:u,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=l,this.options=e,Op(typeof e.type!="string");const d=LT(e);this.animation=IT(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=Hp(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(h):RT(n,r,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return kn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kn(e)}get time(){return kn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=gr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&DT()?(this.animation.timeline=e,An):n(this)}}const CS={anticipate:tS,backInOut:eS,circInOut:rS};function FT(t){return t in CS}function zT(t){typeof t.ease=="string"&&FT(t.ease)&&(t.ease=CS[t.ease])}const Fd=10;class VT extends BT{constructor(e){zT(e),vS(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new Qp({...l,autoplay:!1}),c=Math.max(Fd,Ut.now()-this.startTime),d=Jn(0,Fd,c-Fd);n.setWithVelocity(u.sample(Math.max(0,c-d)).value,u.sample(c).value,d),u.stop()}}const X0=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(li.test(t)||t==="0")&&!t.startsWith("url("));function jT(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _T(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],l=X0(i,e),u=X0(s,e);return!l||!u?!1:jT(t)||(n==="spring"||AS(n))&&r}function Vh(t){t.duration=0,t.type="keyframes"}const UT=new Set(["opacity","clipPath","filter","transform"]),HT=Ip(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function WT(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return HT()&&n&&UT.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&s!==0&&l!=="inertia"}const QT=40;class GT extends Wp{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:l="loop",keyframes:u,name:c,motionValue:d,element:h,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ut.now();const g={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:l,name:c,motionValue:d,element:h,...m},v=h?.KeyframeResolver||Gp;this.keyframeResolver=new v(u,(S,k,w)=>this.onKeyframesResolved(S,k,g,!w),c,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:l,velocity:u,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Ut.now(),_T(e,s,l,u)||((xr.instantAnimations||!c)&&h?.(Hp(e,r,n)),e[0]=e[e.length-1],Vh(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>QT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!d&&WT(g)?new VT({...g,element:g.motionValue.owner.current}):new Qp(g);v.finished.then(()=>this.notifyFinished()).catch(An),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),MT()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const KT=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $T(t){const e=KT.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function ES(t,e,n=1){const[r,i]=$T(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const l=s.trim();return G1(l)?parseFloat(l):l}return zp(i)?ES(i,e,n+1):i}function Kp(t,e){return t?.[e]??t?.default??t}const qT={type:"spring",stiffness:500,damping:25,restSpeed:10},YT=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),JT={type:"keyframes",duration:.8},XT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZT=(t,{keyframes:e})=>e.length>2?JT:so.has(t)?t.startsWith("scale")?YT(e[1]):qT:XT;function eM({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:l,repeatDelay:u,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const tM=t=>t!==null;function nM(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(tM),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}function bS(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),l=t.size,u=(l-1)*r;return typeof n=="function"?n(s,l):i===1?s*r:u-s*r}const $p=(t,e,n,r={},i,s)=>l=>{const u=Kp(r,t)||{},c=u.delay||r.delay||0;let{elapsed:d=0}=r;d=d-gr(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-d,onUpdate:g=>{e.set(g),u.onUpdate&&u.onUpdate(g)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:s?void 0:i};eM(u)||Object.assign(h,ZT(t,h)),h.duration&&(h.duration=gr(h.duration)),h.repeatDelay&&(h.repeatDelay=gr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Vh(h),h.delay===0&&(m=!0)),(xr.instantAnimations||xr.skipAnimations)&&(m=!0,Vh(h),h.delay=0),h.allowFlatten=!u.type&&!u.ease,m&&!s&&e.get()!==void 0){const g=nM(h.keyframes,u);if(g!==void 0){Ue.update(()=>{h.onUpdate(g),h.onComplete()});return}}return u.isSync?new Qp(h):new GT(h)},TS=new Set(["width","height","top","left","right","bottom",...io]),Z0=30,rM=t=>!isNaN(parseFloat(t));class iM{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Ut.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ut.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Lp);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ut.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Z0)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Z0);return q1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qs(t,e){return new iM(t,e)}function ev(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function qp(t,e,n,r){if(typeof e=="function"){const[i,s]=ev(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ev(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Gs(t,e,n){const r=t.getProps();return qp(r,e,n!==void 0?n:r.custom,t)}const jh=t=>Array.isArray(t);function sM(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qs(n))}function oM(t){return jh(t)?t[t.length-1]||0:t}function lM(t,e){const n=Gs(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const l in s){const u=oM(s[l]);sM(t,l,u)}}const zt=t=>!!(t&&t.getVelocity);function aM(t){return!!(zt(t)&&t.add)}function _h(t,e){const n=t.getValue("willChange");if(aM(n))return n.add(e);if(!n&&xr.WillChange){const r=new xr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Yp(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const uM="framerAppearId",MS="data-"+Yp(uM);function NS(t){return t.props[MS]}function cM({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function RS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in u){const m=t.getValue(h,t.latestValues[h]??null),g=u[h];if(g===void 0||d&&cM(d,h))continue;const v={delay:n,...Kp(s||{},h)},S=m.get();if(S!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===S&&!v.velocity)continue;let k=!1;if(window.MotionHandoffAnimation){const C=NS(t);if(C){const T=window.MotionHandoffAnimation(C,h,Ue);T!==null&&(v.startTime=T,k=!0)}}_h(t,h),m.start($p(h,m,g,t.shouldReduceMotion&&TS.has(h)?{type:!1}:v,t,k));const w=m.animation;w&&c.push(w)}return l&&Promise.all(c).then(()=>{Ue.update(()=>{l&&lM(t,l)})}),c}function Uh(t,e,n={}){const r=Gs(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(RS(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=i;return fM(t,e,c,d,h,m,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[c,d]=u==="beforeChildren"?[s,l]:[l,s];return c().then(()=>d())}else return Promise.all([s(),l(n.delay)])}function fM(t,e,n=0,r=0,i=0,s=1,l){const u=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),u.push(Uh(c,e,{...l,delay:n+(typeof r=="function"?0:r)+bS(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(u)}function dM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Uh(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Uh(t,e,n);else{const i=typeof e=="function"?Gs(t,e,n.custom):e;r=Promise.all(RS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const hM={test:t=>t==="auto",parse:t=>t},DS=t=>e=>e.test(t),PS=[ro,te,Yn,Qr,jb,Vb,hM],tv=t=>PS.find(DS(t));function pM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$1(t):!0}const mM=new Set(["brightness","contrast","saturate","opacity"]);function gM(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Vp)||[];if(!r)return t;const i=n.replace(r,"");let s=mM.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const yM=/\b([a-z-]*)\(.*?\)/gu,Hh={...li,getAnimatableNone:t=>{const e=t.match(yM);return e?e.map(gM).join(" "):t}},nv={...ro,transform:Math.round},vM={rotate:Qr,rotateX:Qr,rotateY:Qr,rotateZ:Qr,scale:Za,scaleX:Za,scaleY:Za,scaleZ:Za,skew:Qr,skewX:Qr,skewY:Qr,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:Sl,originX:U0,originY:U0,originZ:te},Jp={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,top:te,right:te,bottom:te,left:te,inset:te,insetBlock:te,insetBlockStart:te,insetBlockEnd:te,insetInline:te,insetInlineStart:te,insetInlineEnd:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,paddingBlock:te,paddingBlockStart:te,paddingBlockEnd:te,paddingInline:te,paddingInlineStart:te,paddingInlineEnd:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,marginBlock:te,marginBlockStart:te,marginBlockEnd:te,marginInline:te,marginInlineStart:te,marginInlineEnd:te,backgroundPositionX:te,backgroundPositionY:te,...vM,zIndex:nv,fillOpacity:Sl,strokeOpacity:Sl,numOctaves:nv},xM={...Jp,color:it,backgroundColor:it,outlineColor:it,fill:it,stroke:it,borderColor:it,borderTopColor:it,borderRightColor:it,borderBottomColor:it,borderLeftColor:it,filter:Hh,WebkitFilter:Hh},OS=t=>xM[t];function IS(t,e){let n=OS(t);return n!==Hh&&(n=li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const SM=new Set(["auto","none","0"]);function wM(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!SM.has(s)&&wl(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=IS(n,i)}class kM extends Gp{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let m=e[h];if(typeof m=="string"&&(m=m.trim(),zp(m))){const g=ES(m,n.current);g!==void 0&&(e[h]=g),h===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!TS.has(r)||e.length!==2)return;const[i,s]=e,l=tv(i),u=tv(s),c=_0(i),d=_0(s);if(c!==d&&Xr[r]){this.needsMeasurement=!0;return}if(l!==u)if(Y0(l)&&Y0(u))for(let h=0;h<e.length;h++){const m=e[h];typeof m=="string"&&(e[h]=parseFloat(m))}else Xr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||pM(e[i]))&&r.push(i);r.length&&wM(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,l=r[s];r[s]=Xr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,c])=>{e.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function AM(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const LS=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function BS(t){return K1(t)&&"offsetHeight"in t}const{schedule:Xp}=oS(queueMicrotask,!1),Ln={x:!1,y:!1};function FS(){return Ln.x||Ln.y}function CM(t){return t==="x"||t==="y"?Ln[t]?null:(Ln[t]=!0,()=>{Ln[t]=!1}):Ln.x||Ln.y?null:(Ln.x=Ln.y=!0,()=>{Ln.x=Ln.y=!1})}function zS(t,e){const n=AM(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function rv(t){return!(t.pointerType==="touch"||FS())}function EM(t,e,n={}){const[r,i,s]=zS(t,n),l=u=>{if(!rv(u))return;const{target:c}=u,d=e(c,u);if(typeof d!="function"||!c)return;const h=m=>{rv(m)&&(d(m),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(u=>{u.addEventListener("pointerenter",l,i)}),s}const VS=(t,e)=>e?t===e?!0:VS(t,e.parentElement):!1,Zp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,bM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jS(t){return bM.has(t.tagName)||t.isContentEditable===!0}const xu=new WeakSet;function iv(t){return e=>{e.key==="Enter"&&t(e)}}function zd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const TM=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=iv(()=>{if(xu.has(n))return;zd(n,"down");const i=iv(()=>{zd(n,"up")}),s=()=>zd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function sv(t){return Zp(t)&&!FS()}function MM(t,e,n={}){const[r,i,s]=zS(t,n),l=u=>{const c=u.currentTarget;if(!sv(u))return;xu.add(c);const d=e(c,u),h=(v,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),xu.has(c)&&xu.delete(c),sv(v)&&typeof d=="function"&&d(v,{success:S})},m=v=>{h(v,c===window||c===document||n.useGlobalTarget||VS(c,v.target))},g=v=>{h(v,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",g,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,i),BS(u)&&(u.addEventListener("focus",d=>TM(d,i)),!jS(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),s}function _S(t){return K1(t)&&"ownerSVGElement"in t}function NM(t){return _S(t)&&t.tagName==="svg"}const RM=[...PS,it,li],DM=t=>RM.find(DS(t)),ov=()=>({translate:0,scale:1,origin:0,originPoint:0}),Us=()=>({x:ov(),y:ov()}),lv=()=>({min:0,max:0}),dt=()=>({x:lv(),y:lv()}),Wh={current:null},US={current:!1},PM=typeof window<"u";function OM(){if(US.current=!0,!!PM)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wh.current=t.matches;t.addEventListener("change",e),e()}else Wh.current=!1}const IM=new WeakMap;function Ec(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function kl(t){return typeof t=="string"||Array.isArray(t)}const em=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tm=["initial",...em];function bc(t){return Ec(t.animate)||tm.some(e=>kl(t[e]))}function HS(t){return!!(bc(t)||t.variants)}function LM(t,e,n){for(const r in e){const i=e[r],s=n[r];if(zt(i))t.addValue(r,i);else if(zt(s))t.addValue(r,qs(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,qs(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const av=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ru={};function WS(t){Ru=t}function BM(){return Ru}class FM{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Gp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ut.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Ue.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=l;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!s,this.isControllingVariants=bc(n),this.isVariantNode=HS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const v=m[g];c[g]!==void 0&&zt(v)&&v.set(c[g])}}mount(e){this.current=e,IM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(US.current||OM(),this.shouldReduceMotion=Wh.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),oi(this.notifyUpdate),oi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=so.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ru){const n=Ru[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<av.length;r++){const i=av[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,l=e[s];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=LM(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qs(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(G1(r)||$1(r))?r=parseFloat(r):!DM(r)&&li.test(n)&&(r=IS(e,n)),this.setBaseTarget(e,zt(r)?r.get():r)),zt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=qp(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!zt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Lp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Xp.render(this.render)}}class ci{constructor(e){this.isMounted=!1,this.node=e}update(){}}class QS extends FM{constructor(){super(...arguments),this.KeyframeResolver=kM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function GS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function zM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function VM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Vd(t){return t===void 0||t===1}function Qh({scale:t,scaleX:e,scaleY:n}){return!Vd(t)||!Vd(e)||!Vd(n)}function Li(t){return Qh(t)||KS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function KS(t){return uv(t.x)||uv(t.y)}function uv(t){return t&&t!=="0%"}function Du(t,e,n){const r=t-n,i=e*r;return n+i}function cv(t,e,n,r,i){return i!==void 0&&(t=Du(t,i,r)),Du(t,n,r)+e}function Gh(t,e=0,n=1,r,i){t.min=cv(t.min,e,n,r,i),t.max=cv(t.max,e,n,r,i)}function $S(t,{x:e,y:n}){Gh(t.x,e.translate,e.scale,e.originPoint),Gh(t.y,n.translate,n.scale,n.originPoint)}const fv=.999999999999,dv=1.0000000000001;function jM(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,l;for(let u=0;u<i;u++){s=n[u],l=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ws(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,$S(t,l)),r&&Li(s.latestValues)&&Ws(t,s.latestValues))}e.x<dv&&e.x>fv&&(e.x=1),e.y<dv&&e.y>fv&&(e.y=1)}function Hs(t,e){t.min=t.min+e,t.max=t.max+e}function hv(t,e,n,r,i=.5){const s=$e(t.min,t.max,i);Gh(t,e,n,s,r)}function Ws(t,e){hv(t.x,e.x,e.scaleX,e.scale,e.originX),hv(t.y,e.y,e.scaleY,e.scale,e.originY)}function qS(t,e){return GS(VM(t.getBoundingClientRect(),e))}function _M(t,e,n){const r=qS(t,n),{scroll:i}=e;return i&&(Hs(r.x,i.offset.x),Hs(r.y,i.offset.y)),r}const UM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HM=io.length;function WM(t,e,n){let r="",i=!0;for(let s=0;s<HM;s++){const l=io[s],u=t[l];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(l.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const d=LS(u,Jp[l]);if(!c){i=!1;const h=UM[l]||l;r+=`${h}(${d}) `}n&&(e[l]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function nm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let l=!1,u=!1;for(const c in e){const d=e[c];if(so.has(c)){l=!0;continue}else if(aS(c)){i[c]=d;continue}else{const h=LS(d,Jp[c]);c.startsWith("origin")?(u=!0,s[c]=h):r[c]=h}}if(e.transform||(l||n?r.transform=WM(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${c} ${d} ${h}`}}function YS(t,{style:e,vars:n},r,i){const s=t.style;let l;for(l in e)s[l]=e[l];i?.applyProjectionStyles(s,r);for(l in n)s.setProperty(l,n[l])}function pv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Go={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(te.test(t))t=parseFloat(t);else return t;const n=pv(t,e.target.x),r=pv(t,e.target.y);return`${n}% ${r}%`}},QM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=li.parse(t);if(i.length>5)return r;const s=li.createTransformer(t),l=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;i[0+l]/=u,i[1+l]/=c;const d=$e(u,c,.5);return typeof i[2+l]=="number"&&(i[2+l]/=d),typeof i[3+l]=="number"&&(i[3+l]/=d),s(i)}},Kh={borderRadius:{...Go,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Go,borderTopRightRadius:Go,borderBottomLeftRadius:Go,borderBottomRightRadius:Go,boxShadow:QM};function JS(t,{layout:e,layoutId:n}){return so.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Kh[t]||t==="opacity")}function rm(t,e,n){const r=t.style,i=e?.style,s={};if(!r)return s;for(const l in r)(zt(r[l])||i&&zt(i[l])||JS(l,t)||n?.getValue(l)?.liveStyle!==void 0)&&(s[l]=r[l]);return s}function GM(t){return window.getComputedStyle(t)}class KM extends QS{constructor(){super(...arguments),this.type="html",this.renderInstance=YS}readValueFromInstance(e,n){if(so.has(n))return this.projection?.isProjecting?Ih(n):AT(e,n);{const r=GM(e),i=(aS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qS(e,n)}build(e,n,r){nm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return rm(e,n,r)}}const $M={offset:"stroke-dashoffset",array:"stroke-dasharray"},qM={offset:"strokeDashoffset",array:"strokeDasharray"};function YM(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?$M:qM;t[s.offset]=te.transform(-r);const l=te.transform(e),u=te.transform(n);t[s.array]=`${l} ${u}`}const JM=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function XS(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:l=0,...u},c,d,h){if(nm(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g}=t;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete m.transformBox);for(const v of JM)m[v]!==void 0&&(g[v]=m[v],delete m[v]);e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&YM(m,i,s,l,!1)}const ZS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ew=t=>typeof t=="string"&&t.toLowerCase()==="svg";function XM(t,e,n,r){YS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ZS.has(i)?i:Yp(i),e.attrs[i])}function tw(t,e,n){const r=rm(t,e,n);for(const i in t)if(zt(t[i])||zt(e[i])){const s=io.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}class ZM extends QS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(so.has(n)){const r=OS(n);return r&&r.default||0}return n=ZS.has(n)?n:Yp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return tw(e,n,r)}build(e,n,r){XS(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){XM(e,n,r,i)}mount(e){this.isSVGTag=ew(e.tagName),super.mount(e)}}const eN=tm.length;function nw(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?nw(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<eN;n++){const r=tm[n],i=t.props[r];(kl(i)||i===!1)&&(e[r]=i)}return e}function rw(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const tN=[...em].reverse(),nN=em.length;function rN(t){return e=>Promise.all(e.map(({animation:n,options:r})=>dM(t,n,r)))}function iN(t){let e=rN(t),n=mv(),r=!0;const i=c=>(d,h)=>{const m=Gs(t,h,c==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:g,transitionEnd:v,...S}=m;d={...d,...S,...v}}return d};function s(c){e=c(t)}function l(c){const{props:d}=t,h=nw(t.parent)||{},m=[],g=new Set;let v={},S=1/0;for(let w=0;w<nN;w++){const C=tN[w],T=n[C],D=d[C]!==void 0?d[C]:h[C],P=kl(D),R=C===c?T.isActive:null;R===!1&&(S=w);let M=D===h[C]&&D!==d[C]&&P;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),T.protectedKeys={...v},!T.isActive&&R===null||!D&&!T.prevProp||Ec(D)||typeof D=="boolean")continue;const I=sN(T.prevProp,D);let B=I||C===c&&T.isActive&&!M&&P||w>S&&P,X=!1;const ue=Array.isArray(D)?D:[D];let Ee=ue.reduce(i(C),{});R===!1&&(Ee={});const{prevResolvedValues:ke={}}=T,Ne={...ke,...Ee},xe=se=>{B=!0,g.has(se)&&(X=!0,g.delete(se)),T.needsAnimating[se]=!0;const G=t.getValue(se);G&&(G.liveStyle=!1)};for(const se in Ne){const G=Ee[se],q=ke[se];if(v.hasOwnProperty(se))continue;let J=!1;jh(G)&&jh(q)?J=!rw(G,q):J=G!==q,J?G!=null?xe(se):g.add(se):G!==void 0&&g.has(se)?xe(se):T.protectedKeys[se]=!0}T.prevProp=D,T.prevResolvedValues=Ee,T.isActive&&(v={...v,...Ee}),r&&t.blockInitialAnimation&&(B=!1);const Ae=M&&I;B&&(!Ae||X)&&m.push(...ue.map(se=>{const G={type:C};if(typeof se=="string"&&r&&!Ae&&t.manuallyAnimateOnMount&&t.parent){const{parent:q}=t,J=Gs(q,se);if(q.enteringChildren&&J){const{delayChildren:L}=J.transition||{};G.delay=bS(q.enteringChildren,t,L)}}return{animation:se,options:G}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const C=Gs(t,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(w.transition=C.transition)}g.forEach(C=>{const T=t.getBaseTarget(C),D=t.getValue(C);D&&(D.liveStyle=!0),w[C]=T??null}),m.push({animation:w})}let k=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(k=!1),r=!1,k?e(m):Promise.resolve()}function u(c,d){if(n[c].isActive===d)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(c,d)),n[c].isActive=d;const h=l(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:l,setActive:u,setAnimateFunction:s,getState:()=>n,reset:()=>{n=mv()}}}function sN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!rw(e,t):!1}function Oi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mv(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}const iw=1e-4,oN=1-iw,lN=1+iw,sw=.01,aN=0-sw,uN=0+sw;function Ht(t){return t.max-t.min}function cN(t,e,n){return Math.abs(t-e)<=n}function gv(t,e,n,r=.5){t.origin=r,t.originPoint=$e(e.min,e.max,t.origin),t.scale=Ht(n)/Ht(e),t.translate=$e(n.min,n.max,t.origin)-t.originPoint,(t.scale>=oN&&t.scale<=lN||isNaN(t.scale))&&(t.scale=1),(t.translate>=aN&&t.translate<=uN||isNaN(t.translate))&&(t.translate=0)}function ol(t,e,n,r){gv(t.x,e.x,n.x,r?r.originX:void 0),gv(t.y,e.y,n.y,r?r.originY:void 0)}function yv(t,e,n){t.min=n.min+e.min,t.max=t.min+Ht(e)}function fN(t,e,n){yv(t.x,e.x,n.x),yv(t.y,e.y,n.y)}function vv(t,e,n){t.min=e.min-n.min,t.max=t.min+Ht(e)}function Pu(t,e,n){vv(t.x,e.x,n.x),vv(t.y,e.y,n.y)}function xv(t,e,n,r,i){return t-=e,t=Du(t,1/n,r),i!==void 0&&(t=Du(t,1/i,r)),t}function dN(t,e=0,n=1,r=.5,i,s=t,l=t){if(Yn.test(e)&&(e=parseFloat(e),e=$e(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=$e(s.min,s.max,r);t===s&&(u-=e),t.min=xv(t.min,e,n,u,i),t.max=xv(t.max,e,n,u,i)}function Sv(t,e,[n,r,i],s,l){dN(t,e[n],e[r],e[i],e.scale,s,l)}const hN=["x","scaleX","originX"],pN=["y","scaleY","originY"];function wv(t,e,n,r){Sv(t.x,e,hN,n?n.x:void 0,r?r.x:void 0),Sv(t.y,e,pN,n?n.y:void 0,r?r.y:void 0)}function kv(t,e){t.min=e.min,t.max=e.max}function In(t,e){kv(t.x,e.x),kv(t.y,e.y)}function Av(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Cv(t){return t.translate===0&&t.scale===1}function ow(t){return Cv(t.x)&&Cv(t.y)}function Ev(t,e){return t.min===e.min&&t.max===e.max}function mN(t,e){return Ev(t.x,e.x)&&Ev(t.y,e.y)}function bv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lw(t,e){return bv(t.x,e.x)&&bv(t.y,e.y)}function Tv(t){return Ht(t.x)/Ht(t.y)}function Mv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function vn(t){return[t("x"),t("y")]}function gN(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,l=n?.z||0;if((i||s||l)&&(r=`translate3d(${i}px, ${s}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:g,skewX:v,skewY:S}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),g&&(r+=`rotateY(${g}deg) `),v&&(r+=`skewX(${v}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const aw=["TopLeft","TopRight","BottomLeft","BottomRight"],yN=aw.length,Nv=t=>typeof t=="string"?parseFloat(t):t,Rv=t=>typeof t=="number"||te.test(t);function vN(t,e,n,r,i,s){i?(t.opacity=$e(0,n.opacity??1,xN(r)),t.opacityExit=$e(e.opacity??1,0,SN(r))):s&&(t.opacity=$e(e.opacity??1,n.opacity??1,r));for(let l=0;l<yN;l++){const u=`border${aw[l]}Radius`;let c=Dv(e,u),d=Dv(n,u);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Rv(c)===Rv(d)?(t[u]=Math.max($e(Nv(c),Nv(d),r),0),(Yn.test(d)||Yn.test(c))&&(t[u]+="%")):t[u]=d}(e.rotate||n.rotate)&&(t.rotate=$e(e.rotate||0,n.rotate||0,r))}function Dv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const xN=uw(0,.5,nS),SN=uw(.5,.95,An);function uw(t,e,n){return r=>r<t?0:r>e?1:n(xl(t,e,r))}function wN(t,e){const n=Ut.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(oi(r),t(s-e))};return Ue.setup(r,!0),()=>oi(r)}function Al(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Su(t){return zt(t)?t.get():t}function kN(t,e,n){const r=zt(t)?t:qs(t);return r.start($p("",r,e,n)),r.animation}const AN=(t,e)=>t.depth-e.depth;class CN{constructor(){this.children=[],this.isDirty=!1}add(e){Dp(this.children,e),this.isDirty=!0}remove(e){Pp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AN),this.isDirty=!1,this.children.forEach(e)}}class EN{constructor(){this.members=[]}add(e){Dp(this.members,e),e.scheduleRender()}remove(e){if(Pp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const wu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},jd=["","X","Y","Z"],bN=1e3;let TN=0;function _d(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function cw(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=NS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&cw(r)}function fw({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},u=e?.()){this.id=TN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RN),this.nodes.forEach(IN),this.nodes.forEach(LN),this.nodes.forEach(DN)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new CN)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Lp),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const c=this.eventHandlers.get(l);c&&c.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=_S(l)&&!NM(l),this.instance=l;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||u)&&(this.isLayoutDirty=!0),t){let h,m=0;const g=()=>this.root.updateBlockedByResize=!1;Ue.read(()=>{m=window.innerWidth}),t(l,()=>{const v=window.innerWidth;v!==m&&(m=v,this.root.updateBlockedByResize=!0,h&&h(),h=wN(g,250),wu.hasAnimatedSinceResize&&(wu.hasAnimatedSinceResize=!1,this.nodes.forEach(Iv)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||jN,{onLayoutAnimationStart:k,onLayoutAnimationComplete:w}=d.getProps(),C=!this.targetLayout||!lw(this.targetLayout,v),T=!m&&g;if(this.options.layoutRoot||this.resumeFrom||T||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...Kp(S,"layout"),onPlay:k,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(h,T)}else m||Iv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BN),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Pv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ov);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ON),this.nodes.forEach(MN),this.nodes.forEach(NN)):this.nodes.forEach(Ov),this.clearAllSnapshots();const u=Ut.now();Tt.delta=Jn(0,1e3/60,u-Tt.timestamp),Tt.timestamp=u,Tt.isProcessing=!0,Pd.update.process(Tt),Pd.preRender.process(Tt),Pd.render.process(Tt),Tt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PN),this.sharedNodes.forEach(FN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ht(this.snapshot.measuredBox.x)&&!Ht(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!ow(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;l&&this.instance&&(u||Li(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return l&&(c=this.removeTransform(c)),_N(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return dt();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(UN))){const{scroll:d}=this.root;d&&(Hs(u.x,d.offset.x),Hs(u.y,d.offset.y))}return u}removeElementScroll(l){const u=dt();if(In(u,l),this.scroll?.wasRoot)return u;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&In(u,l),Hs(u.x,h.offset.x),Hs(u.y,h.offset.y))}return u}applyTransform(l,u=!1){const c=dt();In(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];!u&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ws(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Li(h.latestValues)&&Ws(c,h.latestValues)}return Li(this.latestValues)&&Ws(c,this.latestValues),c}removeTransform(l){const u=dt();In(u,l);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Li(d.latestValues))continue;Qh(d.latestValues)&&d.updateSnapshot();const h=dt(),m=d.measurePageBox();In(h,m),wv(u,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Li(this.latestValues)&&wv(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!this.layout||!(h||m))return;this.resolvedRelativeTargetAt=Tt.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):In(this.target,this.layout.layoutBox),$S(this.target,this.targetDelta)):In(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Qh(this.parent.latestValues)||KS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,c){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Pu(this.relativeTargetOrigin,u,c),In(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Tt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;In(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;jM(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=dt());const{target:v}=l;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Av(this.prevProjectionDelta.x,this.projectionDelta.x),Av(this.prevProjectionDelta.y,this.projectionDelta.y)),ol(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!Mv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Mv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Us(),this.projectionDelta=Us(),this.projectionDeltaWithTransform=Us()}setAnimationOrigin(l,u=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=Us();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const g=dt(),v=c?c.source:void 0,S=this.layout?this.layout.source:void 0,k=v!==S,w=this.getStack(),C=!w||w.members.length<=1,T=!!(k&&!C&&this.options.crossfade===!0&&!this.path.some(VN));this.animationProgress=0;let D;this.mixTargetDelta=P=>{const R=P/1e3;Lv(m.x,l.x,R),Lv(m.y,l.y,R),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zN(this.relativeTarget,this.relativeTargetOrigin,g,R),D&&mN(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=dt()),In(D,this.relativeTarget)),k&&(this.animationValues=h,vN(h,d,this.latestValues,R,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(oi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{wu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qs(0)),this.currentAnimation=kN(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:c,layout:d,latestValues:h}=l;if(!(!u||!c||!d)){if(this!==l&&this.layout&&d&&dw(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||dt();const m=Ht(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+m;const g=Ht(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+g}In(u,c),Ws(u,h),ol(this.projectionDeltaWithTransform,this.layoutCorrected,u,h)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new EN),this.sharedNodes.get(l).add(u);const d=u.options.initialPromotionConfig;u.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const d={};c.z&&_d("z",l,d,this.animationValues);for(let h=0;h<jd.length;h++)_d(`rotate${jd[h]}`,l,d,this.animationValues),_d(`skew${jd[h]}`,l,d,this.animationValues);l.render();for(const h in d)l.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Su(u?.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Su(u?.pointerEvents)||""),this.hasProjected&&!Li(this.latestValues)&&(l.transform=c?c({},""):"none",this.hasProjected=!1);return}l.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=gN(this.projectionDeltaWithTransform,this.treeScale,h);c&&(m=c(h,m)),l.transform=m;const{x:g,y:v}=this.projectionDelta;l.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?l.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:l.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const S in Kh){if(h[S]===void 0)continue;const{correct:k,applyTo:w,isCSSVariable:C}=Kh[S],T=m==="none"?h[S]:k(h[S],d);if(w){const D=w.length;for(let P=0;P<D;P++)l[w[P]]=T}else C?this.options.visualElement.renderState.vars[S]=T:l[S]=T}this.options.layoutId&&(l.pointerEvents=d===this?Su(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Pv),this.root.sharedNodes.clear()}}}function MN(t){t.updateLayout()}function NN(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?vn(h=>{const m=s?e.measuredBox[h]:e.layoutBox[h],g=Ht(m);m.min=n[h].min,m.max=m.min+g}):dw(i,e.layoutBox,n)&&vn(h=>{const m=s?e.measuredBox[h]:e.layoutBox[h],g=Ht(n[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const l=Us();ol(l,n,e.layoutBox);const u=Us();s?ol(u,t.applyTransform(r,!0),e.measuredBox):ol(u,n,e.layoutBox);const c=!ow(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=dt();Pu(v,e.layoutBox,m.layoutBox);const S=dt();Pu(S,n,g.layoutBox),lw(v,S)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function RN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function DN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function PN(t){t.clearSnapshot()}function Pv(t){t.clearMeasurements()}function Ov(t){t.isLayoutDirty=!1}function ON(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Iv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function IN(t){t.resolveTargetDelta()}function LN(t){t.calcProjection()}function BN(t){t.resetSkewAndRotation()}function FN(t){t.removeLeadSnapshot()}function Lv(t,e,n){t.translate=$e(e.translate,0,n),t.scale=$e(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Bv(t,e,n,r){t.min=$e(e.min,n.min,r),t.max=$e(e.max,n.max,r)}function zN(t,e,n,r){Bv(t.x,e.x,n.x,r),Bv(t.y,e.y,n.y,r)}function VN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jN={duration:.45,ease:[.4,0,.1,1]},Fv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zv=Fv("applewebkit/")&&!Fv("chrome/")?Math.round:An;function Vv(t){t.min=zv(t.min),t.max=zv(t.max)}function _N(t){Vv(t.x),Vv(t.y)}function dw(t,e,n){return t==="position"||t==="preserve-aspect"&&!cN(Tv(e),Tv(n),.2)}function UN(t){return t!==t.root&&t.scroll?.wasRoot}const HN=fw({attachResizeListener:(t,e)=>Al(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ud={current:void 0},hw=fw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ud.current){const t=new HN({});t.mount(window),t.setOptions({layoutScroll:!0}),Ud.current=t}return Ud.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),im=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function WN(...t){return e=>{let n=!1;const r=t.map(i=>{const s=jv(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():jv(t[i],null)}}}}function QN(...t){return F.useCallback(WN(...t),t)}class GN extends F.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=BS(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function KN({children:t,isPresent:e,anchorX:n,root:r}){const i=F.useId(),s=F.useRef(null),l=F.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=F.useContext(im),c=t.props?.ref??t?.ref,d=QN(s,c);return F.useInsertionEffect(()=>{const{width:h,height:m,top:g,left:v,right:S}=l.current;if(e||!s.current||!h||!m)return;const k=n==="left"?`left: ${v}`:`right: ${S}`;s.current.dataset.motionPopId=i;const w=document.createElement("style");u&&(w.nonce=u);const C=r??document.head;return C.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            ${k}px !important;
            top: ${g}px !important;
          }
        `),()=>{C.contains(w)&&C.removeChild(w)}},[e]),E.jsx(GN,{isPresent:e,childRef:s,sizeRef:l,children:F.cloneElement(t,{ref:d})})}const $N=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:l,anchorX:u,root:c})=>{const d=Rp(qN),h=F.useId();let m=!0,g=F.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const S of d.values())if(!S)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return s&&m&&(g={...g}),F.useMemo(()=>{d.forEach((v,S)=>d.set(S,!1))},[n]),F.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),l==="popLayout"&&(t=E.jsx(KN,{isPresent:n,anchorX:u,root:c,children:t})),E.jsx(Cc.Provider,{value:g,children:t})};function qN(){return new Map}function pw(t=!0){const e=F.useContext(Cc);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=F.useId();F.useEffect(()=>{if(t)return i(s)},[t]);const l=F.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,l]:[!0]}const eu=t=>t.key||"";function _v(t){const e=[];return F.Children.forEach(t,n=>{F.isValidElement(n)&&e.push(n)}),e}const YN=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:l=!1,anchorX:u="left",root:c})=>{const[d,h]=pw(l),m=F.useMemo(()=>_v(t),[t]),g=l&&!d?[]:m.map(eu),v=F.useRef(!0),S=F.useRef(m),k=Rp(()=>new Map),w=F.useRef(new Set),[C,T]=F.useState(m),[D,P]=F.useState(m);Q1(()=>{v.current=!1,S.current=m;for(let I=0;I<D.length;I++){const B=eu(D[I]);g.includes(B)?(k.delete(B),w.current.delete(B)):k.get(B)!==!0&&k.set(B,!1)}},[D,g.length,g.join("-")]);const R=[];if(m!==C){let I=[...m];for(let B=0;B<D.length;B++){const X=D[B],ue=eu(X);g.includes(ue)||(I.splice(B,0,X),R.push(X))}return s==="wait"&&R.length&&(I=R),P(_v(I)),T(m),null}const{forceRender:M}=F.useContext(Np);return E.jsx(E.Fragment,{children:D.map(I=>{const B=eu(I),X=l&&!d?!1:m===D||g.includes(B),ue=()=>{if(w.current.has(B))return;if(w.current.add(B),k.has(B))k.set(B,!0);else return;let Ee=!0;k.forEach(ke=>{ke||(Ee=!1)}),Ee&&(M?.(),P(S.current),l&&h?.(),r&&r())};return E.jsx($N,{isPresent:X,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:X?void 0:ue,anchorX:u,children:I},B)})})},mw=F.createContext({strict:!1}),Uv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Hv=!1;function JN(){if(Hv)return;const t={};for(const e in Uv)t[e]={isEnabled:n=>Uv[e].some(r=>!!n[r])};WS(t),Hv=!0}function gw(){return JN(),BM()}function XN(t){const e=gw();for(const n in t)e[n]={...e[n],...t[n]};WS(e)}const ZN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ou(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ZN.has(t)}let yw=t=>!Ou(t);function e2(t){typeof t=="function"&&(yw=e=>e.startsWith("on")?!Ou(e):t(e))}try{e2(require("@emotion/is-prop-valid").default)}catch{}function t2(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(yw(i)||n===!0&&Ou(i)||!e&&!Ou(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Tc=F.createContext({});function n2(t,e){if(bc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||kl(n)?n:void 0,animate:kl(r)?r:void 0}}return t.inherit!==!1?e:{}}function r2(t){const{initial:e,animate:n}=n2(t,F.useContext(Tc));return F.useMemo(()=>({initial:e,animate:n}),[Wv(e),Wv(n)])}function Wv(t){return Array.isArray(t)?t.join(" "):t}const sm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vw(t,e,n){for(const r in e)!zt(e[r])&&!JS(r,n)&&(t[r]=e[r])}function i2({transformTemplate:t},e){return F.useMemo(()=>{const n=sm();return nm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function s2(t,e){const n=t.style||{},r={};return vw(r,n,t),Object.assign(r,i2(t,e)),r}function o2(t,e){const n={},r=s2(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const xw=()=>({...sm(),attrs:{}});function l2(t,e,n,r){const i=F.useMemo(()=>{const s=xw();return XS(s,e,ew(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vw(s,t.style,t),i.style={...s,...i.style}}return i}const a2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function om(t){return typeof t!="string"||t.includes("-")?!1:!!(a2.indexOf(t)>-1||/[A-Z]/u.test(t))}function u2(t,e,n,{latestValues:r},i,s=!1,l){const c=(l??om(t)?l2:o2)(e,r,i,t),d=t2(e,typeof t=="string",s),h=t!==F.Fragment?{...d,...c,ref:n}:{},{children:m}=e,g=F.useMemo(()=>zt(m)?m.get():m,[m]);return F.createElement(t,{...h,children:g})}function c2({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:f2(n,r,i,t),renderState:e()}}function f2(t,e,n,r){const i={},s=r(t,{});for(const g in s)i[g]=Su(s[g]);let{initial:l,animate:u}=t;const c=bc(t),d=HS(t);e&&d&&!c&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let h=n?n.initial===!1:!1;h=h||l===!1;const m=h?u:l;if(m&&typeof m!="boolean"&&!Ec(m)){const g=Array.isArray(m)?m:[m];for(let v=0;v<g.length;v++){const S=qp(t,g[v]);if(S){const{transitionEnd:k,transition:w,...C}=S;for(const T in C){let D=C[T];if(Array.isArray(D)){const P=h?D.length-1:0;D=D[P]}D!==null&&(i[T]=D)}for(const T in k)i[T]=k[T]}}}return i}const Sw=t=>(e,n)=>{const r=F.useContext(Tc),i=F.useContext(Cc),s=()=>c2(t,e,r,i);return n?s():Rp(s)},d2=Sw({scrapeMotionValuesFromProps:rm,createRenderState:sm}),h2=Sw({scrapeMotionValuesFromProps:tw,createRenderState:xw}),p2=Symbol.for("motionComponentSymbol");function m2(t,e,n){const r=F.useRef(n);F.useInsertionEffect(()=>{r.current=n});const i=F.useRef(null);return F.useCallback(s=>{s&&t.onMount?.(s),e&&(s?e.mount(s):e.unmount());const l=r.current;if(typeof l=="function")if(s){const u=l(s);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):l(s);else l&&(l.current=s)},[e])}const ww=F.createContext({});function Zo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function g2(t,e,n,r,i,s){const{visualElement:l}=F.useContext(Tc),u=F.useContext(mw),c=F.useContext(Cc),d=F.useContext(im).reducedMotion,h=F.useRef(null);r=r||u.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:l,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,isSVG:s}));const m=h.current,g=F.useContext(ww);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&y2(h.current,n,i,g);const v=F.useRef(!1);F.useInsertionEffect(()=>{m&&v.current&&m.update(n,c)});const S=n[MS],k=F.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return Q1(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),k.current&&m.animationState&&m.animationState.animateChanges())}),F.useEffect(()=>{m&&(!k.current&&m.animationState&&m.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),k.current=!1),m.enteringChildren=void 0)}),m}function y2(t,e,n,r){const{layoutId:i,layout:s,drag:l,dragConstraints:u,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kw(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!l||u&&Zo(u),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function kw(t){if(t)return t.options.allowProjection!==!1?t.projection:kw(t.parent)}function Hd(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&XN(r);const s=n?n==="svg":om(t),l=s?h2:d2;function u(d,h){let m;const g={...F.useContext(im),...d,layoutId:v2(d)},{isStatic:v}=g,S=r2(d),k=l(d,v);if(!v&&W1){x2();const w=S2(g);m=w.MeasureLayout,S.visualElement=g2(t,k,g,i,w.ProjectionNode,s)}return E.jsxs(Tc.Provider,{value:S,children:[m&&S.visualElement?E.jsx(m,{visualElement:S.visualElement,...g}):null,u2(t,d,m2(k,S.visualElement,h),k,v,e,s)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=F.forwardRef(u);return c[p2]=t,c}function v2({layoutId:t}){const e=F.useContext(Np).id;return e&&t!==void 0?e+"-"+t:t}function x2(t,e){F.useContext(mw).strict}function S2(t){const e=gw(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function w2(t,e){if(typeof Proxy>"u")return Hd;const n=new Map,r=(s,l)=>Hd(s,l,t,e),i=(s,l)=>r(s,l);return new Proxy(i,{get:(s,l)=>l==="create"?r:(n.has(l)||n.set(l,Hd(l,void 0,t,e)),n.get(l))})}const k2=(t,e)=>e.isSVG??om(t)?new ZM(e):new KM(e,{allowProjection:t!==F.Fragment});class A2 extends ci{constructor(e){super(e),e.animationState||(e.animationState=iN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ec(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let C2=0;class E2 extends ci{constructor(){super(...arguments),this.id=C2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const b2={animation:{Feature:A2},exit:{Feature:E2}};function Vl(t){return{point:{x:t.pageX,y:t.pageY}}}const T2=t=>e=>Zp(e)&&t(e,Vl(e));function ll(t,e,n,r){return Al(t,e,T2(n),r)}const Aw=({current:t})=>t?t.ownerDocument.defaultView:null,Qv=(t,e)=>Math.abs(t-e);function M2(t,e){const n=Qv(t.x,e.x),r=Qv(t.y,e.y);return Math.sqrt(n**2+r**2)}const Gv=new Set(["auto","scroll"]);class Cw{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Qd(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,k=M2(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!k)return;const{point:w}=v,{timestamp:C}=Tt;this.history.push({...w,timestamp:C});const{onStart:T,onMove:D}=this.handlers;S||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,S)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Wd(S,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(v,S)=>{this.end();const{onEnd:k,onSessionEnd:w,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Qd(v.type==="pointercancel"?this.lastMoveEventInfo:Wd(S,this.transformPagePoint),this.history);this.startEvent&&k&&k(v,T),w&&w(v,T)},!Zp(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=i||window;const c=Vl(e),d=Wd(c,this.transformPagePoint),{point:h}=d,{timestamp:m}=Tt;this.history=[{...h,timestamp:m}];const{onSessionStart:g}=n;g&&g(e,Qd(d,this.history)),this.removeListeners=Bl(ll(this.contextWindow,"pointermove",this.handlePointerMove),ll(this.contextWindow,"pointerup",this.handlePointerUp),ll(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(Gv.has(r.overflowX)||Gv.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),Ue.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),oi(this.updatePoint)}}function Wd(t,e){return e?{point:e(t.point)}:t}function Kv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Qd({point:t},e){return{point:t,delta:Kv(t,Ew(e)),offset:Kv(t,N2(e)),velocity:R2(e,.1)}}function N2(t){return t[0]}function Ew(t){return t[t.length-1]}function R2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Ew(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>gr(e)));)n--;if(!r)return{x:0,y:0};const s=kn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const l={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function D2(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$e(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$e(n,t,r.max):Math.min(t,n)),t}function $v(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function P2(t,{top:e,left:n,bottom:r,right:i}){return{x:$v(t.x,n,i),y:$v(t.y,e,r)}}function qv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function O2(t,e){return{x:qv(t.x,e.x),y:qv(t.y,e.y)}}function I2(t,e){let n=.5;const r=Ht(t),i=Ht(e);return i>r?n=xl(e.min,e.max-r,t.min):r>i&&(n=xl(t.min,t.max-i,e.min)),Jn(0,1,n)}function L2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const $h=.35;function B2(t=$h){return t===!1?t=0:t===!0&&(t=$h),{x:Yv(t,"left","right"),y:Yv(t,"top","bottom")}}function Yv(t,e,n){return{min:Jv(t,e),max:Jv(t,n)}}function Jv(t,e){return typeof t=="number"?t:t[e]||0}const F2=new WeakMap;class z2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{n?(this.stopAnimation(),this.snapToCursor(Vl(m).point)):this.pauseAnimation()},l=(m,g)=>{this.stopAnimation();const{drag:v,dragPropagation:S,onDragStart:k}=this.getProps();if(v&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CM(v),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vn(C=>{let T=this.getAxisMotionValue(C).get()||0;if(Yn.test(T)){const{projection:D}=this.visualElement;if(D&&D.layout){const P=D.layout.layoutBox[C];P&&(T=Ht(P)*(parseFloat(T)/100))}}this.originPoint[C]=T}),k&&Ue.postRender(()=>k(m,g)),_h(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},u=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:v,dragDirectionLock:S,onDirectionLock:k,onDrag:w}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:C}=g;if(S&&this.currentDirection===null){this.currentDirection=V2(C),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),w&&w(m,g)},c=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>vn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Cw(e,{onSessionStart:s,onStart:l,onMove:u,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:Aw(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Ue.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!tu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=D2(l,this.constraints[e],this.elastic[e])),s.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Zo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=P2(r.layoutBox,e):this.constraints=!1,this.elastic=B2(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vn(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=L2(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=_M(r,i.root,this.visualElement.getTransformPagePoint());let l=O2(i.layout.layoutBox,s);if(n){const u=n(zM(l));this.hasMutatedConstraints=!!u,u&&(l=GS(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},d=vn(h=>{if(!tu(h,n,this.currentDirection))return;let m=c&&c[h]||{};l&&(m={min:0,max:0});const g=i?200:1e6,v=i?40:1e7,S={type:"inertia",velocity:r?e[h]:0,bounceStiffness:g,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(h,S)});return Promise.all(d).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _h(this.visualElement,e),r.start($p(e,r,0,n,this.visualElement,!1))}stopAnimation(){vn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vn(n=>{const{drag:r}=this.getProps();if(!tu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:u}=i.layout.layoutBox[n],c=s.get()||0;s.set(e[n]-$e(l,u,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};vn(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const c=u.get();i[l]=I2({min:c,max:c},this.constraints[l])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vn(l=>{if(!tu(l,e,null))return;const u=this.getAxisMotionValue(l),{min:c,max:d}=this.constraints[l];u.set($e(c,d,i[l]))})}addListeners(){if(!this.visualElement.current)return;F2.set(this.visualElement,this);const e=this.visualElement.current,n=ll(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&!jS(c.target)&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Zo(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ue.read(r);const l=Al(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(vn(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())}));return()=>{l(),n(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:l=$h,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:l,dragMomentum:u}}}function tu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function V2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class j2 extends ci{constructor(e){super(e),this.removeGroupControls=An,this.removeListeners=An,this.controls=new z2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||An}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const Xv=t=>(e,n)=>{t&&Ue.postRender(()=>t(e,n))};class _2 extends ci{constructor(){super(...arguments),this.removePointerDownListener=An}onPointerDown(e){this.session=new Cw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Aw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Xv(e),onStart:Xv(n),onMove:r,onEnd:(s,l)=>{delete this.session,i&&Ue.postRender(()=>i(s,l))}}}mount(){this.removePointerDownListener=ll(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Gd=!1;class U2 extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Gd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),wu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:l}=r;return l&&(l.isPresent=s,Gd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?l.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?l.promote():l.relegate()||Ue.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Gd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bw(t){const[e,n]=pw(),r=F.useContext(Np);return E.jsx(U2,{...t,layoutGroup:r,switchLayoutGroup:F.useContext(ww),isPresent:e,safeToRemove:n})}const H2={pan:{Feature:_2},drag:{Feature:j2,ProjectionNode:hw,MeasureLayout:bw}};function Zv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ue.postRender(()=>s(e,Vl(e)))}class W2 extends ci{mount(){const{current:e}=this.node;e&&(this.unmount=EM(e,(n,r)=>(Zv(this.node,r,"Start"),i=>Zv(this.node,i,"End"))))}unmount(){}}class Q2 extends ci{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Bl(Al(this.node.current,"focus",()=>this.onFocus()),Al(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function ex(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ue.postRender(()=>s(e,Vl(e)))}class G2 extends ci{mount(){const{current:e}=this.node;e&&(this.unmount=MM(e,(n,r)=>(ex(this.node,r,"Start"),(i,{success:s})=>ex(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qh=new WeakMap,Kd=new WeakMap,K2=t=>{const e=qh.get(t.target);e&&e(t)},$2=t=>{t.forEach(K2)};function q2({root:t,...e}){const n=t||document;Kd.has(n)||Kd.set(n,{});const r=Kd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver($2,{root:t,...e})),r[i]}function Y2(t,e,n){const r=q2(e);return qh.set(t,n),r.observe(t),()=>{qh.delete(t),r.unobserve(t)}}const J2={some:0,all:1};class X2 extends ci{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:J2[i]},u=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),g=d?h:m;g&&g(c)};return Y2(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Z2(e,n))&&this.startObserver()}unmount(){}}function Z2({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const eR={inView:{Feature:X2},tap:{Feature:G2},focus:{Feature:Q2},hover:{Feature:W2}},tR={layout:{ProjectionNode:hw,MeasureLayout:bw}},nR={...b2,...eR,...H2,...tR},en=w2(nR,k2);function Tw(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Tw(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Tw(t))&&(r&&(r+=" "),r+=e);return r}const rR=`#version 300 es
precision mediump float;

layout(location = 0) in vec4 a_position;

uniform vec2 u_resolution;
uniform float u_pixelRatio;
uniform float u_imageAspectRatio;
uniform float u_originX;
uniform float u_originY;
uniform float u_worldWidth;
uniform float u_worldHeight;
uniform float u_fit;
uniform float u_scale;
uniform float u_rotation;
uniform float u_offsetX;
uniform float u_offsetY;

out vec2 v_objectUV;
out vec2 v_objectBoxSize;
out vec2 v_responsiveUV;
out vec2 v_responsiveBoxGivenSize;
out vec2 v_patternUV;
out vec2 v_patternBoxSize;
out vec2 v_imageUV;

vec3 getBoxSize(float boxRatio, vec2 givenBoxSize) {
  vec2 box = vec2(0.);
  // fit = none
  box.x = boxRatio * min(givenBoxSize.x / boxRatio, givenBoxSize.y);
  float noFitBoxWidth = box.x;
  if (u_fit == 1.) { // fit = contain
    box.x = boxRatio * min(u_resolution.x / boxRatio, u_resolution.y);
  } else if (u_fit == 2.) { // fit = cover
    box.x = boxRatio * max(u_resolution.x / boxRatio, u_resolution.y);
  }
  box.y = box.x / boxRatio;
  return vec3(box, noFitBoxWidth);
}

void main() {
  gl_Position = a_position;

  vec2 uv = gl_Position.xy * .5;
  vec2 boxOrigin = vec2(.5 - u_originX, u_originY - .5);
  vec2 givenBoxSize = vec2(u_worldWidth, u_worldHeight);
  givenBoxSize = max(givenBoxSize, vec2(1.)) * u_pixelRatio;
  float r = u_rotation * 3.14159265358979323846 / 180.;
  mat2 graphicRotation = mat2(cos(r), sin(r), -sin(r), cos(r));
  vec2 graphicOffset = vec2(-u_offsetX, u_offsetY);


  // ===================================================

  float fixedRatio = 1.;
  vec2 fixedRatioBoxGivenSize = vec2(
  (u_worldWidth == 0.) ? u_resolution.x : givenBoxSize.x,
  (u_worldHeight == 0.) ? u_resolution.y : givenBoxSize.y
  );

  v_objectBoxSize = getBoxSize(fixedRatio, fixedRatioBoxGivenSize).xy;
  vec2 objectWorldScale = u_resolution.xy / v_objectBoxSize;

  v_objectUV = uv;
  v_objectUV *= objectWorldScale;
  v_objectUV += boxOrigin * (objectWorldScale - 1.);
  v_objectUV += graphicOffset;
  v_objectUV /= u_scale;
  v_objectUV = graphicRotation * v_objectUV;

  // ===================================================

  v_responsiveBoxGivenSize = vec2(
  (u_worldWidth == 0.) ? u_resolution.x : givenBoxSize.x,
  (u_worldHeight == 0.) ? u_resolution.y : givenBoxSize.y
  );
  float responsiveRatio = v_responsiveBoxGivenSize.x / v_responsiveBoxGivenSize.y;
  vec2 responsiveBoxSize = getBoxSize(responsiveRatio, v_responsiveBoxGivenSize).xy;
  vec2 responsiveBoxScale = u_resolution.xy / responsiveBoxSize;

  #ifdef ADD_HELPERS
  v_responsiveHelperBox = uv;
  v_responsiveHelperBox *= responsiveBoxScale;
  v_responsiveHelperBox += boxOrigin * (responsiveBoxScale - 1.);
  #endif

  v_responsiveUV = uv;
  v_responsiveUV *= responsiveBoxScale;
  v_responsiveUV += boxOrigin * (responsiveBoxScale - 1.);
  v_responsiveUV += graphicOffset;
  v_responsiveUV /= u_scale;
  v_responsiveUV.x *= responsiveRatio;
  v_responsiveUV = graphicRotation * v_responsiveUV;
  v_responsiveUV.x /= responsiveRatio;

  // ===================================================

  float patternBoxRatio = givenBoxSize.x / givenBoxSize.y;
  vec2 patternBoxGivenSize = vec2(
  (u_worldWidth == 0.) ? u_resolution.x : givenBoxSize.x,
  (u_worldHeight == 0.) ? u_resolution.y : givenBoxSize.y
  );
  patternBoxRatio = patternBoxGivenSize.x / patternBoxGivenSize.y;

  vec3 boxSizeData = getBoxSize(patternBoxRatio, patternBoxGivenSize);
  v_patternBoxSize = boxSizeData.xy;
  float patternBoxNoFitBoxWidth = boxSizeData.z;
  vec2 patternBoxScale = u_resolution.xy / v_patternBoxSize;

  v_patternUV = uv;
  v_patternUV += graphicOffset / patternBoxScale;
  v_patternUV += boxOrigin;
  v_patternUV -= boxOrigin / patternBoxScale;
  v_patternUV *= u_resolution.xy;
  v_patternUV /= u_pixelRatio;
  if (u_fit > 0.) {
    v_patternUV *= (patternBoxNoFitBoxWidth / v_patternBoxSize.x);
  }
  v_patternUV /= u_scale;
  v_patternUV = graphicRotation * v_patternUV;
  v_patternUV += boxOrigin / patternBoxScale;
  v_patternUV -= boxOrigin;
  // x100 is a default multiplier between vertex and fragmant shaders
  // we use it to avoid UV presision issues
  v_patternUV *= .01;

  // ===================================================

  vec2 imageBoxSize;
  if (u_fit == 1.) { // contain
    imageBoxSize.x = min(u_resolution.x / u_imageAspectRatio, u_resolution.y) * u_imageAspectRatio;
  } else if (u_fit == 2.) { // cover
    imageBoxSize.x = max(u_resolution.x / u_imageAspectRatio, u_resolution.y) * u_imageAspectRatio;
  } else {
    imageBoxSize.x = min(10.0, 10.0 / u_imageAspectRatio * u_imageAspectRatio);
  }
  imageBoxSize.y = imageBoxSize.x / u_imageAspectRatio;
  vec2 imageBoxScale = u_resolution.xy / imageBoxSize;

  v_imageUV = uv;
  v_imageUV *= imageBoxScale;
  v_imageUV += boxOrigin * (imageBoxScale - 1.);
  v_imageUV += graphicOffset;
  v_imageUV /= u_scale;
  v_imageUV.x *= u_imageAspectRatio;
  v_imageUV = graphicRotation * v_imageUV;
  v_imageUV.x /= u_imageAspectRatio;

  v_imageUV += .5;
  v_imageUV.y = 1. - v_imageUV.y;
}`,tx=1920*1080*4;let iR=class{parentElement;canvasElement;gl;program=null;uniformLocations={};fragmentShader;rafId=null;lastRenderTime=0;currentFrame=0;speed=0;currentSpeed=0;providedUniforms;mipmaps=[];hasBeenDisposed=!1;resolutionChanged=!0;textures=new Map;minPixelRatio;maxPixelCount;isSafari=lR();uniformCache={};textureUnitMap=new Map;constructor(e,n,r,i,s=0,l=0,u=2,c=tx,d=[]){if(e instanceof HTMLElement)this.parentElement=e;else throw new Error("Paper Shaders: parent element must be an HTMLElement");if(!document.querySelector("style[data-paper-shader]")){const g=document.createElement("style");g.innerHTML=oR,g.setAttribute("data-paper-shader",""),document.head.prepend(g)}const h=document.createElement("canvas");this.canvasElement=h,this.parentElement.prepend(h),this.fragmentShader=n,this.providedUniforms=r,this.mipmaps=d,this.currentFrame=l,this.minPixelRatio=u,this.maxPixelCount=c;const m=h.getContext("webgl2",i);if(!m)throw new Error("Paper Shaders: WebGL is not supported in this browser");this.gl=m,this.initProgram(),this.setupPositionAttribute(),this.setupUniforms(),this.setUniformValues(this.providedUniforms),this.setupResizeObserver(),visualViewport?.addEventListener("resize",this.handleVisualViewportChange),this.setSpeed(s),this.parentElement.setAttribute("data-paper-shader",""),this.parentElement.paperShaderMount=this,document.addEventListener("visibilitychange",this.handleDocumentVisibilityChange)}initProgram=()=>{const e=sR(this.gl,rR,this.fragmentShader);e&&(this.program=e)};setupPositionAttribute=()=>{const e=this.gl.getAttribLocation(this.program,"a_position"),n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n);const r=[-1,-1,1,-1,-1,1,-1,1,1,-1,1,1];this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(r),this.gl.STATIC_DRAW),this.gl.enableVertexAttribArray(e),this.gl.vertexAttribPointer(e,2,this.gl.FLOAT,!1,0,0)};setupUniforms=()=>{const e={u_time:this.gl.getUniformLocation(this.program,"u_time"),u_pixelRatio:this.gl.getUniformLocation(this.program,"u_pixelRatio"),u_resolution:this.gl.getUniformLocation(this.program,"u_resolution")};Object.entries(this.providedUniforms).forEach(([n,r])=>{if(e[n]=this.gl.getUniformLocation(this.program,n),r instanceof HTMLImageElement){const i=`${n}AspectRatio`;e[i]=this.gl.getUniformLocation(this.program,i)}}),this.uniformLocations=e};renderScale=1;parentWidth=0;parentHeight=0;parentDevicePixelWidth=0;parentDevicePixelHeight=0;devicePixelsSupported=!1;resizeObserver=null;setupResizeObserver=()=>{this.resizeObserver=new ResizeObserver(([e])=>{if(e?.borderBoxSize[0]){const n=e.devicePixelContentBoxSize?.[0];n!==void 0&&(this.devicePixelsSupported=!0,this.parentDevicePixelWidth=n.inlineSize,this.parentDevicePixelHeight=n.blockSize),this.parentWidth=e.borderBoxSize[0].inlineSize,this.parentHeight=e.borderBoxSize[0].blockSize}this.handleResize()}),this.resizeObserver.observe(this.parentElement)};handleVisualViewportChange=()=>{this.resizeObserver?.disconnect(),this.setupResizeObserver()};handleResize=()=>{let e=0,n=0;const r=Math.max(1,window.devicePixelRatio),i=visualViewport?.scale??1;if(this.devicePixelsSupported){const h=Math.max(1,this.minPixelRatio/r);e=this.parentDevicePixelWidth*h*i,n=this.parentDevicePixelHeight*h*i}else{let h=Math.max(r,this.minPixelRatio)*i;if(this.isSafari){const m=aR();h*=Math.max(1,m)}e=Math.round(this.parentWidth)*h,n=Math.round(this.parentHeight)*h}const s=Math.sqrt(this.maxPixelCount)/Math.sqrt(e*n),l=Math.min(1,s),u=Math.round(e*l),c=Math.round(n*l),d=u/Math.round(this.parentWidth);(this.canvasElement.width!==u||this.canvasElement.height!==c||this.renderScale!==d)&&(this.renderScale=d,this.canvasElement.width=u,this.canvasElement.height=c,this.resolutionChanged=!0,this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.render(performance.now()))};render=e=>{if(this.hasBeenDisposed)return;if(this.program===null){console.warn("Tried to render before program or gl was initialized");return}const n=e-this.lastRenderTime;this.lastRenderTime=e,this.currentSpeed!==0&&(this.currentFrame+=n*this.currentSpeed),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.uniform1f(this.uniformLocations.u_time,this.currentFrame*.001),this.resolutionChanged&&(this.gl.uniform2f(this.uniformLocations.u_resolution,this.gl.canvas.width,this.gl.canvas.height),this.gl.uniform1f(this.uniformLocations.u_pixelRatio,this.renderScale),this.resolutionChanged=!1),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.currentSpeed!==0?this.requestRender():this.rafId=null};requestRender=()=>{this.rafId!==null&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(this.render)};setTextureUniform=(e,n)=>{if(!n.complete||n.naturalWidth===0)throw new Error(`Paper Shaders: image for uniform ${e} must be fully loaded`);const r=this.textures.get(e);r&&this.gl.deleteTexture(r),this.textureUnitMap.has(e)||this.textureUnitMap.set(e,this.textureUnitMap.size);const i=this.textureUnitMap.get(e);this.gl.activeTexture(this.gl.TEXTURE0+i);const s=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this.mipmaps.includes(e)&&(this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR));const l=this.gl.getError();if(l!==this.gl.NO_ERROR||s===null){console.error("Paper Shaders: WebGL error when uploading texture:",l);return}this.textures.set(e,s);const u=this.uniformLocations[e];if(u){this.gl.uniform1i(u,i);const c=`${e}AspectRatio`,d=this.uniformLocations[c];if(d){const h=n.naturalWidth/n.naturalHeight;this.gl.uniform1f(d,h)}}};areUniformValuesEqual=(e,n)=>e===n?!0:Array.isArray(e)&&Array.isArray(n)&&e.length===n.length?e.every((r,i)=>this.areUniformValuesEqual(r,n[i])):!1;setUniformValues=e=>{this.gl.useProgram(this.program),Object.entries(e).forEach(([n,r])=>{let i=r;if(r instanceof HTMLImageElement&&(i=`${r.src.slice(0,200)}|${r.naturalWidth}x${r.naturalHeight}`),this.areUniformValuesEqual(this.uniformCache[n],i))return;this.uniformCache[n]=i;const s=this.uniformLocations[n];if(!s){console.warn(`Uniform location for ${n} not found`);return}if(r instanceof HTMLImageElement)this.setTextureUniform(n,r);else if(Array.isArray(r)){let l=null,u=null;if(r[0]!==void 0&&Array.isArray(r[0])){const c=r[0].length;if(r.every(d=>d.length===c))l=r.flat(),u=c;else{console.warn(`All child arrays must be the same length for ${n}`);return}}else l=r,u=l.length;switch(u){case 2:this.gl.uniform2fv(s,l);break;case 3:this.gl.uniform3fv(s,l);break;case 4:this.gl.uniform4fv(s,l);break;case 9:this.gl.uniformMatrix3fv(s,!1,l);break;case 16:this.gl.uniformMatrix4fv(s,!1,l);break;default:console.warn(`Unsupported uniform array length: ${u}`)}}else typeof r=="number"?this.gl.uniform1f(s,r):typeof r=="boolean"?this.gl.uniform1i(s,r?1:0):console.warn(`Unsupported uniform type for ${n}: ${typeof r}`)})};getCurrentFrame=()=>this.currentFrame;setFrame=e=>{this.currentFrame=e,this.lastRenderTime=performance.now(),this.render(performance.now())};setSpeed=(e=1)=>{this.speed=e,this.setCurrentSpeed(document.hidden?0:e)};setCurrentSpeed=e=>{this.currentSpeed=e,this.rafId===null&&e!==0&&(this.lastRenderTime=performance.now(),this.rafId=requestAnimationFrame(this.render)),this.rafId!==null&&e===0&&(cancelAnimationFrame(this.rafId),this.rafId=null)};setMaxPixelCount=(e=tx)=>{this.maxPixelCount=e,this.handleResize()};setMinPixelRatio=(e=2)=>{this.minPixelRatio=e,this.handleResize()};setUniforms=e=>{this.setUniformValues(e),this.providedUniforms={...this.providedUniforms,...e},this.render(performance.now())};handleDocumentVisibilityChange=()=>{this.setCurrentSpeed(document.hidden?0:this.speed)};dispose=()=>{this.hasBeenDisposed=!0,this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.gl&&this.program&&(this.textures.forEach(e=>{this.gl.deleteTexture(e)}),this.textures.clear(),this.gl.deleteProgram(this.program),this.program=null,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.getError()),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),visualViewport?.removeEventListener("resize",this.handleVisualViewportChange),document.removeEventListener("visibilitychange",this.handleDocumentVisibilityChange),this.uniformLocations={},this.canvasElement.remove(),delete this.parentElement.paperShaderMount}};function nx(t,e,n){const r=t.createShader(e);return r?(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)):null}function sR(t,e,n){const r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT),i=r?r.precision:null;i&&i<23&&(e=e.replace(/precision\s+(lowp|mediump)\s+float;/g,"precision highp float;"),n=n.replace(/precision\s+(lowp|mediump)\s+float/g,"precision highp float").replace(/\b(uniform|varying|attribute)\s+(lowp|mediump)\s+(\w+)/g,"$1 highp $3"));const s=nx(t,t.VERTEX_SHADER,e),l=nx(t,t.FRAGMENT_SHADER,n);if(!s||!l)return null;const u=t.createProgram();return u?(t.attachShader(u,s),t.attachShader(u,l),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)?(t.detachShader(u,s),t.detachShader(u,l),t.deleteShader(s),t.deleteShader(l),u):(console.error("Unable to initialize the shader program: "+t.getProgramInfoLog(u)),t.deleteProgram(u),t.deleteShader(s),t.deleteShader(l),null)):null}const oR=`@layer paper-shaders {
  :where([data-paper-shader]) {
    isolation: isolate;
    position: relative;

    & canvas {
      contain: strict;
      display: block;
      position: absolute;
      inset: 0;
      z-index: -1;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      corner-shape: inherit;
    }
  }
}`;function lR(){const t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")&&!t.includes("android")}function aR(){const t=visualViewport?.scale??1,e=visualViewport?.width??window.innerWidth,n=window.innerWidth-document.documentElement.clientWidth,r=t*e+n,i=outerWidth/r,s=Math.round(100*i);return s%5===0?s/100:s===33?1/3:s===67?2/3:s===133?4/3:i}const uR={fit:"contain",scale:1,rotation:0,offsetX:0,offsetY:0,originX:.5,originY:.5,worldWidth:0,worldHeight:0},cR={none:0,contain:1,cover:2},fR=`
#define TWO_PI 6.28318530718
#define PI 3.14159265358979323846
`,dR=`
vec2 rotate(vec2 uv, float th) {
  return mat2(cos(th), sin(th), -sin(th), cos(th)) * uv;
}
`,hR=`
  float randomR(vec2 p) {
    vec2 uv = floor(p) / 100. + .5;
    return texture(u_noiseTexture, fract(uv)).r;
  }
`,pR=`
float fiberRandom(vec2 p) {
  vec2 uv = floor(p) / 100.;
  return texture(u_noiseTexture, fract(uv)).b;
}

float fiberValueNoise(vec2 st) {
  vec2 i = floor(st);
  vec2 f = fract(st);
  float a = fiberRandom(i);
  float b = fiberRandom(i + vec2(1.0, 0.0));
  float c = fiberRandom(i + vec2(0.0, 1.0));
  float d = fiberRandom(i + vec2(1.0, 1.0));
  vec2 u = f * f * (3.0 - 2.0 * f);
  float x1 = mix(a, b, u.x);
  float x2 = mix(c, d, u.x);
  return mix(x1, x2, u.y);
}

float fiberNoiseFbm(in vec2 n, vec2 seedOffset) {
  float total = 0.0, amplitude = 1.;
  for (int i = 0; i < 4; i++) {
    n = rotate(n, .7);
    total += fiberValueNoise(n + seedOffset) * amplitude;
    n *= 2.;
    amplitude *= 0.6;
  }
  return total;
}

float fiberNoise(vec2 uv, vec2 seedOffset) {
  float epsilon = 0.001;
  float n1 = fiberNoiseFbm(uv + vec2(epsilon, 0.0), seedOffset);
  float n2 = fiberNoiseFbm(uv - vec2(epsilon, 0.0), seedOffset);
  float n3 = fiberNoiseFbm(uv + vec2(0.0, epsilon), seedOffset);
  float n4 = fiberNoiseFbm(uv - vec2(0.0, epsilon), seedOffset);
  return length(vec2(n1 - n2, n3 - n4)) / (2.0 * epsilon);
}
`,mR=`#version 300 es
precision mediump float;

uniform vec2 u_resolution;
uniform float u_pixelRatio;

uniform vec4 u_colorFront;
uniform vec4 u_colorBack;

uniform sampler2D u_image;
uniform float u_imageAspectRatio;

uniform float u_contrast;
uniform float u_roughness;
uniform float u_fiber;
uniform float u_fiberSize;
uniform float u_crumples;
uniform float u_crumpleSize;
uniform float u_folds;
uniform float u_foldCount;
uniform float u_drops;
uniform float u_seed;
uniform float u_fade;

uniform sampler2D u_noiseTexture;

in vec2 v_imageUV;

out vec4 fragColor;

float getUvFrame(vec2 uv) {
  float aax = 2. * fwidth(uv.x);
  float aay = 2. * fwidth(uv.y);

  float left   = smoothstep(0., aax, uv.x);
  float right = 1. - smoothstep(1. - aax, 1., uv.x);
  float bottom = smoothstep(0., aay, uv.y);
  float top = 1. - smoothstep(1. - aay, 1., uv.y);

  return left * right * bottom * top;
}

${fR}
${dR}
${hR}
float valueNoise(vec2 st) {
  vec2 i = floor(st);
  vec2 f = fract(st);
  float a = randomR(i);
  float b = randomR(i + vec2(1.0, 0.0));
  float c = randomR(i + vec2(0.0, 1.0));
  float d = randomR(i + vec2(1.0, 1.0));
  vec2 u = f * f * (3.0 - 2.0 * f);
  float x1 = mix(a, b, u.x);
  float x2 = mix(c, d, u.x);
  return mix(x1, x2, u.y);
}
float fbm(vec2 n) {
  float total = 0.0, amplitude = .4;
  for (int i = 0; i < 3; i++) {
    total += valueNoise(n) * amplitude;
    n *= 1.99;
    amplitude *= 0.65;
  }
  return total;
}


float randomG(vec2 p) {
  vec2 uv = floor(p) / 50. + .5;
  return texture(u_noiseTexture, fract(uv)).g;
}
float roughness(vec2 p) {
  p *= .1;
  float o = 0.;
  for (float i = 0.; ++i < 4.; p *= 2.1) {
    vec4 w = vec4(floor(p), ceil(p));
    vec2 f = fract(p);
    o += mix(
    mix(randomG(w.xy), randomG(w.xw), f.y),
    mix(randomG(w.zy), randomG(w.zw), f.y),
    f.x);
    o += .2 / exp(2. * abs(sin(.2 * p.x + .5 * p.y)));
  }
  return o / 3.;
}

${pR}

vec2 randomGB(vec2 p) {
  vec2 uv = floor(p) / 50. + .5;
  return texture(u_noiseTexture, fract(uv)).gb;
}
float crumpledNoise(vec2 t, float pw) {
  vec2 p = floor(t);
  float wsum = 0.;
  float cl = 0.;
  for (int y = -1; y < 2; y += 1) {
    for (int x = -1; x < 2; x += 1) {
      vec2 b = vec2(float(x), float(y));
      vec2 q = b + p;
      vec2 q2 = q - floor(q / 8.) * 8.;
      vec2 c = q + randomGB(q2);
      vec2 r = c - t;
      float w = pow(smoothstep(0., 1., 1. - abs(r.x)), pw) * pow(smoothstep(0., 1., 1. - abs(r.y)), pw);
      cl += (.5 + .5 * sin((q2.x + q2.y * 5.) * 8.)) * w;
      wsum += w;
    }
  }
  return pow(wsum != 0.0 ? cl / wsum : 0.0, .5) * 2.;
}
float crumplesShape(vec2 uv) {
  return crumpledNoise(uv * .25, 16.) * crumpledNoise(uv * .5, 2.);
}


vec2 folds(vec2 uv) {
  vec3 pp = vec3(0.);
  float l = 9.;
  for (float i = 0.; i < 15.; i++) {
    if (i >= u_foldCount) break;
    vec2 rand = randomGB(vec2(i, i * u_seed));
    float an = rand.x * TWO_PI;
    vec2 p = vec2(cos(an), sin(an)) * rand.y;
    float dist = distance(uv, p);
    l = min(l, dist);

    if (l == dist) {
      pp.xy = (uv - p.xy);
      pp.z = dist;
    }
  }
  return mix(pp.xy, vec2(0.), pow(pp.z, .25));
}

float drops(vec2 uv) {
  vec2 iDropsUV = floor(uv);
  vec2 fDropsUV = fract(uv);
  float dropsMinDist = 1.;
  for (int j = -1; j <= 1; j++) {
    for (int i = -1; i <= 1; i++) {
      vec2 neighbor = vec2(float(i), float(j));
      vec2 offset = randomGB(iDropsUV + neighbor);
      offset = .5 + .5 * sin(10. * u_seed + TWO_PI * offset);
      vec2 pos = neighbor + offset - fDropsUV;
      float dist = length(pos);
      dropsMinDist = min(dropsMinDist, dropsMinDist*dist);
    }
  }
  return 1. - smoothstep(.05, .09, pow(dropsMinDist, .5));
}

float lst(float edge0, float edge1, float x) {
  return clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
}

void main() {

  vec2 imageUV = v_imageUV;
  vec2 patternUV = v_imageUV - .5;
  patternUV = 5. * (patternUV * vec2(u_imageAspectRatio, 1.));

  vec2 roughnessUv = 1.5 * (gl_FragCoord.xy - .5 * u_resolution) / u_pixelRatio;
  float roughness = roughness(roughnessUv + vec2(1., 0.)) - roughness(roughnessUv - vec2(1., 0.));

  vec2 crumplesUV = fract(patternUV * .02 / u_crumpleSize - u_seed) * 32.;
  float crumples = u_crumples * (crumplesShape(crumplesUV + vec2(.05, 0.)) - crumplesShape(crumplesUV));

  vec2 fiberUV = 2. / u_fiberSize * patternUV;
  float fiber = fiberNoise(fiberUV, vec2(0.));
  fiber = .5 * u_fiber * (fiber - 1.);

  vec2 normal = vec2(0.);
  vec2 normalImage = vec2(0.);

  vec2 foldsUV = patternUV * .12;
  foldsUV = rotate(foldsUV, 4. * u_seed);
  vec2 w = folds(foldsUV);
  foldsUV = rotate(foldsUV + .007 * cos(u_seed), .01 * sin(u_seed));
  vec2 w2 = folds(foldsUV);

  float drops = u_drops * drops(patternUV * 2.);

  float fade = u_fade * fbm(.17 * patternUV + 10. * u_seed);
  fade = clamp(8. * fade * fade * fade, 0., 1.);

  w = mix(w, vec2(0.), fade);
  w2 = mix(w2, vec2(0.), fade);
  crumples = mix(crumples, 0., fade);
  drops = mix(drops, 0., fade);
  fiber *= mix(1., .5, fade);
  roughness *= mix(1., .5, fade);

  normal.xy += u_folds * min(5. * u_contrast, 1.) * 4. * max(vec2(0.), w + w2);
  normalImage.xy += u_folds * 2. * w;

  normal.xy += crumples;
  normalImage.xy += 1.5 * crumples;

  normal.xy += 3. * drops;
  normalImage.xy += .2 * drops;

  normal.xy += u_roughness * 1.5 * roughness;
  normal.xy += fiber;

  normalImage += u_roughness * .75 * roughness;
  normalImage += .2 * fiber;

  vec3 lightPos = vec3(1., 2., 1.);
  float res = dot(normalize(vec3(normal, 9.5 - 9. * pow(u_contrast, .1))), normalize(lightPos));

  vec3 fgColor = u_colorFront.rgb * u_colorFront.a;
  float fgOpacity = u_colorFront.a;
  vec3 bgColor = u_colorBack.rgb * u_colorBack.a;
  float bgOpacity = u_colorBack.a;

  imageUV += .02 * normalImage;
  float frame = getUvFrame(imageUV);
  vec4 image = texture(u_image, imageUV);
  image.rgb += .6 * pow(u_contrast, .4) * (res - .7);

  frame *= image.a;

  vec3 color = fgColor * res;
  float opacity = fgOpacity * res;

  color += bgColor * (1. - opacity);
  opacity += bgOpacity * (1. - opacity);
  opacity = mix(opacity, 1., frame);

  color -= .007 * drops;

  color.rgb = mix(color, image.rgb, frame);

  fragColor = vec4(color, opacity);
}
`;function rx(t){if(Array.isArray(t))return t.length===4?t:t.length===3?[...t,1]:$d;if(typeof t!="string")return $d;let e,n,r,i=1;if(t.startsWith("#"))[e,n,r,i]=gR(t);else if(t.startsWith("rgb"))[e,n,r,i]=yR(t);else if(t.startsWith("hsl"))[e,n,r,i]=xR(vR(t));else return console.error("Unsupported color format",t),$d;return[nu(e,0,1),nu(n,0,1),nu(r,0,1),nu(i,0,1)]}function gR(t){t=t.replace(/^#/,""),t.length===3&&(t=t.split("").map(s=>s+s).join("")),t.length===6&&(t=t+"ff");const e=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255,r=parseInt(t.slice(4,6),16)/255,i=parseInt(t.slice(6,8),16)/255;return[e,n,r,i]}function yR(t){const e=t.match(/^rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([0-9.]+))?\s*\)$/i);return e?[parseInt(e[1]??"0")/255,parseInt(e[2]??"0")/255,parseInt(e[3]??"0")/255,e[4]===void 0?1:parseFloat(e[4])]:[0,0,0,1]}function vR(t){const e=t.match(/^hsla?\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*([0-9.]+))?\s*\)$/i);return e?[parseInt(e[1]??"0"),parseInt(e[2]??"0"),parseInt(e[3]??"0"),e[4]===void 0?1:parseFloat(e[4])]:[0,0,0,1]}function xR(t){const[e,n,r,i]=t,s=e/360,l=n/100,u=r/100;let c,d,h;if(n===0)c=d=h=u;else{const m=(S,k,w)=>(w<0&&(w+=1),w>1&&(w-=1),w<.16666666666666666?S+(k-S)*6*w:w<.5?k:w<.6666666666666666?S+(k-S)*(.6666666666666666-w)*6:S),g=u<.5?u*(1+l):u+l-u*l,v=2*u-g;c=m(v,g,s+1/3),d=m(v,g,s),h=m(v,g,s-1/3)}return[c,d,h,i]}const nu=(t,e,n)=>Math.min(Math.max(t,e),n),$d=[0,0,0,1];function SR(){if(typeof window>"u")return;const t=new Image;return t.src=wR,t}const wR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAADAFBMVEUCAQMBAf7/AgMD/wID//7+/wT+A/4FAmYIAqIKnw7+//4EAisEAUgGBIYIewkFVhEJjAoFAuEFA8GWAv6T/gz+AzER/25z/wu1/w1nAggL/049BQUC/y39BrckAQQp/wr+AZYNOvx9AQkN/pELUvMFaAZTBAgIRgsO/7cJNQT+YgkLwRELIf5O/wlP/v79/q4IGAYLK4+kAQ1tAv4IdMpc/4xNMBF2/lQN2vTFAws9BLf9/3kJJgsMRF3+HwkLxfv9BVL8BHEN/9gMsg7cA/13/vv9OAqWA0sOofP9TAsIe/4FQqoF4Q/aAgsQwnKQAwa5BP0JW21NqgmY/f3Z/wkI7whGjAr7oAkLrGGf/JH8jg4zAj4R0Qr+xQ8VZv1Y/8O6//wfA/5bAT79/lQ1AGn8egkKdom0BgYOsfjtBAVDBoz9/zG0A238P/tsbQ/+A9rIig/HCEtvIgrM/1lwBWgIlmr62Q5qA5FndnEIXa+PthUMrqiRfw6SAodE/0cQm6UOirP5swuMCrEOjvo/dBVSA/79KvCgSBL9M1E/TwjUag/e//2WdPZ2TQ9ZMvfPxRD7aPpmOFqXSPu3pww5B/wR00wTgVf3y6dXW137ffv3c7GNj/icJG+4xvYQ61++CZOVll8p//uXzgyTKg6m/1L47w3cAY8EI1T7xvgKbkr7UsGBJPNsB7xL2wuvd5z3svmDmgipcGT8jez8oP0R6bNYuVpUxRn9LZVkqIijYxK7K/dZBtjH/71ZT/1myfz52fVm2WBfk0vxUFj+Vfv9/9plbfz3yl6VUl+flbNijrpfpfz5TZSGRKAI15X14pSt4vwQKMHOTQlKifz1sKW6A9u2A7R65waprffGcfeY/8iyUsFh3rn4lGERMUHJolveAs+PBdb5iZFuX8S8SH7Ekfe8Lwy0t5cLwsD3s2TzbHXa/478nLtNQ6NtstW15QvaKgr25FJm4vyXwFlPInIPId79dUr77fmr18BGdLHIS/mGx6dKw64L7v6k32XMJrWl8ELA3C70AAAgAElEQVR42gTBCTyUeQMA4P97zIx3ZjDvHGaMYQxjhhm33BGTY8h95sodkaNkXVGhKGdUri+SIxQ6nG36VUhS0rnZ6tsVfR2ibKlta7/d5wH7kMaTxlOVozEoHgU29/ayNC9YlrZdyVT+Lf/dAsDDc/xfzX+MLBa2LK23goK0aXhCxZ8qIAdXYj+c8zviDOtRkhEtRxNajHWLuCtdcfQqV2mgRlpDD6wJpKpBrGON27qa4nNeQOU8ViU0pZ2eCMN5mWO7bfR17Q9ItpsqgZJNJcJSq6cSWiV4q1zIDMmkqzAdpqT8gI5G3qm3YEyliPPG9kiwF7P99ghNn7zLs9EXFvFdLmlOdKBAp2ZyGTcI4JuBPYrWyGCYwgFwOhTmHeYC0zEDSp1iX3W71cqoW332M++OAYJUrEySVX0c5lzmDgLcAQ1yFVVOgQ5l+j1k6TEBidTUek7OF4T2kDYo2eVGwOrglKyGBXYyBrxFv9ptR16B+BJ0IFCsryJve0ZEuzNjLeEcw/0aK/kyku6JW0BiicnCBFptKAQRRNRrtmUV/YOn6GNMHXddsFf1YZCHMnFWgcyp2gnLOWTTBcVQVvM/FTgJAHl0NWHHzL0eqzuRXTDCEO03DoThV3kezhrtpNqKW0Bb3MSSAJMmmVnLEpexS8JrmYOr4KXz1cUmByty3N/sbEzBSP8tfGSCJ3caYDhymsPdGbwO4HAl/+PYDCZNf+H6kofkNk4N4Zn6NM4y1lJD7Tt2gyklnrR48dgbfHXgd9uzHvpamm3wKhcaLcawXWxL5T97dL7MeW3aZ7NDWksVZyZv8VQyjm94CDU7UjtbedqOCvB2DdE+wFC6a5JcEIgkKRJ8cfTGmW/2jMS5LEWWKiGY0BFaDNQ++2+sOifPMQ7CcHeFx+PPpcbzRoy4IKmVwHg/1842BwoGc2qlRVoNjCF59oXsrcBgVEP4u1GIX7jshIMqqPdbGTRJzMXcyyyiNG5fr5qFrUVntrktt4QdJugkr1kzNJCK1roWpTraix9JVMpZcsxGYsJlGiSyEgOFZzHy6YVlilnicmxUVkdX/PetzMBk92PNJNkIaLhmA30XPCrMuncWxOZK9kpLnqpYOOsLFFmaf2Mk8OH+BbwPH7HBX2KGI0Ns80gleH+Y6k0YZcF0sWgpoJA30BBbG59XaKyBHoxFtc2p9sFvyXqo2v2aRKN+1HLPshCibfZESAESYsLXmz3tT4wNMp0Wali+VPN93JIJaQ0AcXGrNMnSS0YASPcaNh32NhO0sWHKPhrNVpCBzyk4EWR/PnmKE+3s2cDO+YF6OddPNx7G4AIrZBPldw6tcss4bqzb6hBy6ccf3YaBSNRBFELueRFp7DXWNMFVAT9J1LNTntEyEI2gJS64oyKMKvSRrbpPQGE0rEEmHyqCl2oQravq51FwJXG0m/pPdRA6Xp3sSLdwGwNytaLg3g3VEE2eFESy/GijQPwmYPjwJT+bH/ax0dNT0NZAFQxyIqKzET00vUDuJ+T25QGCclaGZiJBxsjtz3YMZ0PPsq751h0ldwbZstMgHfnauk/7n1eZxEmYIPf5wPt0KJvg2V9bcYWGgua/Lvn/xG5q98tPLcGzHaac2+Cbs3niyPtGgfYgBT2OHgxvhGxzApoPxPoCOtUNCXX+ojW0ug7DOuyrOOG5GkWhaAzx6ZyGE8qbCPS1oxzPjcWSrG/ICNaNMKsra8bIlQVvmRQ/FY4WiHhnrVz/VfdOiOu6u66gG3NKogJ/0rGdbC+iPN1pbZ4HQAZODS+mC2z9dNBqSzd6mTQWKq+EI3fXgJQdqfqz6jY6Fbs4sWT/QkaLUOBnMhWRmSdrpTy769BcCql1UOmaqtFbDA9d7qEox8Lpa+TPXX+xm40jrB7EBK1lwu6IMud9xh7NBZCbq6PNN/QdTu0BVa2neF+s8b1dGns5tMGxQIP/+fiY60jZNp9n5D9MLm4NLWO2gXVG4xwDXHeHXMFEAITOVUGJRoBUwOV3miiTEPPzLrwDm74zFsW9zkfCASQvPi2RaF9qJ2HHWMJNxCHzDym6tNfXiEe28ZnjmHVGwlSvfgBo4afqcoTh4NNq7QQ1KrPJW+1uHEK1VvTghGa0DAePo8D6D1NCYgEPY239D/RQSUMxWJsAIi5KEp/3/9LH1wSTwl8/mfekwWyIhAwMPErzWxVSL7sFnFT1NqJ+Zb8hX4cqwyucXdUVkaqNeVL7abNtJV++aASn/d+Fw9qlVwplz4SqpVw5CBK7nq483nxbZ8p/8TtFwr8oD5uhq+lxfovd0x4+MHo1Wv14SJzqBo9Un1KCZ8NWfbA7jLeoMjnCcS8bjtKuxii0+0RPZlLS6NdhNKHeN2NSdCswa+K+aGFUTD9MLW9R7mhPT5i88TZvV5rWtuek07W/vBev9eJznPGkM8FrCZ53AB8+Ig7vKms99yRb5fpyoQssijTwz0i22O+HvjsjyGXpqseb4t4j6YW86PfJF2cnjmy8EKVF8sIomGUdVGBquOIDIlHsrgPkJEzw7KovqHB/kS+NPgs9nG9FkG1MJiA0GNwTyj5dRS0uiWTfSLf7jpL0ioLExajL/OJPkUbA6CIdKjpU6XrSY/6mE5Z1IDBoHX7tGx9fFkJZQPrPIW49pj9oUEykkiolzaein8mBh/C/0eAzYoFXHWJxYZWrv/ayPmcWsjfWyDy8ndnmPTldcJ05MaxOoIHWPcND2SOan44Wc1Oxyk59KHbiXwbrxB3qvAEA+Pd3zc3MkDFmxjG3K4ZxjHHfFXKNI691kyRLjmRCUmTQWnQo6XS8JNFBsTkqiRQpijalraTe1VPbpa1394/4PM+naUIl5jb9OQw4tXHsFyAoD/x8vmlYJu23hfowcTnJOXSMUdKum4IqKUd4HJguRiprd/Etw9K/NJ+UKE+T2v39ms2JRGhtNDxShw6kmZEdsr6fwVSzZUCgj/xK8CaD46MMqjtVmEE0DTPS7yo7so402lkAAr5A9TA8YbapYO+4tLHK+uBAqCsdrmkNB/tSNQxgrZRiBjhVSt904TQbBmEDW36UhZEwZN9TbWh1vtrLVYdkQKayJHgjO5aVftyaOhbtIVFjq0gImWcFJbXqPp+aGTaOzHzPptvWbli/tEz5BHs2WdU4y01sOWIdG+CPWbxSDnQ/KbYgddG1ggtPPUFvXeLdNH2EoslAveJl8GUVaLs6WWsoo3G2Q8KnvSkrNV13rJm4fF2jG2NKE3FMgjWPyCyVVZXDxk0WKQyzIcdGvhovfXwvS237WZN3PvX9Dh50V1CMuemc5AkPWBJzzlg8giqz/M3mICBajNsO3PSuByw3zV51gCTybHlfu/R+zXwVekhzN1C0gZCgqc3x8EUR5Mt8LndPRv3AbLnf2ZMLJ2TZBapthY8hSsIET5/vpH1T7/l1IKZl4pTp2eMVFT8J+1JyElnizM32GmBQTaTDJOwuvPCV3QDonD/6xjwgR6SA92MF+v+Xlo/BDyOZJpkM7QFh73uKxzX9hlDol/x5HVESyPM/HNyF6MwCg866UWXm9Jd2xsjrXyEKgjl11K41nEwzFzjyP0V9T87dStAustB/MkOwBaQoOCNG0+6dfSw2YIL2d+aAFbtewoPIATWJC+6il2nDFDx8Vlxg2a22oZG4My48gnrQEcDxOuE71wz51mkfvC3B8gjF04baNRpg6SGoHIAc+zB2Qqqn9yEzCXfpmpdN2kxdkiMQ/W/X7iT/RzkpBGvlGrx2Bs4pl3s8Akl3mRTsubk3x+CQH47r1ZNgECzf7IP0nV8lRUj1XqsW9+wNI0+oAx/lOGVsHcmalqdAqT/Rb+rp3wthEPxjXI6irxhTZc9U20OHSbYAJCX6MKHYW/P8XRlyam7KHfk5VTu8Tmebd889NmQ7hiuPb6bQu8inM/FOXkO7iEWd9hgyBVEErR+8P+Om2lFcXGp8DGe734LHfS2Pk7/pzSwPvdrkd7/NgVo0V8s5ir4NYME0CzGbOVoiygQKh+vexBN5PkUBa1bYInKhFqBi7f3FP9xdy5wmH5ByEL6YmlsN4H+lvQJBG8TSvwBmhcGUafV9uPlIYlkx7S81YuG+rzfC3Eb07PGLSnvKO1ujlkiGMoliWkYJ6XYpHzhP4z5odeImZqKxZT1hFN+arPz5Dw2e00ODXsBCGrf4jB+45ZT7UrN7VBRUYgrUJx0WkxNyMCSxRCIYwgyqxP8Zv9VC+6aiUgB0eIt08YI0fh2ZFRqSilUuRRvmt5jejdoSCjfaRFSca6RXh9kVAjX/OeC8Fbgdo+Ffx9K0zF8p4sLEk27kG2vWNThL82M/h1BScI2Kr8fOKkYdh+WXxAYVPhsD11sx5SDIEyx5CGwE1cQ3osdYdlEP3/AZPwvH8oc1WdqXU/OM6fdPELtY9JRSNHEepmC3ZWgsLZss2H2qwq00xxA81SAexVdwbL1ektQlJeVMZAGObIMXLK5lkb95dhjMzkc/Lq17iiAPa1uAovfIZZLe/kaNzRCUCr39gjN5YW18DwBEKdQkVriaJc5BKEHi5s3DEMukQIe9bStXDHyciJ0Xv84FSgb6OW6WuhFqtyjdjWTw/jt87MnpqzC9LTP5d6vqhMo3Y4u6dwfNAzL++6ah0G8ahltlcWiZPeGtcG104UJ67f4QMwOqq/jMIFw8leQ9VsbOhuOtjYqx9cXIaiBcng3fueAQPIz7hl+NJ2ltWAECQIyl81LAaRwlbECUyuuxtH/i/nb25kFilIsdm9q0qzIVxbO2/dyBPwsOdwI/A1NIhXctIgDDfKCMOLIhEHXE0TYiDRDEMkzWtQ9aBbO3WRIhTdI8MGpPh+xE3SEvZM3TsaSkSwo8aIp7vcBPSpNIUWc9dx2ihGIUfcCMA6h6H0sgzlYo2LzwzsSBG/vPLUKBRAIDClNo2hylJMPNHUF6/FyCi7vsPpUBU5f1Zryco/9dyqeIEYzdzRL4fhRqyDTW1lv0jlQjuBtfaUaKBPI7Hr/G7RcawKWd8xytCCHq0tGrABFlLf+tFnXvcFRUS9SdsaU+DOI67yy47KiS86yVHnkbvbnhw7R5+QMX6efQ0ueOVdVkKZ5o+0GzRYPc72WXnZ220/EEPvQ2mJs9umccvaJ9JQDlWujkWdH+bCuOl6OBriPwtt/6D57aofIHy0JVbraWRZDo7xiUeThF4JL+APjur4ftrBDOoDbMmJGGRvnl0iv71YPgcPgMSa8PT1ZvFkRgx3zPM6BFff0dTJbRNIHNd92hlQTTuYNVd2W6Pu7Myx+NgVOiFPeih7aHHc/Dn2tVtPIQZTLWhr1BSVJzNpZo72uzoDQW1D6KG7aCPz+193FdMxFtZ/hYE8idJqfsq7jHo6USnTep5tp8D4LWtSPqIJS9+U4cc8Ym8lJ94wuv8uj5DlIsflhtItJUoeNhAnkdEmUMIsLbGt6thjaw5suLGIwXg96aII8ttrigpcKpcdmqmOegLraj5h8AAQj+90zF3YhqscELTAFaWZuUAQMThYiUb/FNHAlDUttdbQAyP0iCmwvBlXj3bwwGkEZxh7Y8fY1TB+UUdVfjDXKAaoLYaWGWCmVzzxQxUQK7wSFq7btNyjcmKx2vXgKNSocDI3W0q3gacABoST1YfO0NC0OZ3VJ2PUAwXIcsOj7fJ6GGGw3hkT0GAMOIASUuHGB1NI2BNAAuhQtFj2vT4FWOBwA8AZQCJQw8v+fPYq97G8tFNng/7Ieg+y8KHAcI5wACkQOUMBG9bgUsiYNGzPHqgpWonRw8Fzw7aDForw4oGUkSvQQ4H18ev2sHhEVc+aMCAykFFh8LmGKQVJKhIlOdALmkAKIDBkf5txoCxwKdUAz0ToWOJaUGAeneA3pOjwFyZwApO7V3akpwjkl8oyOFoQqEjYfUC0cBHVCoAzuMMH42EggBKSJqxhsQWwBEu1doBqQKAktnbzMzwTSck8w4yPZwGjYeKiAjDxSHIz0HE3EjHAUOAk5RLXQHqIsOrysqUAHM8BmGZRVNw6Mi1QOeAQRaLLABABIkQAM0yABTbYCxYAC+HWBJ00xdN0r3YZU7ubbjAi0CrjFHxLMzaNEjFLz+4ScStCg4r358a5kbAtifbaHcTY18qVrMIdEEISdanHgWFdkBnM8/SEkTKfoHaS1aNTmZvNwAflsqqgZLAjBXyAMFyrIpbAVGV6oAKrCcPqAr45KYS/sfi9mObGiSlB0D+wALckOOCGOriDK83ywNfxUfTw5tHzwDGiJaJ4SU9holF5fx3X6qZhsRAQeNjT8E/kvHIKvUY1sAUZAea4Onlj9sE68EoEUB458HLCDmAB8MIw6JSiQAN73SPLEOfGU31KMYEYrTousmiyRtBTQ7ClaT3ANP6uFYKL84ahsIP6ssogAAK2ks+AYESgB6V3UYAypGWgKVqngClwwJ4MMim9fqCAHJWh0U5DQ7OVAdSk8dtdOMDCrNkgSBo/c0qyIuBDEFbkh0SUHxE+47GQEo0sga4YD6zesDkgAXwjKzLArVShiyFFWSYXkS3iSlNQsBUb4kAQKUESNv4bFLCMoBtfxJAAAACsmEpW4PjIM0DDK2ZbpZmBCz6FoZBgXsbtnLKab9EAxgAVmSeUimBgihp8IvMSfWAwTyz2AE0IhEJxVzmmrwNT0PncoCGQXQtXwua50xk3uPDI1DfqKHdklTBVYAioGcInu/CGIX1GcrkE1cTAHQHxBAprY2Ib/AxT4WBxZveQAd5CwBQsaMPgkdmgYbVQpqCW6JAP29BmFQDW+aDAMuXCMvfT9WrGXn00cmaaaXZvgDOV/4nwXQKgfTiEmisC6eemBCMrpfiElpnHRef3auBiVEA0qLWeFLEAUBBa5BCblqmQV/CgAZ1UEFS2EgCvpyuAMpGyc9BVooZsCBADmIoACXkboDAEwGNNmnABevAQcGNhceIVFDux3uWIIEPQAsjr5l1g8ClQpMAwJsOVsOFi0Uvq4cDl8PEVl0AAdaC6mFaVQiDNeeA9ECv47hpTZ7Qk1VRRwbdRax8vFXryTiYolAIwprBlZ0pa+KKl5wBU1lQRMCjFIw0l0YdXYDC6i9MgDUC6kp3+A48fLH86hBDQILLQBhZJ5hWwInm3QIHgYZEWvbV70xWqoFLAPERDLK4HM5/cWVKbX8bAMEE7o/Am2aue5ZF6OcLqqvVu8EC6f8aJbYBZOWXW5xKyBANEqjA6AskyIoAf5MBQGnKBpoPTABR+0/oFUHAU1VAKsOqV5NYgBBHwZZh1rUncwDCp7sSWwDQTYKBQdpCzmIrMgNN5QDEbEvW2QFgmmkKFOns0WDQamWLPHDNVGTniIfRQ5HqfKsg8Uue/ER8pZHd+ebUSOm7KgF63WiTIhrWg6oJYgEMYc0LhWELTvncXdcgScC3S+BnrjLYYsZK1PXQ4GJZugCuQAClGncjGcMCJwGMHx8c7mRwoVCQAMJPQO/MQBbcs68Zz2lDQgs/R85PVvPAzRJwGkC7MYIF/UDBRoHd1GhwYuAEoXDO6sFqIIUr3wOHGmZFK1zH11Bh8iGFWc8HgEoQwXvQRxHJDEUBTF/AplEfWUmWSMJpiEUvAcghlFGEQtETwA/BxQAeDBBt1IYKa4cADo6WpUuAAMg0w4DBroB1hgTiAJ/RN9REX0qcIM3Fb7b2AEEm+mOawIEXgFg1ne8ByE6fvMKVpI3IjdsAQETBiWUmjZGDQhjQTF8FgldAgNRNiACM16kCBXhkWoUp+4SP+hEEghL9k9wZjlmc6scT6cUqAASj5U5aTAbAwOEl3ICCG25JR4ffsEKYfUNKIkoY2UMcAkXDqEhrGQ2b2RrqaXjAx81CAUWeXVrAI4mGDm6bXtoAwYVMi4GSk5PUVtclscH8gIhvXQ9UiUA1unQH3gHBwkwq/5SRAaUD0GYbE0QL2MAiQbzlasuGxcYAwE0vhmvfgAe3CW/9BQfAiZ8Tnxx5COM3BRtf6U+K/tpYA+lJQO+LQPteW4WmCHRYyCQALcpWAIX8w0S5CQPI1seMBmCcEAegczCb/8FJpCzbAWD3H5NorMaMENXbcyM+SqnzMa1KAA9KRESUQB+C5mbhqFe5lVYhRtCGAK/a7AxcRIgu2O0PwDuLixjUViaEgz3FA0zqDci2tBRCSARPgRBM/NkGRlZeCFnHlEiyaQrgIgQyl66REcXNJslVzwimlyANCOKfrhClEyKOdFL7hiibMlFBQQg1jaLPAADCPz3BFXbRsbE1+oiTTkKCl8XnvRMQbUbRUgqR+ICSw/lJnACx3kIAhaIfB8W/BnkAGo4MoPAYEEA7RTnB5Sg3RinVnQRBQYS8wR+CaYzXT07BdYMDs8Gu44ABtULIyJHDl9wejIEAGo6jg0VoCpEOI0/YewzCgIzcEmGYDY8+rhtRfEyZQblSwUeDSI/X7sFhPM8FQbc4nCqKe0BtEIkeVqJcscyajxYOUfpyk2ANDYfAOmZD6zJTRSBDpgL/N5wnUqyClKcYB05MI1UBooALCvUhuAcyf9sJiv8GyJRzX/IQQCyC3ZBSzwcO9sXB4AIlRE2vh0HBpcF5grsAQPnqAA7obcALildiZ92TM224bdMmAwPQINWrPd+RCgHJxgDfwMv0YKRlEBHJnpxkJytDXXpANUtIEdWWmUSBAcJCSPkZZ0GEy8MDKof72cdh+oTQjqaLH0McSmDa3cQnJ6lQ0N/+aitLGabIwgrEzCvmmp/o49p5V0GNlRLPRbu2UehI31oa8rgCQhEB6mYuZpU0KMCA2URBW47L4EFCEEgFz8IC8xlQBN3t0iRJY+oxFKsIMEPAMBxbQZ5ChYjF24zfKVBA5UGcHmAAsQ3Zgwn9mMueQ53L9/rahkcB2PJEpl5AIasYhP/UBsSETYp00xgawArAIQDBEgPegICAY7xP353eEuT/Ty9fCWnKMRFNQQACMlLA661MINMsM2jlS7bJr8GyFo0bmasanYGCDqsgIONKQqkAGeBYAkHowDYzhhEM59lCAFQLOH9SCzwQAl9AQZI8AdUPFsoFXJbAAEoFp1vvyL6CQ8nDsdymYQNX0B+FM0EBi+IBmIX5R0i5ed+S0/eRBB2EQBmGBUDWLTLNyEHJKJOPiJaTmkSDpwQNgYCGQqA1LUHqtAwOYMi/of0CMIHTBipAIYEO2MKkkC1BQPDFD4Ax8nmll9bNkZ7bmwv1wIH6qkQQndEHQYPeXxUrLUnE28cVsctUWoZGjYVKWe9VAI7RFHZnmsoBWVmYD4xTWNtGZ9wFawr+wAASdAIf6sAjAbfucWuRAx4jNliQHDSAII30QYUYqZ4xSGTct2+WT1bCnw+AJcbNXKKSE8ZFR+fPATWLFkeHQcVH4CxT9sDtA1cAFADBk8ZBBaRRpJovyFHBAEoMwPaXYvvOh8bfQxDvxShtHKe4KQeeg/AXhcIJKBkjxwgXgB+PCAtPifdTwusJGdXJibqGQzCPyySkBZJpz9En7iGYiCX83wDeQbt1TdkV6IAAGxhL0wERTmBBzESBRUdFRMctnmVblQLazgBAsJXtHhcHCclXRoeywgpDynhVqyFWAZBYTWCEviIXzaHwMxdN05xDT5FAwDkBC0TbBYFo2ssKCNOTQkodAEG0uYMXix5sMvSBZxfQ3Egc5k+AjwvJQOEN9rFpuYXv4oFPCULWRr5AKprOYWuCATtAAlKBrcGkIICAd6cnwxqtl0lfz/5+hUR6q/mHdbFA68Qz8syO8Gibp8LetHFNF8tRAV0bEYORkJhTRQFxAMdPwUJMicmXlQKBmMsZwKoAMA1DGAAEQEnMhcBtQZgNggLxcHiAoCFFYEMAd91E7K+4vHKXBbOfJrOAG1E1YEkqxGsNwUr0w0pR2MitIQ5BlqXAA1atwMCSgBYnTuUtAxxNg0ApC4fgrhL7D5sQQM+pLcGg2RmHwIZNZPGC/cI+3Dbb8WlBSCJ/uO2txmjCBULLyHgqeRjEBLnACxYAkBvBQE2owNsMXy0kzWqADm6Oh7HbSK2kQ53AIoKAFWwN02IAuhiBIQgP30OBTUCcpQr5T2fJjB+bUd/2g5Go9sMv5CrnFlpfAWsi+mamCLtIz5VFsBrbb4AM42rGna4cyoQ2eMO3z8NN8BeNKCKBQp3jFrOL+zqP9WWCQukQGBjmPsTAChybv4zgnVctaQ+ynQlaFQJtTPSxEAsRLwRAK0pStgs2M0EBQtIBmKomNWHKHU1uDIsAg2kEHvlUc5/AgICJ34VcpskFZHSgGFydLhFCo6nCXFfWXgIGgY6R9CKIkFdswK6euK1SRkYAxdXV1Z+9UWpQQOzIqloZy0FIoAZfxX7FAEasEKHC04pAAbnGP4CkFFkEZniWC3xBD13ADNArAFjkW8nICQKAOvmzBI8y+QwMBUgcrY0WJdtSxl0hFiiptgP3hDTlmpdVwDTCwZ0BDrZS0eTQt5GALQLQQJcPsQNOkguZZwCIMTEeadTAyR+ijoz4Qo4VzZZAAAlkSVs6VUcZJepUq0Svzx14BNIbWLpMC7XFJGvfVpoWr+cAI4twmWi2I9wqgwAaiwDPtB9E7z2SlYSA4hvaKQ1nAZ/MnZ2kRZ5P60FIq16lCYDVwVsKAx1BqPRgzsOZvKTPIoBn9kCKTDuDtMFqtp2nRYWNRw6ZBc0MvZ2DYu0CLhiWBeCK9jSZwBQ2CySAafnVwKo3rdJXGWGUQv5gHlWsQQUAFUmWXi4AQNX/oqvEnkEUKG6tlZ9QkzDT1jLpmR9fWCg4wByAi0AWeNCBgYJ12ItvmMCNwrVZkYzcU5GBs8aT0XcqZ04IN6FTgQuL9dZDbIa1W0ER64dUb07oB0eE80fZ8/do84xBFGBcwGbppkJq530TW9GuGMsjLJLNAWrBU0KAKYedUoDH3QB0iGTAE7OOxuOVL8BIAMPUxKLA7HUBjHBHEQvFD87HYE40ZqAAXEF3+EI/FQAACAASURBVAA5VAcYSqwlTR4TFY8AFHwtHQXQhYMABwj490xjbrxCQRY1FA0MBmQdfy8KK5JQK5jIhiNb0AgjOAP7zB0TqcsihQUwRXSdVE4CD0RhWQx6EEYLhhYAeoE3P05iEwbgIiTEHEUiq1SOJcmGFl7Xv0dlavCgAliw5QDiemOUAuaucf5lhTXGhc5AoiqoZFu0WZDr+oQYAoJy3YAB2FsNETiWuCXLoc1tIQasfWYAMgQUTgYARFslHwpiRDUs1hBRoB0bQ7+s0NKTRd1E/RCeHiCeUK9JN5EAdJfznAEq8htHb5ADuUQCf8tY/UgQKaRCDSYrhAiA7UateS9WPksK2cYTfUrVpCTmA0SUrFBkXh0Am/veTf7P7Lb4DU8aKbKXz0zdwW3XchzRimAwkx59hHaKO2GnMbYaFW0YBYkNxWp1SEXiNNCm5g3DNIMgtw+ShZNpOpYq/Q8AswmkIiOEHX99N+JMMAC+JKYI7yrXvJWhZgcNbtz2wQA+bk7APAHTMxnOjSWcrcbzX+OZWahITJEaSlVq6X0QGs2kD7jsDlU8ixd3KQOKAgHdAVMANmNMOIuMjEusSjd7Aw4HHBUmlmJgCkxWYk4Veq5jVQ9CFDiuddoVjHF4dDYARDwtTkEhkSROFdWSdDsWaCj4BExuaA8OTiCxBNJIORyAAoMOTk1iT5wDLiZJBrs7VV4uAKKQCxESEKAfymPGhzOP0pVhBGA8ol5iCxpyOoZZFCJJRRXFTm8sA7PfEnuAEgFx0kBskwNQZhyzMLaesB4SdgBuQAKmhMetRhYAICQAP7EL9S9J8rk7xDAYgIxMIlDWBG0DAW8BYAdGkayHGwwrAi4b/r5sA0rCezgdXjtnijaFR5eSBAz/aVQ+mggCDxmYem6hDQtN369pqjuUEgAYD0BSUCT2CaA0BkkSSiDM6jOEQDOFjTDiIQAVX1TPI7bMwK6hF1sFT16bBoFTnVAAFcgndTYODzc/52xpHRZyNxDDkQBPhGMNhklGAbYDJLs3NFGGnC8lCpbuAl06ZWbRM0QQJgfnBAVVCyqR6L9SLIHQDAVNGpYiAIc1AJk8AIAA0TfDOzNArLrhf7hEtVMnMAEBCT81VCmAL7wJ+AKFpQS0Xx0tbQDcQgEJZzcdBW4AOQB2yAAFEeGWwhWAatIHABBbsCfCPlQAikYBjxdYEHgjNAUNL8OWdGkAXgMfOQDJ05gDZyTItT4pIibKF7+xXSp4Shfkxy9Vylsra8P4h50uKHAGw0KZJbkH2GZs1xvMPI3ddzg1sNxcsWHdA6IsCN0GeRJtVDCuDUWwaQAlQj0Ad2Ca6wMJA8+cfEoKOwP0EoXGHg6EdQUZaed7cUveOVMeswMfGy++GDwFsSsb6S9ehSIqVZF71JbZh6LBFLIRDiAACUrQGh3yN1sIIYIkUOeTKl1MTeQYCiMBFATQgh+ynTsCSAOav9AxNUF/AClE0gY7BIsUJiVNABBFJRT2FwgAslkF4mtM9lMDI6AGHrsDBEMhcPQBAnwmdg8o7YkIzxJYkJ77A35vQ2M8AOfeGivv6N1CumQj+RUGPQOXLeEAqgIp1Ig6o3nGdRl8PTUJyQFDEAJ/KNdr3gkIBywcNHDoiAfNW0CHClyw+AbbsU+ruOwbBAncmpU0WePmFgtJd4UAHD+zLgBSQQAugirUKWA8ERwyAjfDPLchDh3EdJRQgbHANWS4bDX2QWzJ2mJZh18YFTBxVgJsBe9gFSoE7VZXKLlzBo5G6q7l1hLxmQMMA6MLWH9PJUb3QgGZC4SBAx0BINreFj822QBjNwMgk00EK/kAtPUvcwxhc8cPRQBSsLgAbRwSGiMBLa5gDN0OekNWCnc1aV9sqeReuiznCC+PLMjJAh4xhq9iAwgOI3IvvyBg2TibaC5IlpM0Lkp8BdcGL9/LB3D9u3oJVwBZDSkkPQIITsjVS5NtqzukBoSUItLaLUeGQlRph9bxmRwAOCK8upGsTd/aP9AhFkwjBnErDQYAAT28k+5LG8IaPTLcvCciEHIbDW8PS3F7ZABuCV2xjgQ+9MHk5jktIvwbTCddCpWOGVBD4QIOfa+MURkdX70FKoRNAA08ttApUKfTq7tHm6YZAJYNRtEWHxgn4AKWIzQrKipAgSK8tk9aOQpky24DUkQGZnVQoRUBP0NDRI/UwgIAMfAoEBSLZDEgLRO1Br6SV38EF7rXIx/JAQ8E3EALBQcSgN0AFFDXMM+Lcw4EFpWDb2knRW/mRYYdfAUdfQLwWhkUCJQyms1ksgTMpHhbAHil+gEBS7anHDTwiRpCrmULHlgkaWl2VL1GDsrg1apysgeLQcKytiGpZUOcDMqz7zAAQwIiuAc+MjjuBK+JmoanK95NcXD4JyZd2Nh5dmU8IRLLDQdeCTYLvtBn6g+P6dw9JTYeVpoGi4ogu1N/K1HYkQC/YBpZAtrEZABeIfY1qIPPzFLFqQ4DDANRwxLNOQFjDca2WfiWsYh/pDePNz8H8AwduiJsSFkTWQRoen8WGw4Ahh81nyQBP5AGhR0E26ZwQ6DHcrwHTrJhA8yogTgLH9PiAFsgFGUJZgB2SLsyWzN9ASa5CB0yXwEJCam2WKEPNT54YlMBn+0OZwAdDwgEA9SnqxNDFoEDQT0NGaOFEHRADFm8F23JWUQQGhMCArWvLhNCfHChBBcNC6QNK40boQEAO+lRHA2CUxLhZyStpJ7pkDc/Cj5S9VMYHgC1PkR/KyVZmwEdKqJACDEcjSYbdxq+AKHVJUhxUMLPdHUdbAACCP33H9UAA8AELkYySGs1NZFvoAsnLu86CBTGMDtrpS3xOIHVHOVVSwUjxA3XFS3diDMPLbOzB9k7Wc9QwVJ5rhsB6E8S1AAGLXom2BIGMhblrl1bFXIYjQSmRiUtBVEKRbNsx4GKS0NiJC+HPpi9LQ76mjyf6OVwqBcGUmYEXgMTd2A6HWqzv7eGEQxBjkcBU/NVLCeshKpDLHJlq2tKGXeSSwFCJS0yAwEd0QEQYULiWW5o1uMgCv2UbVQVInoFKCv7FzYEEgB+31t4HjUs6mheCcGtRwxkMsMlBBHf1b0ADh8dZLtXOJM2kDUSjgxbWZmpAjISVgRbC4sCJugEjdR31gAp7hMAnkgTM5YXSQOZPGsHOAKwefkwknwPEBMqfn0NhJUI15ICbM0TWmmseAWuYeBQiaoWCRAA1AKbxAo92wPXEUQw7wDfnSIrnG4CGV3YXaBnPavwW4OXApQBfZxDwQ1iC6MENCEJAOKZqDFUARg48iFDTDLhNwWjqH4WHAE7PALJFQV7EwMBmYl4Mx4WDqsCAVgA3AQC/Ncp2LMA2aotBnxeNApPDKe9EVSiGS9JMEtKwJUIlwMUDac5oIEPRnapEikLMwAhzQUgJ3QiA/CiOgqWe23hYA0ZAglKDSQZOAEOC72KBJoavjfOPF3IWRciaEYtEzhLKwC2bklkNZgpRwI6WBtPAw+npsDsD6wU0TJ18JCbBy4aNIHPCstFAhRbFzkDOiYSlyULWoWJuUmHMaMPQhe5B3kbXkVL5bZfW0cOMzb+WAAAkGLfDwBkZAAVpGI4umrpsOchSIGKAzcBIjSXoBNokAlDLAFxFpsCbPTQTw5xswgtiyR9QVUGBDzWTAaVDqEAbCsATiO9za1IUezkU2NfcW/LHFaJ0Z8ACSpJVAV9AnL57hOjBs+jBFaPVyvne8dqLUfbF8GOEKVCDVsBLgxdJgBoClkAqUMmZS9cZrUUCgko/DTSHhYGPC75Dm1CIhnzGV44TgJ57DncEMTOEBWMAIEzFCASqi8BMQDtz2WwAChwVFEFYF5qEVJU837Uyx7fUGxE1YBGgu1N0nEsGiYBARCJGiv7nw4CCctmfyoGrnruhwzdwJUyHQMCWypq8T6caAAE20uVHZAlymbvOgSEAwDthEIcfAVjEQBvBRkXkhxrAm2ikI8RNt45FNuOoFokRRdegaaQOtexKJK1HiUAJWEDJgZz22IINjqFaReWG/QEzfsCRBPGyDdYRgcCrzIksE9ZRSXiAdKtH2VYAuzuqgMa3rADi5QGUH9vDzLeOQIEWwAJV4ubXVPDh5EkEzIVBjBkdMcxmAdVxQcDjxzkZr7HeTUzAQ3p9AaLaZGNHWb007EKkvOzc+9NfzgpIllL5myLFbQLygM4XgYF1J2Tvk0uFwIOEtlkSmFFA/yLJ80NAoMAXcbeHgxwl1jcouxbixCh2lPHTFx3qtaG2fp20wrwOgAL5yMrCgRJvQQtg38vXwf6doIW284PZBpHpsBJPzedw5AHCAEMS7YabRQzbkW6L7ndADPqNCkhAZiLdAMYfiZIPOYjGAwGD9Y6vGuiItqzLShPPJ6nT1V7ZoqepyOwL/dvFVxifBwAiHaMARYTQUxgAgACKxRvBh4kjk4AAwUq3gAAEeZC8yAMw5i22C0+GDtgBDwBXg98AwkROUA8S8YCBF903leViZjUa90cdTEOBrwDXHw1Bg8SIAD9EsSgIQwFDEcasGfBcl/3AGhtMD6YjLVaO7gLSl0BA32wU8o5AecqKYOtbh4BdQNIjo0geknWgXWS7wGzHxZ0A3NqHQEBcwCtNqlyt+c0AOkASngGAApBSYNSsGARwxoqz0NA/ggLh2AmkXEAlkauySUDu3QbBNpQUzkdYm+uYokbAjUmTZkCjHh5Zg4uAQ1OY2Z3mUl9vCwNoKYnFjSlbmiP4RmPUKK7eZ0DPgnn0ZqDmJDuA98yAQ+aL1PCSm9NBjcyE3BMmwCmEOyvBOilD8z03gZJS04dEK5yxwBKUnLULgA795xy0+1MXWEPe0MSTWdOSllnH4JfHofxViJmgMVAnbIMYSY+wAUMGScQ1g8AYqARnwEBAwBI5pMFeFOj84MHBNMeuweIjvkDExPKh9omslGCSVgAiN7YEB44Qpp2LiBjPdarEADOBIQdaOdMeA1XMJ8TpvwQ2tGMe61kiAcdEAoCrtBNJ2/Rhs5WfILCBiM/lIG64B5EVH5MfuQS8x03Za2ACu7cEw7NMQ8fIgA9EhYzJYmjV4svwhdqDI+guRTTWvBAXB1UdpDG1QI4DIY3NMjq48cHAg/PbAeQEFlY8rE5ClIACwBx5RxSJp0jQxFhGENVSjUQBQw2iMOKTHxkGjWS9SnbArELcrY0rwyMZT8ShykQV+FwUJMuUgaIWSeyRBZdbRACRCCiiSAml2AEGGImDUh7HGwsHG5KaxaGKsADQ18qC6KJsaYtDUsAATMPnDFfNa8EAH09YH2HsN5GykhFWAxNkwAGCSh0Vh/nMSOlhmUY7RVMBADQmDc6QPpXOVQoBbAMOyECuunUyxPgsQ0ETnBwRXQBAD4Z9IYX3tRMpbUBBbEOtydiCAIYue+9ssJjHgR/2AeVIIGbAmlLYUymQyRwZQTXBlCWmgNl48hVM7QSIL0CdJNSu2lFnk8fiZUZPRFODQCEH0ExjxJKSHJHTWlhSvJmIZZqczI+ADBfRQ6D4Q78UtkAAwsBw2I4MWsZlxhDLwD/BwD4WAUGCne4shiGGyeronSUAQXP5UkAOZ+BfwIRRANQS2eyNSEDcP67cPQAAA5dPwTl5Eg5FHSFGiQZF6BZBxttv2GoyEQFB0xSNBUW/EssG1aRABX0L0oXTk9w9P/nm+ZVMmhBQhcIGxhYOHHoHwNzJldxFQB0KHapYgBDkY+WKIQBBS3cJQYOvmYAR0qKAE8GApuhVQDTKawrE0mPBQG0gt28GoU0YHBDwfqHHhjbkDpoSWVWA6kEs0e1jAIvmkyegpM6G1IBXUzELwUOM2kAISwmADRsQ0MwYxeYL/A6RQABzliwKBgSK4MIxgogDTzGA86dDMa+XUMCLkazOuVDGApvbCfg4CQac2iJU8SvkQMoMrD+PQICV+oinEEdBm0iJT4MyAhTZgFYEnkWnG9xn0y74ilvXe25Jbli4UIJQAJDDjXiA4QDDSiVdiMi/rXIbh7VAPAPxA4UU/bFj9kDQwQKkZtHAlmRGwAt1n4c5uKmg4kORgd5WBq/V17bNiFuAu4AXIauVmwyb1tJ3gLMkljMvYJpCGEM79RBkhofAX06o1gaLwLwTDaMDQEFuzw6UlE9ASVc4VhyijlwMBC8q5TXBwY+MsgHe0VJoAJjlgAUvh8zAAcyNgUYl0e7u2JdGR5GbEOPBQRZBIQBZnrZAvJGzYKVQg8nTwskXgRp1hvgBRwEizz0V35fMqtosBADNwJ5EsGJBAriES8rADV+1ohgBwcBL3YBFAiISgIAAaiaHtpdDgh2Oj1Dg8G1gzdxdGkYQwW7CQCTNDW1GGtT5qJptqfhAAM2bhqP/YwZCWvDU8wVZmt9qQ2yMo6+KHLZ/dslAgWy5BanAIcBnb5hcjI7WBZ6AqTuASP9LHZRiHh0WQ1dJzgqMXGNqSWF7duSohXEqt3EAck4ZwUVVX45ChZEIBYeFnpOC5wPIwA/Gt0cIcKsoqTJPZ1UTRMBWA9OMqWcK8/YAIvfnzBhEwXifwgthgYgEecXBAsQZSVfVQ0ER3w4TgE8iE6ZEIwoFTYzUwGwt2El03Wp4Q2IALsOJnVYBGZdKCUBwQAqAFqlQEZJRbtrwqcgXlIIUx2NcEShuvIBbgq0XVCNBAKhUT4JQB/OBgqIf3FzY6V7OyKAOAoBASg2GU9GAA4AfSMKojG0m5gyqAe3MXWTUgDAAgxFtBcbx3gCmAYBRCEIaWdBmXYDgQdPhQMSeVkjt+IFTuC6Ij8N8+cIOhMxFvN0DJU7rf6eCTpJ9QNR1LoQQQMgEY26fApxVC5HOGr9sKU9GORpdSRjAW4rUEs3GgRFo9IJvYmKIxn3EuAwADMMjc+dCqyePSGpQbkhEXoVHwb9SJ5eMR3zbXZ4JW2BqZVw2l7pIXRrAhSAEAVRS84yK4rNO2l2wNVcCFW7FQwbADpohDhH+ALV5AgD4rQpGReMQ9tkmLIzbxPPHStlIdXCbS1hCEj4yktcH8cO9QspuSFFc2sfFMjhw8WBfwH4AL00SwUDOthSQB54xEsG0i0ACE7WuddaHtLJZxcCSUEYrDRF7xRceFE3AC2x0k8HnShj+8mn1AICDQvHh7yrNLLpdSMBOF7XG0MIKTpg3XePZSgxj4EUDQW6ERczAmkHACMqRzp7jwLBHE1J+9rgGE0jMKR9eAC3iUeONakBJAvMALJ5jyVnHDpo4HcqIQQqJDKFNBhoGQpAAb6m34tpMCwA0p2et1pv9wIkr2yOkSgpxQLKc1IqDDsWJgQWiFnICOdG5B2pQ1FQEqBk2k0FSQ8oLkFGe38tCE61lDAABt0AMaACES7m5uDMWkOQJp0/Hg41dp5mhRNyv+xrYjkRExpXAACXB7ToUYIOVBcRGpltVbe8OYgfXFsByY4hGhkpkyoB7hcF6K0uvEqfZ3griUwBA1c/lD66CQFPcuK8UwRxQHrjeyZEa4w1vRQqYTgxzxgQEhpdGRUUHRNnf4vqR4ObYGCWlrtDMwhWI0ZhExohPDYcfbYDowruYrcukRU+j0IGABZOTatOWA6DbwRHWnODFRc4PImVa24k7ATGb0kbQpcSsL4YFbkgARWhBHl6vFpBPRSyVmOdTmIXefPQCLgLUWUpNV+MAwdW3p10p0eu5BxC504BVIXy9c4JWFeJA2BjBxPZAnIBVQAZhQU1ADH4DjnMGeNHLOhzGY0L6yQtbYoXAJyb6u1PF7UZ5yAt4JwGYldYBd0VembYLQBnVTpvhSA/ckID5KwqDCHKBp0YAiR0oOcfXFD5GQY+oUJH5JqHAR8UBB9QqIcTPwQDE/cukJsaOVIbAuUBaxEVKvd3i2+Q8BAfV8nGOwKY/DtMAgkLMOnoHpCTARcGXgIUhPyYDnVrAExDQSJ1gGIMGgtYAytm5mAuUxtoB58TXTtv6wUAa0NdRSmbkMUEc15QPzEmWRQCSiw5cA1VoRQfWtxc+T0F03kr1T9b7QirrbwAXiw9TpIQLwMRz1BPIlLVz2C9KLQez0US9jMGnUkwCDWWKKWkjQlmXDZjQFxL7nsoey5VQwonAARTHV+7T2o2FlIjAghKc4pLVFWlP5YBH+iWBrccMUpWvxfLgF2Uc3GlpxBgKSA1C26DD6lECOuPBZ1vBhzxaoJkOfOGBXEfH4SpqLmcqQgHLqpA2FJvoLGFBTTtEVwPgIAWD5czgF1YKwbKK0omhid9pnsG3sdBFgMCnWEwrAt/AAxsDcl3PWYuBXYZt/VAEHZFRyu9ERMlZA7aGdcCBgAJCPb3D2AtAxKrHCcRQEh3PMxxSgZzhpKkABTYngRSabRPLwAEwOdIZ7q4CXUDSQBW4y0NAs3GAJEzApI+A3ch8L5wJxDHl31utHwtomsfuOkYFHczQFQ9YpEkspI90XQaQREGQDYArfYUTT1n+WnEVRlkMK0YFEehewNFXB9Qf7NnPPRJozTB8ggFWhokACEeqsVTFD4NFOtfQSlGkYutE1BndA5zBjM1zCAsKWfDYBYCKsZanqqU8mgF3ANrEAI/HOsHDjgi8oycUYmlahbDEym+E2RZoJ7CuZQvFIZ+Jo+CNsk+dvgAXSsCovgCRS0tyH+aFYaA2V8ApQLIFAW2ZfgiAlIEuwIO4Ap2I1xnL9wAdig3UgIGf6YE6DbBBHsBdxUYPHjSAHNWkIRV4yToTJo9fHKeIa32X0luKS0KMxP3Ko1eRBJCWkIMxCT0QmGFVau4JCE8fyjMBrtGXRFQD0ey3ylvRggAFQMds0jrARM9SsnGPBPwES6Nxm00yQBywllTABaqCdwPMUoO5Qd85Skqddq+OgvwnB0cAXVO92EWHA4IdbRkNjHKtgz1P9igRVKWJTcjwZrR8wLfBG0HCOFOoHq8bxdTQkAxKg8nE1DGHtA3kQgro0sY9PUYwjnZqgN5FQeHiEMAFRkElNIELGVYpCzs7psuagceOx6VnFMNPy/MDQe9BwEqPVUNBAhc0tpXAFewAxZ+AKsGSriss+52JIsIOj6JVHuNtiQnblFpaV8ED8LHvw4EmBgHL1UP5gNrBQ0SQdz+AxUBqnMDNuBtmgbCMweoGxIq9AbOQIyvOd0DVEUOXzQAcJCuFF52j5Jz5aHRQ5YwMny8QQJcFYgAF1sGkRMQBTDDzDdfK4SKytaorCm44gSOswA1lc1IVWqFuh+6x3LnBSUAE2QIWigFHb3YC1BVDwWdb4eIFzrNRimjqSKpwzltIIWEdI49Mh06XQYKBw41oWjUAHwgEoKXEKItKQEDAAsANWhxAN8K2QR2g1UjAts3mDkh2jA/LHK7BM5OEQ6oBqLLHj0aA3U3MX2Kb1wEBNIHNul/ogAnOGEERQWVVxvZA01dshtiBA9sUJqjJEs0APzrxA5TLhld+ImbOIIBSAJ5CsWQ9nwDE4EAmwYAFsoF28p6D1uFMYMFfgYtE6qkNwAATiwqvE9QADoAAQBqF4wG3QAumBeeN0klpFMCJGmFA9QrBAiYUiAsAFvNnm/HCXOBHKIZXyFlQikDC34xeT4IqQES+kh8NAMYAUEAvgB0HiVoCiMIbI4DGSYNQndiOymW01MRHDwWzs/FkmNBosBbZlMJj0LSAQJUiguvPQAHSxcATgAEbkceKlAmA966PQGGvYaul2NcZG64cOS55stIjxIVAZyuYlwBAVoJLrV6cSQeOwLpDQQb3gMFBUOMOKCAHgTAJd/0fsZGRCZz9eoBhQZ9Lx+BmQgjUNWgNZEbkzIzJz7Kn22XMHV5p49UihqXk6EAeqS6kDqzQcAcjElhAwsAIw4bkjXuBXHmkwJFAT8NLgCQSA9fAmoWAII8yBinKIFM5qNFDVITCBY3q1P2BKNnIPIJoA1wSGtOVkMVL0wuW3qGmRItFEJdIwMNRwI4VlZyFA5ntqYu3bk8FuzvX73m+0e8MiSObrkfXIS3PqwgW30csgKb+sNWNAqkAUAHHBcAHisPF8KyNVwdjib4CQEEqB8BBk3RmxoOcAYqEdnBQnikHk+GCzazSTmuSQXIjV1IPVWWBJEz61wSEA0AQA89r+DVIWexHfEtWzwaxWhXkAxh4jFolqsEVsMROEk9ijfAAR5jTmj6exsBtYRyIiMoZ/4tVhPlPMTKWBfLMQIxUwEAmQxJGCMFSwPjJwj2GUxYFhcWg5u0ntEASB9dCwNnhlcp7wADVo2t9ZEqG8wJWw3bW4IBpoWxDiGWcPxTjgYaN78JGGW0oA4BFsFpqTAKAAQ80REueg8DlcPFnx1jXTAK5NnxwgEb60cNmUb1gDo4IDUGyQgCAW8uBE8AClg+kQEACiJyVT5uW8RBG87AFApFlOwHAicmhoIYJ5YKAQzVZCfCeuuSnEUSeZckEiordDgJUX3LlPazKnfNjiIeqMxVZAZZADTEEkZ8EXGL+gFGwrjaTHyCEb//H6AY7NQKJgsWLAEZPFuLZnZGRnQtp1EuJRVuJTGdca2pHwCthB51+ZgAuXp+lRMyJ2SAgrYB6m0Q+/4YDM6aKGi/fSuVCQVuWtMBKztbqWEoa85PVdo7zihmsFxiXjnaYQAUn5bbKOh6s08RBhjdaU82QD8htgUalV8OGmIHAFTgUJyiMgTgxg8fON4ZAaBIgnxJeaqd1gRvBBMITAdGJWRKWx0lAVHR0j4AdvYAdQNaQJUDRHlHml5cSLMjaYxAqHmbAaTZAZcZ5s6JLJGip7sCXaw2LCRnK1YMO4sFRAgVWgfXMfc+zt038JeI6lkCDQU5yCGeZRBOA9aMG3e0AZ7cmQmKjgeCWvmJnn7yAwY8uoEEL1wLBADizps1VFIzm5UYtBHFT5Qy46UAsQTBZCwPgljNPekNGEwdic0FR1JmP5AAhShTl4MCWwq2By1NKlUqzQQGAidkywDoSgYGtQ8JRdefJLqPjw5YsD85GiBWlRsDZ2GzVDkCvRSyUzIq16YUXEBLd2kGn+rLIwAAAK1JREFUf54DD3C0WwmGPi9OSjpCA0A7fFwUZTm0ktDZLl5VXmbFDDQACl7+QSry5QCM2bfNC+WAFj1LAzLsiwEBaQCW/1EGcMN/tG8OViQtylulBUxRADYm5SEBRAcAARkeMC5iRNgZhOoxnz4oHApa6gD3ASdbmF188wxpDZVKUL4RUhTSSRvrQAZLDcgauImabgJzkXIaALePAXot1j6Bdwe3AXoQAnXMFVuCApGWbjuRvTu7AAAAAElFTkSuQmCC";function kR(){if(typeof window>"u"){console.warn("Paper Shaders: cant create an image on the server");return}const t=new Image;return t.src=AR,t}const AR="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";function CR(t){const e=F.useRef(void 0),n=F.useCallback(r=>{const i=t.map(s=>{if(s!=null){if(typeof s=="function"){const l=s,u=l(r);return typeof u=="function"?u:()=>{l(null)}}return s.current=r,()=>{s.current=null}}});return()=>{i.forEach(s=>s?.())}},t);return F.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}async function ix(t){const e={},n=[],r=s=>{try{return s.startsWith("/")||new URL(s),!0}catch{return!1}},i=s=>{try{return s.startsWith("/")?!1:new URL(s,window.location.origin).origin!==window.location.origin}catch{return!1}};return Object.entries(t).forEach(([s,l])=>{if(typeof l=="string"){if(!l){e[s]=kR();return}if(!r(l)){console.warn(`Uniform "${s}" has invalid URL "${l}". Skipping image loading.`);return}const u=new Promise((c,d)=>{const h=new Image;i(l)&&(h.crossOrigin="anonymous"),h.onload=()=>{e[s]=h,c()},h.onerror=()=>{console.error(`Could not set uniforms. Failed to load image at ${l}`),d()},h.src=l});n.push(u)}else e[s]=l}),await Promise.all(n),e}const Mw=F.forwardRef(function({fragmentShader:e,uniforms:n,webGlContextAttributes:r,speed:i=0,frame:s=0,width:l,height:u,minPixelRatio:c,maxPixelCount:d,mipmaps:h,style:m,...g},v){const[S,k]=F.useState(!1),w=F.useRef(null),C=F.useRef(null),T=F.useRef(r);F.useEffect(()=>((async()=>{const R=await ix(n);w.current&&!C.current&&(C.current=new iR(w.current,e,R,T.current,i,s,c,d,h),k(!0))})(),()=>{C.current?.dispose(),C.current=null}),[e]),F.useEffect(()=>{let P=!1;return(async()=>{const M=await ix(n);P||C.current?.setUniforms(M)})(),()=>{P=!0}},[n,S]),F.useEffect(()=>{C.current?.setSpeed(i)},[i,S]),F.useEffect(()=>{C.current?.setMaxPixelCount(d)},[d,S]),F.useEffect(()=>{C.current?.setMinPixelRatio(c)},[c,S]),F.useEffect(()=>{C.current?.setFrame(s)},[s,S]);const D=CR([w,v]);return E.jsx("div",{ref:D,style:l!==void 0||u!==void 0?{width:typeof l=="string"&&isNaN(+l)===!1?+l:l,height:typeof u=="string"&&isNaN(+u)===!1?+u:u,...m}:m,...g})});Mw.displayName="ShaderMount";function ER(t,e){for(const n in t){if(n==="colors"){const r=Array.isArray(t.colors),i=Array.isArray(e.colors);if(!r||!i){if(Object.is(t.colors,e.colors)===!1)return!1;continue}if(t.colors?.length!==e.colors?.length||!t.colors?.every((s,l)=>s===e.colors?.[l]))return!1;continue}if(Object.is(t[n],e[n])===!1)return!1}return!0}const We={params:{...uR,fit:"cover",scale:.6,speed:0,frame:0,colorFront:"#9fadbc",colorBack:"#ffffff",contrast:.3,roughness:.4,fiber:.3,fiberSize:.2,crumples:.3,crumpleSize:.35,folds:.65,foldCount:5,fade:0,drops:.2,seed:5.8}},bR=F.memo(function({speed:e=We.params.speed,frame:n=We.params.frame,colorFront:r=We.params.colorFront,colorBack:i=We.params.colorBack,image:s="",contrast:l=We.params.contrast,roughness:u=We.params.roughness,fiber:c=We.params.fiber,crumples:d=We.params.crumples,folds:h=We.params.folds,drops:m=We.params.drops,seed:g=We.params.seed,fiberScale:v,fiberSize:S=v===void 0?We.params.fiberSize:.2/v,crumplesScale:k,crumpleSize:w=k===void 0?We.params.crumpleSize:.2/k,blur:C,fade:T=C===void 0?We.params.fade:C,foldsNumber:D,foldCount:P=D===void 0?We.params.foldCount:D,fit:R=We.params.fit,scale:M=We.params.scale,rotation:I=We.params.rotation,originX:B=We.params.originX,originY:X=We.params.originY,offsetX:ue=We.params.offsetX,offsetY:Ee=We.params.offsetY,worldWidth:ke=We.params.worldWidth,worldHeight:Ne=We.params.worldHeight,...xe}){const Ae=typeof window<"u"&&{u_noiseTexture:SR()},De={u_image:s,u_colorFront:rx(r),u_colorBack:rx(i),u_contrast:l,u_roughness:u,u_fiber:c,u_fiberSize:S,u_crumples:d,u_crumpleSize:w,u_foldCount:P,u_folds:h,u_fade:T,u_drops:m,u_seed:g,...Ae,u_fit:cR[R],u_scale:M,u_rotation:I,u_offsetX:ue,u_offsetY:Ee,u_originX:B,u_originY:X,u_worldWidth:ke,u_worldHeight:Ne};return E.jsx(Mw,{...xe,speed:e,frame:n,fragmentShader:mR,mipmaps:["u_image"],uniforms:De})},ER);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MR=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),sx=t=>{const e=MR(t);return e.charAt(0).toUpperCase()+e.slice(1)},Nw=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=F.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:l,...u},c)=>F.createElement("svg",{ref:c,...NR,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Nw("lucide",i),...u},[...l.map(([d,h])=>F.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(t,e)=>{const n=F.forwardRef(({className:r,...i},s)=>F.createElement(RR,{ref:s,iconNode:e,className:Nw(`lucide-${TR(sx(t))}`,`lucide-${t}`,r),...i}));return n.displayName=sx(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],PR=lt("align-center",DR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],IR=lt("align-left",OR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],BR=lt("align-right",LR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],zR=lt("bold",FR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lm=lt("chevron-down",VR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_R=lt("chevron-up",jR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HR=lt("eye-off",UR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],QR=lt("eye",WR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 18H11",key:"4wu86t"}],["path",{d:"M21 6H11",key:"6dy1d6"}],["path",{d:"m7 8-4 4 4 4",key:"o5hrat"}]],KR=lt("indent-decrease",GR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M21 12H11",key:"wd7e0v"}],["path",{d:"M21 18H11",key:"4wu86t"}],["path",{d:"M21 6H11",key:"6dy1d6"}],["path",{d:"m3 8 4 4-4 4",key:"1a3j6y"}]],qR=lt("indent-increase",$R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],JR=lt("info",YR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ZR=lt("italic",XR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],tD=lt("list-ordered",eD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],rD=lt("list",nD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],sD=lt("mail",iD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],lD=lt("menu",oD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],uD=lt("panel-left-close",aD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],fD=lt("rotate-ccw",cD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],hD=lt("trash-2",dD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],mD=lt("underline",pD),gD="/assets/Navin%20Logo-B0VpkxRu.png";function yD({className:t}){return E.jsxs("svg",{viewBox:"0 0 100 100",className:t,children:[E.jsx("defs",{children:E.jsxs("radialGradient",{id:"sealGrad",cx:"30%",cy:"30%",children:[E.jsx("stop",{offset:"0%",stopColor:"#c41e3a"}),E.jsx("stop",{offset:"50%",stopColor:"#8b0000"}),E.jsx("stop",{offset:"100%",stopColor:"#4a0000"})]})}),E.jsx("path",{d:"M50 5 Q65 8 75 15 Q88 22 90 35 Q95 50 88 65 Q82 78 70 85 Q55 95 40 90 Q25 88 15 75 Q5 60 10 45 Q12 30 25 18 Q38 8 50 5Z",fill:"url(#sealGrad)",style:{filter:"drop-shadow(2px 3px 4px rgba(0,0,0,0.4))"}}),E.jsx("circle",{cx:"50",cy:"50",r:"22",fill:"none",stroke:"#ffd700",strokeWidth:"2",opacity:"0.6"}),E.jsx("text",{x:"50",y:"57",textAnchor:"middle",fontSize:"22",fontFamily:"serif",fill:"#ffd700",opacity:"0.9",children:"N"})]})}function Rw({onOpen:t,onClose:e,onFlip:n,isOpen:r,children:i,to:s="The Google Design Team",from:l="Navin Thomsy",stampSrc:u,logo1Src:c,logo2Src:d,toFont:h="font-serif",toSize:m=14,fromFont:g="font-serif",fromSize:v=14,paperColor:S="#ebe1cf",insideEnvelopeColor:k="#ebe1cf",letterColor:w="#ffffff",sealSrc:C,postmarkSrc:T,postmarkText:D="LONDON",letterLogoSrc:P,hideLetterLogo:R=!1,letterFont:M="font-serif"}){const[I,B]=F.useState(!1),X=F.useRef(null),[ue,Ee]=F.useState(!1),[ke,Ne]=F.useState(!1),[xe,Ae]=F.useState(!1),De=()=>{if(X.current){const{scrollTop:q,scrollHeight:J,clientHeight:L}=X.current;Ne(q>10),Ae(q+L<J-10)}};F.useEffect(()=>{const q=setTimeout(De,1e3);return()=>clearTimeout(q)},[r,i,ue]),F.useEffect(()=>{const q=()=>Ee(window.innerWidth<1024);return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]);const se=S,G=k;return F.useEffect(()=>{if(r)B(!0);else{const q=setTimeout(()=>{B(!1)},800);return()=>clearTimeout(q)}},[r]),E.jsx("div",{className:"flex flex-col items-center justify-center w-full p-4 perspective-1000",style:{minHeight:ue?"450px":"600px"},children:E.jsxs(en.div,{className:"relative w-full aspect-[1.5] group cursor-pointer select-none",style:{transformStyle:"preserve-3d",willChange:"transform"},animate:{rotateY:I?0:180,y:r?ue?120:220:0},transition:{rotateY:{duration:.8,type:"spring",stiffness:40,damping:14},y:{delay:.5,duration:1.2,type:"spring",stiffness:40,damping:16}},onClick:()=>{I||(B(!0),n?.())},children:[E.jsx("div",{className:"absolute left-0 top-0 bottom-0 rounded-l-sm",style:{width:"20px",transform:"rotateY(-90deg)",transformOrigin:"left center",backgroundColor:se}}),E.jsx("div",{className:"absolute right-0 top-0 bottom-0 rounded-r-sm",style:{width:"20px",transform:"rotateY(90deg)",transformOrigin:"right center",backgroundColor:se}}),E.jsx("div",{className:"absolute top-0 left-0 right-0 rounded-t-sm",style:{height:"20px",transform:"rotateX(90deg)",transformOrigin:"top center",backgroundColor:se}}),E.jsxs("div",{className:"absolute inset-0 backface-hidden",style:{transform:"rotateY(0deg)",transformStyle:"preserve-3d"},children:[E.jsx("div",{className:"absolute inset-0 shadow-xl rounded-sm backface-hidden",style:{transform:"translateZ(0px)",backgroundColor:se}}),E.jsx("div",{className:"absolute inset-[2px] rounded-sm backface-hidden",style:{transform:"translateZ(0.5px)",backgroundColor:G}}),E.jsxs(en.div,{className:qn("absolute left-1/2 shadow-lg p-8 text-gray-800 origin-top backface-hidden overflow-hidden pointer-events-auto select-text",M),style:{transformStyle:"preserve-3d",width:"min(90%, 600px)",backgroundColor:w,willChange:"transform, opacity, height"},initial:"closed",animate:r?"open":"closed",variants:{closed:{x:"-50%",y:"5%",z:2,height:"90%",scale:.95,top:"5%"},open:{x:"-50%",y:"-50%",z:50,height:ue?"60vh":"75vh",scale:1,top:"0%",transition:{x:{duration:0},y:{delay:.6,duration:1.5,type:"spring",stiffness:50,damping:15},z:{delay:1,duration:0},scale:{delay:.6,duration:.8,type:"spring",stiffness:80,damping:12},height:{delay:.6,duration:.6}}}},children:[E.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 rounded-sm overflow-hidden mix-blend-multiply opacity-100",children:E.jsx(bR,{style:{width:"100%",height:"100%"},className:"w-full h-full",colorBack:"#ffffff",colorFront:"#f1efe8e3",contrast:.7,roughness:.4,fiber:.3,fiberSize:.4,crumples:.8,crumpleSize:.8,folds:.9,foldCount:3,drops:0,fade:0,seed:5.8,options:{scale:.6}})}),E.jsx("style",{children:`
              .custom-scrollbar::-webkit-scrollbar {
                display: none;
              }
              .custom-scrollbar {
                -ms-overflow-style: none;
                scrollbar-width: none;
              }
            `}),E.jsxs("div",{ref:X,onScroll:De,className:"custom-scrollbar relative z-10 h-full overflow-y-auto pr-2 touch-pan-y pointer-events-auto select-text overscroll-contain",children:[!R&&E.jsx("div",{className:"relative mt-4 ml-6 mb-6 w-10 h-10 mix-blend-multiply z-20",style:{width:"40px",height:"40px"},children:E.jsx("img",{src:P||gD,alt:"Logo",className:"w-full h-full object-contain"})}),E.jsx("div",{className:"pl-6 md:pl-8",children:typeof i=="string"?E.jsx("div",{dangerouslySetInnerHTML:{__html:i}}):i})]}),(ke||xe)&&E.jsxs("div",{className:"absolute right-4 bottom-4 z-50 flex flex-col gap-2 pointer-events-auto opacity-60 hover:opacity-100 transition-opacity mix-blend-multiply",children:[E.jsx("button",{onClick:q=>{q.stopPropagation(),X.current?.scrollBy({top:-100,behavior:"smooth"})},disabled:!ke,className:qn("p-1.5 rounded-full bg-white/20 hover:bg-white/40 border border-gray-400/30 transition-all",!ke&&"opacity-0 pointer-events-none"),children:E.jsx(_R,{size:20,className:"text-gray-700"})}),E.jsx("button",{onClick:q=>{q.stopPropagation(),X.current?.scrollBy({top:100,behavior:"smooth"})},disabled:!xe,className:qn("p-1.5 rounded-full bg-white/20 hover:bg-white/40 border border-gray-400/30 transition-all",!xe&&"opacity-0 pointer-events-none"),children:E.jsx(lm,{size:20,className:"text-gray-700"})})]})]}),E.jsxs("div",{className:qn("absolute inset-0 transition-colors backface-hidden",!r&&I?"cursor-pointer pointer-events-auto":"pointer-events-none"),onClick:q=>{q.stopPropagation(),!r&&I&&t()},style:{transform:"translateZ(20px)"},children:[E.jsx("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{filter:"drop-shadow(2px 1px 3px rgba(0,0,0,0.12))"},children:E.jsx("path",{d:"M0,0 L0,100 L55,55 Z",fill:se})}),E.jsx("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{filter:"drop-shadow(-2px 1px 3px rgba(0,0,0,0.12))"},children:E.jsx("path",{d:"M100,0 L100,100 L45,55 Z",fill:se})}),E.jsx("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{filter:"drop-shadow(0 -2px 4px rgba(0,0,0,0.1))"},children:E.jsx("path",{d:"M0,100 L100,100 L50,45 Z",fill:se})})]}),E.jsxs(en.div,{className:"absolute inset-0 w-full h-full origin-top pointer-events-none",style:{transformStyle:"preserve-3d",willChange:"transform"},initial:"closed",animate:r?"open":"closed",variants:{closed:{rotateX:0,z:22,transition:{rotateX:{duration:.8,type:"spring",stiffness:60,damping:12},z:{duration:0}}},open:{rotateX:180,z:0,transition:{rotateX:{duration:.8,type:"spring",stiffness:60,damping:12},z:{delay:.1,duration:.3}}}},children:[E.jsxs("div",{className:"absolute inset-0 backface-hidden cursor-pointer pointer-events-auto",onClick:q=>{q.stopPropagation(),!r&&I&&t()},children:[E.jsx("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{filter:"drop-shadow(0 4px 6px rgba(0,0,0,0.15))"},children:E.jsx("path",{d:"M0,0 L100,0 L50,55 Z",fill:se})}),E.jsx(en.div,{className:"absolute top-[50%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-24 h-24 pointer-events-auto cursor-pointer z-[100]",style:{transform:"translateZ(5px)"},whileHover:{scale:1.1},whileTap:{scale:.95},initial:"closed",animate:r?"open":"closed",variants:{closed:{opacity:1,transition:{delay:1.6,duration:.4}},open:{opacity:0,transition:{duration:0}}},children:C?E.jsx("img",{src:C,alt:"Wax Seal",className:"w-full h-full object-contain",style:{filter:"drop-shadow(2px 3px 4px rgba(0,0,0,0.4))"}}):E.jsx(yD,{className:"w-full h-full"})})]}),E.jsx(en.div,{className:"absolute inset-0 backface-hidden",style:{transform:"rotateY(180deg)"},variants:{closed:{opacity:0,transition:{delay:.8,duration:0}},open:{opacity:1,transition:{duration:0}}},children:E.jsx("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:E.jsx("path",{d:"M0.5,0 L99.5,0 L50,54.5 Z",fill:G})})})]})]}),E.jsxs("div",{className:"absolute inset-0 backface-hidden shadow-xl rounded-sm overflow-hidden",style:{transform:"rotateY(180deg) translateZ(20px)",backgroundColor:se,willChange:"transform"},onClick:()=>!I&&B(!0),children:[E.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/paper.png')] mix-blend-multiply pointer-events-none"}),E.jsx("div",{className:"absolute inset-4 border-2 opacity-30 pointer-events-none rounded-sm",style:{borderColor:G}}),u&&E.jsx("div",{className:"absolute top-6 right-6 w-20 h-24 transform rotate-3 shadow-sm border border-gray-300 p-1 bg-white overflow-hidden",children:E.jsx("img",{src:u,alt:"Stamp",className:"w-full h-full object-cover"})}),(D||T)&&E.jsx("div",{className:"absolute top-6 right-16 w-32 h-20 opacity-0 mix-blend-multiply pointer-events-none overflow-visible",children:T?E.jsx("img",{src:T,alt:"Postmark",className:"w-full h-full object-contain transform -rotate-12"}):E.jsxs("svg",{viewBox:"0 0 160 100",className:"w-full h-full transform -rotate-6",children:[E.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#2563eb",strokeWidth:"3"}),E.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"#2563eb",strokeWidth:"2"}),E.jsx("path",{id:"curve",d:"M 18 50 A 32 32 0 1 1 82 50",fill:"none"}),E.jsx("text",{fontSize:"12",fontFamily:"serif",fontWeight:"bold",fill:"#2563eb",letterSpacing:"1",children:E.jsx("textPath",{href:"#curve",startOffset:"50%",textAnchor:"middle",children:D||"ROYAL MAIL"})}),E.jsx("text",{x:"50",y:"55",textAnchor:"middle",fontSize:"14",fontFamily:"serif",fill:"#2563eb",children:"2026"}),E.jsx("path",{d:"M 95 30 Q 110 20 125 30 T 155 30",fill:"none",stroke:"#2563eb",strokeWidth:"3"}),E.jsx("path",{d:"M 95 45 Q 110 35 125 45 T 155 45",fill:"none",stroke:"#2563eb",strokeWidth:"3"}),E.jsx("path",{d:"M 95 60 Q 110 50 125 60 T 155 60",fill:"none",stroke:"#2563eb",strokeWidth:"3"}),E.jsx("path",{d:"M 95 75 Q 110 65 125 75 T 155 75",fill:"none",stroke:"#2563eb",strokeWidth:"3"})]})}),E.jsxs("div",{className:"absolute top-8 left-8 text-left opacity-90",children:[E.jsx("p",{className:"font-serif text-[#8a7f6b] text-[10px] tracking-widest uppercase mb-1",children:"From:"}),E.jsx("p",{className:qn("text-[#5c5343] font-medium leading-tight max-w-[150px] whitespace-pre-line",g),style:{fontSize:v},children:l})]}),E.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:[E.jsx("p",{className:"font-serif text-[#8a7f6b] text-[10px] tracking-widest uppercase mb-1",children:"To:"}),E.jsx("p",{className:qn("text-[#5c5343] font-medium leading-tight max-w-[200px] whitespace-pre-line",h),style:{fontSize:m},children:s})]}),E.jsx("div",{className:"absolute w-24 h-24 overflow-visible",style:{top:"80px",right:"4rem",transform:"rotate(-5deg)"},children:c?E.jsx("img",{src:c,alt:"Logo 1",className:"w-full h-full object-contain"}):null}),E.jsx("div",{className:"absolute bottom-6 right-6 w-14 h-14 overflow-hidden",children:d?E.jsx("img",{src:d,alt:"Logo 2",className:"w-full h-full object-contain"}):null})]})]})})}class vD{value=0}const am=zn.memo(({text:t,animationType:e,font:n="font-sans",fontSize:r=16,textColor:i="#000000",delay:s=0,animationSpeed:l=5})=>{const u=qn("prose prose-sm max-w-none",n),c={fontSize:r,color:i};if(e==="fade-in")return E.jsx(en.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5/(l/5),delay:s},className:u,style:c,dangerouslySetInnerHTML:{__html:t}});const d=F.useMemo(()=>{if(typeof document>"u")return[];const g=new DOMParser().parseFromString(t,"text/html");return Array.from(g.body.childNodes)},[t]),h=(m,g)=>m.map((v,S)=>{if(v.nodeType===Node.TEXT_NODE){const k=v.textContent||"";let w=[],C="";return e==="word-by-word"?(w=k.split(" "),C=" "):(w=k.split(""),C=""),E.jsx(zn.Fragment,{children:w.map((T,D)=>{const P=s+g.value*(e==="word-by-word"?.1:.03)/(l/5);g.value++;const R=e==="typewriter",M={duration:R?0:(e==="word-by-word"?.3:.1)/(l/5),delay:P},I=R?{opacity:0}:{opacity:0,y:e==="word-by-word"?10:0},B=R?{opacity:1}:{opacity:1,y:0};return E.jsxs(en.span,{initial:I,animate:B,transition:M,children:[T,D<w.length-1?C:""]},D)})},S)}else if(v.nodeType===Node.ELEMENT_NODE){const k=v,w=k.tagName.toLowerCase(),C={};for(let P=0;P<k.style.length;P++){const R=k.style[P];C[R.replace(/-./g,M=>M[1].toUpperCase())]=k.style.getPropertyValue(R)}let T=k.getAttribute("class")||"";if(w==="ul")T=qn(T,"list-outside ml-6 my-2"),C.listStyleType="disc";else if(w==="ol")T=qn(T,"list-outside ml-6 my-2"),C.listStyleType="decimal";else if(w==="li"){T=qn(T,"pl-1 mb-1"),C.display="list-item";const P=s+g.value*(e==="word-by-word"?.1:.03)/(l/5),R=e==="typewriter";return E.jsx(en.li,{initial:{opacity:0},animate:{opacity:1},transition:{duration:R?0:.1/(l/5),delay:P},style:C,className:T,children:h(Array.from(k.childNodes),g)},S)}const D=["br","img","hr","input","meta","link"].includes(w);return zn.createElement(w,{key:S,style:C,className:T,href:k.getAttribute("href"),target:k.getAttribute("target"),src:k.getAttribute("src"),alt:k.getAttribute("alt"),width:k.getAttribute("width"),height:k.getAttribute("height")},D?void 0:h(Array.from(k.childNodes),g))}return null});return E.jsx("div",{className:u,style:c,children:h(d,new vD)})});am.displayName="AnimatedText";function xD({text:t,animationType:e,font:n="font-sans",fontSize:r=16,toText:i,fromText:s,stampImage:l,logo1Src:u,logo2Src:c,toFont:d,toSize:h,fromFont:m,fromSize:g,envelopeColor:v="#9fadbc",insideEnvelopeColor:S="#ebe1cf",letterColor:k="#ffffff",animationSpeed:w=5,sealSrc:C,postmarkText:T,postmarkSrc:D,letterLogoSrc:P,hideLetterLogo:R}){const[M,I]=F.useState(!1),[B,X]=F.useState(!1),[ue,Ee]=F.useState(0),ke=()=>{I(!1),X(!1),setTimeout(()=>Ee(xe=>xe+1),100)};F.useEffect(()=>(M&&window.innerWidth<1024?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.documentElement.style.overflow=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[M]);const Ne=()=>{if(B){if(!M)return"tap or click to open the seal"}else return"tap or click to flip letter";return null};return E.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-8",children:E.jsxs("div",{className:"w-full max-w-2xl",children:[E.jsxs("div",{className:"relative min-h-[500px] flex items-center justify-center",children:[M&&E.jsx("div",{className:"fixed inset-0 z-40 cursor-default",onClick:ke}),E.jsx("div",{className:"relative z-50 w-full flex justify-center",children:E.jsx(Rw,{onOpen:()=>I(!0),onClose:()=>I(!1),onFlip:()=>X(!0),isOpen:M,to:i,from:s,stampSrc:l||void 0,logo1Src:u||void 0,logo2Src:c||void 0,toFont:d,toSize:h,fromFont:m,fromSize:g,paperColor:v,insideEnvelopeColor:S,letterColor:k,sealSrc:C,postmarkText:T,letterLogoSrc:P,hideLetterLogo:R,children:E.jsx(am,{text:t,animationType:e,font:n,fontSize:r,delay:1.5,animationSpeed:w},String(M))},ue)})]}),E.jsx("div",{className:"text-center mt-6",children:E.jsx("p",{className:"text-xs text-gray-500 font-mono tracking-wide",children:Ne()})})]})})}function SD({letters:t,onDelete:e,onOpen:n,onClose:r}){return E.jsxs("div",{className:"sidebar-container bg-white border-r border-black/5 flex flex-col h-screen overflow-hidden shrink-0",children:[E.jsxs("div",{className:"p-4 border-b border-black/5 flex justify-between items-start",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"font-mono uppercase tracking-wider text-black",style:{fontSize:"16px"},children:"Letter History"}),E.jsx("p",{className:"font-mono mt-1",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:"LOCAL HISTORY OF YOUR SENT LETTERS"})]}),E.jsx("button",{onClick:r,className:"p-1 hover:bg-black/5 rounded-full transition-colors",title:"Close Menu",children:E.jsx(uD,{className:"w-5 h-5 text-black/40",strokeWidth:1.5})})]}),E.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.length===0?E.jsxs("div",{className:"text-center py-10",children:[E.jsx(sD,{className:"w-8 h-8 mx-auto mb-2",style:{color:"rgba(0, 0, 0, 0.1)"}}),E.jsx("p",{className:"font-mono",style:{color:"rgba(0, 0, 0, 0.3)",fontSize:"10px"},children:"NO LETTERS SENT YET"})]}):t.map(i=>E.jsxs("div",{className:"bg-white border border-black/5 hover:border-black/10 p-3 transition-all duration-200",children:[E.jsxs("div",{className:"flex justify-between items-start mb-2",children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("h3",{className:"font-mono text-xs text-black uppercase truncate",children:["TO: ",i.recipient||"UNTITLED"]}),E.jsxs("span",{className:"font-mono",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:[new Date(i.createdAt).toLocaleDateString(),"  ",new Date(i.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),E.jsx("button",{onClick:()=>e(i.id),className:"text-black/30 hover:text-black/60 transition-colors p-1",title:"Delete",children:E.jsx(hD,{className:"w-3 h-3"})})]}),E.jsxs("div",{className:"font-mono line-clamp-2 mb-3",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:['"',i.excerpt,'"']}),E.jsx("button",{onClick:()=>n(i.url),className:"w-full flex items-center justify-center gap-2 font-mono uppercase tracking-wider text-white transition-all",style:{backgroundColor:"#6200ea",fontSize:"10px",height:"34px"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#5000ca",onMouseLeave:s=>s.currentTarget.style.backgroundColor="#6200ea",children:"OPEN LINK"})]},i.id))})]})}const Os=800,wD=.8;async function kD(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{let{width:i,height:s}=r;(i>Os||s>Os)&&(i>s?(s=Math.round(s/i*Os),i=Os):(i=Math.round(i/s*Os),s=Os));const l=document.createElement("canvas");l.width=i,l.height=s;const u=l.getContext("2d");if(!u){n(new Error("Could not get canvas context"));return}u.drawImage(r,0,0,i,s);let c="image/png";(t.startsWith("data:image/jpeg")||t.startsWith("data:image/jpg"))&&(c="image/jpeg");const d=l.toDataURL(c,c==="image/jpeg"?wD:void 0);e(d)},r.onerror=()=>n(new Error("Failed to load image")),r.src=t})}async function AD(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=async i=>{if(i.target?.result)try{const s=await kD(i.target.result);e(s)}catch(s){n(s)}},r.onerror=()=>n(new Error("Failed to read file")),r.readAsDataURL(t)})}const CD={},ED="https://api.imgbb.com/1/upload",bD=()=>CD?.VITE_IMGBB_API_KEY;async function TD(t,e){const n=bD();if(!n)return console.error("ImgBB API key not configured. Set VITE_IMGBB_API_KEY in .env"),null;const r=t.includes(",")?t.split(",")[1]:t,i=new FormData;i.append("key",n),i.append("image",r),e&&i.append("name",e);try{const l=await(await fetch(ED,{method:"POST",body:i})).json();return l.success&&l.data?l.data.display_url:(console.error("ImgBB upload failed:",l.error?.message),null)}catch(s){return console.error("ImgBB upload error:",s),null}}function Is(t){return t?t.startsWith("http")||t.startsWith("/")||t.startsWith("data:"):!1}var MD=H1();const ND=Mp(MD);var qd={exports:{}},Yd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function RD(){if(ox)return Yd;ox=1;var t=Ll();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,l=t.useDebugValue;function u(m,g){var v=g(),S=r({inst:{value:v,getSnapshot:g}}),k=S[0].inst,w=S[1];return s(function(){k.value=v,k.getSnapshot=g,c(k)&&w({inst:k})},[m,v,g]),i(function(){return c(k)&&w({inst:k}),m(function(){c(k)&&w({inst:k})})},[m]),l(v),v}function c(m){var g=m.getSnapshot;m=m.value;try{var v=g();return!n(m,v)}catch{return!0}}function d(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return Yd.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Yd}var lx;function Dw(){return lx||(lx=1,qd.exports=RD()),qd.exports}var Pw=Dw();function bt(t){this.content=t}bt.prototype={constructor:bt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new bt(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new bt(n)},addToStart:function(t,e){return new bt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new bt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new bt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=bt.from(t),t.size?new bt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=bt.from(t),t.size?new bt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=bt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};bt.from=function(t){if(t instanceof bt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new bt(e)};function Ow(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let l=0;i.text[l]==s.text[l];l++)n++;return n}if(i.content.size||s.content.size){let l=Ow(i.content,s.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function Iw(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let l=t.child(--i),u=e.child(--s),c=l.nodeSize;if(l==u){n-=c,r-=c;continue}if(!l.sameMarkup(u))return{a:n,b:r};if(l.isText&&l.text!=u.text){let d=0,h=Math.min(l.text.length,u.text.length);for(;d<h&&l.text[l.text.length-d-1]==u.text[u.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(l.content.size||u.content.size){let d=Iw(l.content,u.content,n-1,r-1);if(d)return d}n-=c,r-=c}}class W{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let l=0,u=0;u<n;l++){let c=this.content[l],d=u+c.nodeSize;if(d>e&&r(c,i+u,s||null,l)!==!1&&c.content.size){let h=u+1;c.nodesBetween(Math.max(0,e-h),Math.min(c.content.size,n-h),r,i+h)}u=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",l=!0;return this.nodesBetween(e,n,(u,c)=>{let d=u.isText?u.text.slice(Math.max(e,c)-c,n-c):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&d||u.isTextblock)&&r&&(l?l=!1:s+=r),s+=d},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new W(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,l=0;l<n;s++){let u=this.content[s],c=l+u.nodeSize;c>e&&((l<e||c>n)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,n-l-1))),r.push(u),i+=u.nodeSize),l=c}return new W(r,i)}cutByIndex(e,n){return e==n?W.empty:e==0&&n==this.content.length?this:new W(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new W(i,s)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Ow(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Iw(this,e,n,r)}findIndex(e){if(e==0)return ru(0,e);if(e==this.size)return ru(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?ru(n+1,s):ru(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return W.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new W(n||e,r)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Jd={index:0,offset:0};function ru(t,e){return Jd.index=t,Jd.offset=e,Jd}function Iu(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Iu(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Iu(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Fe=class Yh{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Iu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Yh.none;if(e instanceof Yh)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Fe.none=[];class Lu extends Error{}class ee{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Bw(this.content,e+this.openStart,n);return r&&new ee(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ee(Lw(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ee.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ee(W.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ee(e,r,i)}}ee.empty=new ee(W.empty,0,0);function Lw(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:l,offset:u}=t.findIndex(n);if(i==e||s.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Lw(s.content,e-i-1,n-i-1)))}function Bw(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),l=t.maybeChild(i);if(s==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=Bw(l.content,e-s-1,n,l);return u&&t.replaceChild(i,l.copy(u))}function DD(t,e,n){if(n.openStart>t.depth)throw new Lu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Lu("Inconsistent open depths");return Fw(t,e,n,0)}function Fw(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=Fw(t,e,n,r+1);return s.copy(s.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,u=l.content;return Gi(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=PD(n,t);return Gi(s,Vw(t,l,u,e,r))}else return Gi(s,Bu(t,e,r))}function zw(t,e){if(!e.type.compatibleContent(t.type))throw new Lu("Cannot join "+e.type.name+" onto "+t.type.name)}function Jh(t,e,n){let r=t.node(n);return zw(r,e.node(n)),r}function Qi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function al(t,e,n,r){let i=(e||t).node(n),s=0,l=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Qi(t.nodeAfter,r),s++));for(let u=s;u<l;u++)Qi(i.child(u),r);e&&e.depth==n&&e.textOffset&&Qi(e.nodeBefore,r)}function Gi(t,e){return t.type.checkContent(e),t.copy(e)}function Vw(t,e,n,r,i){let s=t.depth>i&&Jh(t,e,i+1),l=r.depth>i&&Jh(n,r,i+1),u=[];return al(null,t,i,u),s&&l&&e.index(i)==n.index(i)?(zw(s,l),Qi(Gi(s,Vw(t,e,n,r,i+1)),u)):(s&&Qi(Gi(s,Bu(t,e,i+1)),u),al(e,n,i,u),l&&Qi(Gi(l,Bu(n,r,i+1)),u)),al(r,null,i,u),new W(u)}function Bu(t,e,n){let r=[];if(al(null,t,n,r),t.depth>n){let i=Jh(t,e,n+1);Qi(Gi(i,Bu(t,e,n+1)),r)}return al(e,null,n,r),new W(r)}function PD(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(W.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Cl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Fe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let u=r;r=i,i=u}let s=r.marks;for(var l=0;l<s.length;l++)s[l].type.spec.inclusive===!1&&(!i||!s[l].isInSet(i.marks))&&(s=s[l--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Fu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let l=e;;){let{index:u,offset:c}=l.content.findIndex(s),d=s-c;if(r.push(l,u,i+c),!d||(l=l.child(u),l.isText))break;s=d-1,i+=c+1}return new Cl(n,r,s)}static resolveCached(e,n){let r=ax.get(e);if(r)for(let s=0;s<r.elts.length;s++){let l=r.elts[s];if(l.pos==n)return l}else ax.set(e,r=new OD);let i=r.elts[r.i]=Cl.resolve(e,n);return r.i=(r.i+1)%ID,i}}class OD{constructor(){this.elts=[],this.i=0}}const ID=12,ax=new WeakMap;class Fu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const LD=Object.create(null);let ni=class Xh{constructor(e,n,r,i=Fe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||W.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Iu(this.attrs,n||e.defaultAttrs||LD)&&Fe.sameSet(this.marks,r||Fe.none)}copy(e=null){return e==this.content?this:new Xh(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Xh(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ee.empty;let i=this.resolve(e),s=this.resolve(n),l=r?0:i.sharedDepth(n),u=i.start(l),d=i.node(l).content.cut(i.pos-u,s.pos-u);return new ee(d,i.depth-l,s.depth-l)}replace(e,n,r){return DD(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Cl.resolveCached(this,e)}resolveNoCache(e){return Cl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),jw(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=W.empty,i=0,s=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,s),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),l=s&&s.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Fe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Fe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=W.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ni.prototype.text=void 0;class zu extends ni{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):jw(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new zu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new zu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function jw(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Yi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new BD(e,n);if(r.next==null)return Yi.empty;let i=_w(r);r.next&&r.err("Unexpected trailing text");let s=HD(UD(i));return WD(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(l,u){let c=l.matchFragment(e,r);if(c&&(!n||c.validEnd))return W.from(u.map(d=>d.createAndFill()));for(let d=0;d<l.next.length;d++){let{type:h,next:m}=l.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let g=s(m,u.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<s.next.length;l++){let{type:u,next:c}=s.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!i.type||c.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)s+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return s}).join(`
`)}}Yi.empty=new Yi(!0);class BD{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function _w(t){let e=[];do e.push(FD(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function FD(t){let e=[];do e.push(zD(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function zD(t){let e=_D(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=VD(t,e);else break;return e}function ux(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function VD(t,e){let n=ux(t),r=n;return t.eat(",")&&(t.next!="}"?r=ux(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function jD(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let l=n[s];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function _D(t){if(t.eat("(")){let e=_w(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=jD(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function UD(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(l,u,c){let d={term:c,to:u};return e[l].push(d),d}function i(l,u){l.forEach(c=>c.to=u)}function s(l,u){if(l.type=="choice")return l.exprs.reduce((c,d)=>c.concat(s(d,u)),[]);if(l.type=="seq")for(let c=0;;c++){let d=s(l.exprs[c],u);if(c==l.exprs.length-1)return d;i(d,u=n())}else if(l.type=="star"){let c=n();return r(u,c),i(s(l.expr,c),c),[r(c)]}else if(l.type=="plus"){let c=n();return i(s(l.expr,u),c),i(s(l.expr,c),c),[r(c)]}else{if(l.type=="opt")return[r(u)].concat(s(l.expr,u));if(l.type=="range"){let c=u;for(let d=0;d<l.min;d++){let h=n();i(s(l.expr,c),h),c=h}if(l.max==-1)i(s(l.expr,c),c);else for(let d=l.min;d<l.max;d++){let h=n();r(c,h),i(s(l.expr,c),h),c=h}return[r(c)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function Uw(t,e){return e-t}function cx(t,e){let n=[];return r(e),n.sort(Uw);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let l=0;l<s.length;l++){let{term:u,to:c}=s[l];!u&&n.indexOf(c)==-1&&r(c)}}}function HD(t){let e=Object.create(null);return n(cx(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:u,to:c})=>{if(!u)return;let d;for(let h=0;h<i.length;h++)i[h][0]==u&&(d=i[h][1]);cx(t,c).forEach(h=>{d||i.push([u,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=e[r.join(",")]=new Yi(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(Uw);s.next.push({type:i[l][0],next:e[u.join(",")]||n(u)})}return s}}function WD(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:c,next:d}=i.next[u];l.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Hw(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Ww(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function Qw(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function Gw(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new GD(t,r,e[r]);return n}let fx=class Kw{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Gw(e,r.attrs),this.defaultAttrs=Hw(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Yi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ww(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ni(this,this.computeAttrs(e),W.from(n),Fe.setFrom(r))}createChecked(e=null,n,r){return n=W.from(n),this.checkContent(n),new ni(this,this.computeAttrs(e),n,Fe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=W.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(W.empty,!0);return s?new ni(this,e,n.append(s),Fe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Qw(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Fe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,l)=>r[s]=new Kw(s,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function QD(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class GD{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?QD(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Mc{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=Gw(e,i.attrs),this.excluded=null;let s=Hw(this.attrs);this.instance=s?new Fe(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Fe(this,Ww(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,l)=>r[s]=new Mc(s,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Qw(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class $w{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=bt.from(e.nodes),n.marks=bt.from(e.marks||{}),this.nodes=fx.compile(this.spec.nodes,this),this.marks=Mc.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],l=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[l]||(r[l]=Yi.parse(l,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?dx(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],l=s.spec.excludes;s.excluded=l==null?[s]:l==""?[]:dx(this,l.split(" "))}this.nodeFromJSON=i=>ni.fromJSON(this,i),this.markFromJSON=i=>Fe.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof fx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new zu(r,r.defaultAttrs,e,Fe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function dx(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],l=s;if(s)n.push(s);else for(let u in t.marks){let c=t.marks[u];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=c)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function KD(t){return t.tag!=null}function $D(t){return t.style!=null}let ul=class Zh{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(KD(i))this.tags.push(i);else if($D(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new px(this,n,!1);return r.addAll(e,Fe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new px(this,n,!0);return r.addAll(e,Fe.none,n.from,n.to),ee.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(JD(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let l=s.getAttrs(e);if(l===!1)continue;s.attrs=l||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let l=this.styles[s],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(l.getAttrs){let c=l.getAttrs(n);if(c===!1)continue;l.attrs=c||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<s)break}n.splice(l,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(l=>{r(l=mx(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(l=>{r(l=mx(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zh(e,Zh.schemaRules(e)))}};const qw={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Yw={ol:!0,ul:!0},El=1,ep=2,cl=4;function hx(t,e,n){return e!=null?(e?El:0)|(e==="full"?ep:0):t&&t.whitespace=="pre"?El|ep:n&~cl}class iu{constructor(e,n,r,i,s,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=Fe.none,this.match=s||(l&cl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(W.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&El)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=W.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!qw.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class px{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,l=hx(null,n.preserveWhitespace,0)|(r?cl:0);i?s=new iu(i.type,i.attrs,Fe.none,!0,n.topMatch||i.type.contentMatch,l):r?s=new iu(null,null,Fe.none,!0,null,l):s=new iu(e.schema.topNodeType,null,Fe.none,!0,null,l),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&ep?"full":this.localPreserveWS||(i.options&El)>0,{schema:l}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let c=0;c<u.length;c++)c&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[c]&&this.insertNode(l.text(u[c]),n,!/\S/.test(u[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],c=e.previousSibling;(!u||c&&c.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;Yw.hasOwnProperty(l)&&this.parser.normalizeLists&&YD(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(c?c.ignore:qD.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let d,h=this.needsBlock;if(qw.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=c&&c.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,c,d,c.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],l=r.getPropertyValue(s);if(l)for(let u=void 0;;){let c=this.parser.matchStyle(s,l,this,u);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(d=>!c.clearMark(d)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)u=c;else break}}return n}addElementByRule(e,n,r,i){let s,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(l,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}s&&this.sync(u)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(l,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let l=this.open,u=0;l>=0;l--){let c=this.nodes[l],d=c.findWrapping(e);if(d&&(!i||i.length>d.length+u)&&(i=d,s=c,!d.length))break;if(c.solid){if(r)break;u+=2}}if(!i)return null;this.sync(s);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let l=Fe.none;for(let u of i.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):gx(u.type,e.type))&&(l=u.addToSet(l));return s.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=hx(e,s,l.options);l.options&cl&&l.content.length==0&&(u|=cl);let c=Fe.none;return r=r.filter(d=>(l.type?l.type.allowsMarkType(d.type):gx(d.type,e))?(c=d.addToSet(c),!1):!0),this.nodes.push(new iu(e,n,c,i,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=El)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),l=(u,c)=>{for(;u>=0;u--){let d=n[u];if(d==""){if(u==n.length-1||u==0)continue;for(;c>=s;c--)if(l(u-1,c))return!0;return!1}else{let h=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;c--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function YD(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Yw.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function JD(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function mx(t){let e={};for(let n in t)e[n]=t[n];return e}function gx(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],l=u=>{s.push(u);for(let c=0;c<u.edgeCount;c++){let{type:d,next:h}=u.edge(c);if(d==e||s.indexOf(h)<0&&l(h))return!0}};if(l(i.contentMatch))return!0}}class ts{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Xd(n).createDocumentFragment());let i=r,s=[];return e.forEach(l=>{if(s.length||l.marks.length){let u=0,c=0;for(;u<s.length&&c<l.marks.length;){let d=l.marks[c];if(!this.marks[d.type.name]){c++;continue}if(!d.eq(s[u][0])||d.type.spec.spanning===!1)break;u++,c++}for(;u<s.length;)i=s.pop()[1];for(;c<l.marks.length;){let d=l.marks[c++],h=this.serializeMark(d,l.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ku(Xd(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ku(Xd(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ku(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ts(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=yx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return yx(e.marks)}}function yx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Xd(t){return t.document||window.document}const vx=new WeakMap;function XD(t){let e=vx.get(t);return e===void 0&&vx.set(t,e=ZD(t)),e}function ZD(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ku(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=XD(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let u,c=n?t.createElementNS(n,i):t.createElement(i),d=e[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let m in d)if(d[m]!=null){let g=m.indexOf(" ");g>0?c.setAttributeNS(m.slice(0,g),m.slice(g+1),d[m]):m=="style"&&c.style?c.style.cssText=d[m]:c.setAttribute(m,d[m])}}for(let m=h;m<e.length;m++){let g=e[m];if(g===0){if(m<e.length-1||m>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:v,contentDOM:S}=ku(t,g,n,r);if(c.appendChild(v),S){if(u)throw new RangeError("Multiple content holes");u=S}}}return{dom:c,contentDOM:u}}const Jw=65535,Xw=Math.pow(2,16);function eP(t,e){return t+e*Xw}function xx(t){return t&Jw}function tP(t){return(t-(t&Jw))/Xw}const Zw=1,ek=2,Au=4,tk=8;class tp{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&tk)>0}get deletedBefore(){return(this.delInfo&(Zw|Au))>0}get deletedAfter(){return(this.delInfo&(ek|Au))>0}get deletedAcross(){return(this.delInfo&Au)>0}}class ln{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ln.empty)return ln.empty}recover(e){let n=0,r=xx(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+tP(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?i:0);if(c>e)break;let d=this.ranges[u+s],h=this.ranges[u+l],m=c+d;if(e<=m){let g=d?e==c?-1:e==m?1:n:n,v=c+i+(g<0?0:h);if(r)return v;let S=e==(n<0?c:m)?null:eP(u/3,e-c),k=e==c?ek:e==m?Zw:Au;return(n<0?e!=c:e!=m)&&(k|=tk),new tp(v,k,S)}i+=h-d}return r?e+i:new tp(e+i,0,null)}touches(e,n){let r=0,i=xx(n),s=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let c=this.ranges[u]-(this.inverted?r:0);if(c>e)break;let d=this.ranges[u+s],h=c+d;if(e<=h&&u==i*3)return!0;r+=this.ranges[u+l]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?s:0),c=l+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];e(u,u+d,c,c+h),s+=h-d}}invert(){return new ln(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ln.empty:new ln(e<0?[0,-e,0]:[0,0,e])}}ln.empty=new ln([]);class bl{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new bl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new bl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let l=this._maps[s],u=l.mapResult(e,n);if(u.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,e=this._maps[c].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new tp(e,i,null)}}const Zd=Object.create(null);class Vt{getMap(){return ln.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Zd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zd)throw new RangeError("Duplicate use of step JSON ID "+e);return Zd[e]=n,n.prototype.jsonID=e,n}}class st{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new st(e,null)}static fail(e){return new st(null,e)}static fromReplace(e,n,r,i){try{return st.ok(e.replace(n,r,i))}catch(s){if(s instanceof Lu)return st.fail(s.message);throw s}}}function um(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(um(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return W.fromArray(r)}class Zr extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ee(um(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return st.fromReplace(e,this.from,this.to,s)}invert(){return new Fn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Zr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Zr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Zr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Zr(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("addMark",Zr);class Fn extends Vt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ee(um(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return st.fromReplace(e,this.from,this.to,r)}invert(){return new Zr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Fn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Fn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Fn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Fn(n.from,n.to,e.markFromJSON(n.mark))}}Vt.jsonID("removeMark",Fn);class ei extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return st.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return st.fromReplace(e,this.pos,this.pos+1,new ee(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ei(this.pos,n.marks[i]);return new ei(this.pos,this.mark)}}return new Ji(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ei(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ei(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("addNodeMark",ei);class Ji extends Vt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return st.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return st.fromReplace(e,this.pos,this.pos+1,new ee(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ei(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ji(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ji(n.pos,e.markFromJSON(n.mark))}}Vt.jsonID("removeNodeMark",Ji);class vt extends Vt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&np(e,this.from,this.to)?st.fail("Structure replace would overwrite content"):st.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ln([this.from,this.to-this.from,this.slice.size])}invert(e){return new vt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof vt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ee.empty:new ee(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ee.empty:new ee(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vt(n.from,n.to,ee.fromJSON(e,n.slice),!!n.structure)}}Vt.jsonID("replace",vt);class St extends Vt{constructor(e,n,r,i,s,l,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=l,this.structure=u}apply(e){if(this.structure&&(np(e,this.from,this.gapFrom)||np(e,this.gapTo,this.to)))return st.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return st.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?st.fromReplace(e,this.from,this.to,r):st.fail("Content does not fit in gap")}getMap(){return new ln([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new St(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new St(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new St(n.from,n.to,n.gapFrom,n.gapTo,ee.fromJSON(e,n.slice),n.insert,!!n.structure)}}Vt.jsonID("replaceAround",St);function np(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let l=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function nP(t,e,n,r){let i=[],s=[],l,u;t.doc.nodesBetween(e,n,(c,d,h)=>{if(!c.isInline)return;let m=c.marks;if(!r.isInSet(m)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,e),v=Math.min(d+c.nodeSize,n),S=r.addToSet(m);for(let k=0;k<m.length;k++)m[k].isInSet(S)||(l&&l.to==g&&l.mark.eq(m[k])?l.to=v:i.push(l=new Fn(g,v,m[k])));u&&u.to==g?u.to=v:s.push(u=new Zr(g,v,r))}}),i.forEach(c=>t.step(c)),s.forEach(c=>t.step(c))}function rP(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(l,u)=>{if(!l.isInline)return;s++;let c=null;if(r instanceof Mc){let d=l.marks,h;for(;h=r.isInSet(d);)(c||(c=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(l.marks)&&(c=[r]):c=l.marks;if(c&&c.length){let d=Math.min(u+l.nodeSize,n);for(let h=0;h<c.length;h++){let m=c[h],g;for(let v=0;v<i.length;v++){let S=i[v];S.step==s-1&&m.eq(i[v].style)&&(g=S)}g?(g.to=d,g.step=s):i.push({style:m,from:Math.max(u,e),to:d,step:s})}}}),i.forEach(l=>t.step(new Fn(l.from,l.to,l.style)))}function cm(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),l=[],u=e+1;for(let c=0;c<s.childCount;c++){let d=s.child(c),h=u+d.nodeSize,m=r.matchType(d.type);if(!m)l.push(new vt(u,h,ee.empty));else{r=m;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||t.step(new Fn(u,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,v=/\r?\n|\r/g,S;for(;g=v.exec(d.text);)S||(S=new ee(W.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),l.push(new vt(u+g.index,u+g.index+g[0].length,S))}}u=h}if(!r.validEnd){let c=r.fillBefore(W.empty,!0);t.replace(u,u,new ee(c,0,0))}for(let c=l.length-1;c>=0;c--)t.step(l[c])}function iP(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function oo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let l=t.$from.node(r),u=t.$from.index(r)+i,c=t.$to.indexAfter(r)-s;if(r<t.depth&&l.canReplace(u,c,n))return r;if(r==0||l.type.spec.isolating||!iP(l,u,c))break;u&&(i=1),c<l.childCount&&(s=1)}return null}function sP(t,e,n){let{$from:r,$to:i,depth:s}=e,l=r.before(s+1),u=i.after(s+1),c=l,d=u,h=W.empty,m=0;for(let S=s,k=!1;S>n;S--)k||r.index(S)>0?(k=!0,h=W.from(r.node(S).copy(h)),m++):c--;let g=W.empty,v=0;for(let S=s,k=!1;S>n;S--)k||i.after(S+1)<i.end(S)?(k=!0,g=W.from(i.node(S).copy(g)),v++):d++;t.step(new St(c,d,l,u,new ee(h.append(g),m,v),h.size-m,!0))}function fm(t,e,n=null,r=t){let i=oP(t,e),s=i&&lP(r,e);return s?i.map(Sx).concat({type:e,attrs:n}).concat(s.map(Sx)):null}function Sx(t){return{type:t,attrs:null}}function oP(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let l=s.length?s[0]:e;return n.canReplaceWith(r,i,l)?s:null}function lP(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),l=e.contentMatch.findWrapping(s.type);if(!l)return null;let c=(l.length?l[l.length-1]:e).contentMatch;for(let d=r;c&&d<i;d++)c=c.matchType(n.child(d).type);return!c||!c.validEnd?null:l}function aP(t,e,n){let r=W.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let u=n[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(n[l].type.create(n[l].attrs,r))}let i=e.start,s=e.end;t.step(new St(i,s,i,s,new ee(r,0,0),n.length,!0))}function uP(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(l,u)=>{let c=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,c)&&cP(t.doc,t.mapping.slice(s).map(u),r)){let d=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!S?d=!1:!v&&S&&(d=!0)}d===!1&&rk(t,l,u,s),cm(t,t.mapping.slice(s).map(u,1),r,void 0,d===null);let h=t.mapping.slice(s),m=h.map(u,1),g=h.map(u+l.nodeSize,1);return t.step(new St(m,g,m+1,g-1,new ee(W.from(r.create(c,null,l.marks)),0,0),1,!0)),d===!0&&nk(t,l,u,s),!1}})}function nk(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let c=t.mapping.slice(r).map(n+1+s+l.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function rk(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+s);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function cP(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function fP(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let l=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,l);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new St(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ee(W.from(l),0,0),1,!0))}function yr(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,l=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let m=i.node(d),g=i.index(d);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(g,m.childCount),S=r&&r[h+1];S&&(v=v.replaceChild(0,S.type.create(S.attrs)));let k=r&&r[h]||m;if(!m.canReplace(g+1,m.childCount)||!k.type.validContent(v))return!1}let u=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(u,u,c?c.type:i.node(s+1).type)}function dP(t,e,n=1,r){let i=t.doc.resolve(e),s=W.empty,l=W.empty;for(let u=i.depth,c=i.depth-n,d=n-1;u>c;u--,d--){s=W.from(i.node(u).copy(s));let h=r&&r[d];l=W.from(h?h.type.create(h.attrs,l):i.node(u).copy(l))}t.step(new vt(e,e,new ee(s.append(l),n,n),!0))}function fi(t,e){let n=t.resolve(e),r=n.index();return ik(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function hP(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),l=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function ik(t,e){return!!(t&&e&&!t.isLeaf&&hP(t,e))}function Nc(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,l,u=r.index(i);if(i==r.depth?(s=r.nodeBefore,l=r.nodeAfter):n>0?(s=r.node(i+1),u++,l=r.node(i).maybeChild(u)):(s=r.node(i).maybeChild(u-1),l=r.node(i+1)),s&&!s.isTextblock&&ik(s,l)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function pP(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),l=s.node().type;if(i&&l.inlineContent){let h=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);h&&!m?r=!1:!h&&m&&(r=!0)}let u=t.steps.length;if(r===!1){let h=t.doc.resolve(e+n);rk(t,h.node(),h.before(),u)}l.inlineContent&&cm(t,e+n-1,l,s.node().contentMatchAt(s.index()),r==null);let c=t.mapping.slice(u),d=c.map(e-n);if(t.step(new vt(d,c.map(e+n,-1),ee.empty,!0)),r===!0){let h=t.doc.resolve(d);nk(t,h.node(),h.before(),t.steps.length)}return t}function mP(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function sk(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,c=r.index(l)+(u>0?1:0),d=r.node(l),h=!1;if(s==1)h=d.canReplace(c,c,i);else{let m=d.contentMatchAt(c).findWrapping(i.firstChild.type);h=m&&d.canReplaceWith(c,c,m[0])}if(h)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Rc(t,e,n=e,r=ee.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return ok(i,s,r)?new vt(e,n,r):new gP(i,s,r).fit()}function ok(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class gP{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=W.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,l=r.depth,u=i.depth;for(;l&&u&&s.childCount==1;)s=s.firstChild.content,l--,u--;let c=new ee(s,l,u);return e>-1?new St(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new vt(r.pos,i.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=eh(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:c,match:d}=this.frontier[u],h,m=null;if(n==1&&(l?d.matchType(l.type)||(m=d.fillBefore(W.from(l),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:m};if(n==2&&l&&(h=d.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eh(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ee(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eh(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new ee(el(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ee(el(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let k=0;k<s.length;k++)this.openFrontierNode(s[k]);let l=this.unplaced,u=r?r.content:l.content,c=l.openStart-e,d=0,h=[],{match:m,type:g}=this.frontier[n];if(i){for(let k=0;k<i.childCount;k++)h.push(i.child(k));m=m.matchFragment(i)}let v=u.size+e-(l.content.size-l.openEnd);for(;d<u.childCount;){let k=u.child(d),w=m.matchType(k.type);if(!w)break;d++,(d>1||c==0||k.content.size)&&(m=w,h.push(lk(k.mark(g.allowedMarks(k.marks)),d==1?c:0,d==u.childCount?v:-1)))}let S=d==u.childCount;S||(v=-1),this.placed=tl(this.placed,n,W.from(h)),this.frontier[n].match=m,S&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,w=u;k<v;k++){let C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=S?e==0?ee.empty:new ee(el(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new ee(el(l.content,e,d),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!th(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=th(e,n,i,r,s);if(l){for(let u=n-1;u>=0;u--){let{match:c,type:d}=this.frontier[u],h=th(e,u,d,c,!0);if(!h||h.childCount)continue e}return{depth:n,fit:l,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=tl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=tl(this.placed,this.depth,W.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(W.empty,!0);n.childCount&&(this.placed=tl(this.placed,this.frontier.length,n))}}function el(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(el(t.firstChild.content,e-1,n)))}function tl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(tl(t.lastChild.content,e-1,n)))}function eh(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function lk(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,lk(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),t.copy(r)}function th(t,e,n,r,i){let s=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==s.childCount&&!n.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,l);return u&&!yP(n,s.content,l)?u:null}function yP(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function vP(t){return t.spec.defining||t.spec.definingForContent}function xP(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(ok(i,s,r))return t.step(new vt(e,n,r));let l=uk(i,s);l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let g=i.depth,v=i.pos-1;g>0;g--,v--){let S=i.node(g).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;l.indexOf(g)>-1?u=g:i.before(g)==v&&l.splice(1,0,-g)}let c=l.indexOf(u),d=[],h=r.openStart;for(let g=r.content,v=0;;v++){let S=g.firstChild;if(d.push(S),v==r.openStart)break;g=S.content}for(let g=h-1;g>=0;g--){let v=d[g],S=vP(v.type);if(S&&!v.sameMarkup(i.node(Math.abs(u)-1)))h=g;else if(S||!v.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let v=(g+h+1)%(r.openStart+1),S=d[v];if(S)for(let k=0;k<l.length;k++){let w=l[(k+c)%l.length],C=!0;w<0&&(C=!1,w=-w);let T=i.node(w-1),D=i.index(w-1);if(T.canReplaceWith(D,D,S.type,S.marks))return t.replace(i.before(w),C?s.after(w):n,new ee(ak(r.content,0,r.openStart,v),v,r.openEnd))}}let m=t.steps.length;for(let g=l.length-1;g>=0&&(t.replace(e,n,r),!(t.steps.length>m));g--){let v=l[g];v<0||(e=i.before(v),n=s.after(v))}}function ak(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(ak(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),l=s.fillBefore(t).append(t);t=l.append(s.matchFragment(l).fillBefore(W.empty,!0))}return t}function SP(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=mP(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ee(W.from(r),0,0))}function wP(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=uk(r,i);for(let l=0;l<s.length;l++){let u=s[l],c=l==s.length-1;if(c&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),i.end(u));if(u>0&&(c||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return t.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function uk(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Ks extends Vt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return st.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return st.fromReplace(e,this.pos,this.pos+1,new ee(W.from(i),0,n.isLeaf?0:1))}getMap(){return ln.empty}invert(e){return new Ks(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ks(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ks(n.pos,n.attr,n.value)}}Vt.jsonID("attr",Ks);class Tl extends Vt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return st.ok(r)}getMap(){return ln.empty}invert(e){return new Tl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tl(n.attr,n.value)}}Vt.jsonID("docAttr",Tl);let Ys=class extends Error{};Ys=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ys.prototype=Object.create(Error.prototype);Ys.prototype.constructor=Ys;Ys.prototype.name="TransformError";class ck{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new bl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ys(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ee.empty){let i=Rc(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ee(W.from(r),0,0))}delete(e,n){return this.replace(e,n,ee.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return xP(this,e,n,r),this}replaceRangeWith(e,n,r){return SP(this,e,n,r),this}deleteRange(e,n){return wP(this,e,n),this}lift(e,n){return sP(this,e,n),this}join(e,n=1){return pP(this,e,n),this}wrap(e,n){return aP(this,e,n),this}setBlockType(e,n=e,r,i=null){return uP(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return fP(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ks(e,n,r)),this}setDocAttribute(e,n){return this.step(new Tl(e,n)),this}addNodeMark(e,n){return this.step(new ei(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Fe)n.isInSet(r.marks)&&this.step(new Ji(e,n));else{let i=r.marks,s,l=[];for(;s=n.isInSet(i);)l.push(new Ji(e,s)),i=s.removeFromSet(i);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,n=1,r){return dP(this,e,n,r),this}addMark(e,n,r){return nP(this,e,n,r),this}removeMark(e,n,r){return rP(this,e,n,r),this}clearIncompatible(e,n,r){return cm(this,e,n,r),this}}const nh=Object.create(null);class ve{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new kP(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ee.empty){let r=n.content.lastChild,i=null;for(let u=0;u<n.openEnd;u++)i=r,r=r.lastChild;let s=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:c,$to:d}=l[u],h=e.mapping.slice(s);e.replaceRange(h.map(c.pos),h.map(d.pos),u?ee.empty:n),u==0&&Ax(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:u}=i[s],c=e.mapping.slice(r),d=c.map(l.pos),h=c.map(u.pos);s?e.deleteRange(d,h):(e.replaceRangeWith(d,h,n),Ax(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new pe(e):Fs(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let l=n<0?Fs(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Fs(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new an(e.node(0))}static atStart(e){return Fs(e,e,0,0,1)||new an(e)}static atEnd(e){return Fs(e,e,e.content.size,e.childCount,-1)||new an(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nh[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nh)throw new RangeError("Duplicate use of selection JSON ID "+e);return nh[e]=n,n.prototype.jsonID=e,n}getBookmark(){return pe.between(this.$anchor,this.$head).getBookmark()}}ve.prototype.visible=!0;class kP{constructor(e,n){this.$from=e,this.$to=n}}let wx=!1;function kx(t){!wx&&!t.parent.inlineContent&&(wx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class pe extends ve{constructor(e,n=e){kx(e),kx(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ve.near(r);let i=e.resolve(n.map(this.anchor));return new pe(i.parent.inlineContent?i:r,r)}replace(e,n=ee.empty){if(super.replace(e,n),n==ee.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof pe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Dc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new pe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=ve.findFrom(n,r,!0)||ve.findFrom(n,-r,!0);if(s)n=s.$head;else return ve.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ve.findFrom(e,-r,!0)||ve.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new pe(e,n)}}ve.jsonID("text",pe);class Dc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Dc(e.map(this.anchor),e.map(this.head))}resolve(e){return pe.between(e.resolve(this.anchor),e.resolve(this.head))}}class ae extends ve{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?ve.near(s):new ae(s)}content(){return new ee(W.from(this.node),0,0)}eq(e){return e instanceof ae&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dm(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ae(e.resolve(n.anchor))}static create(e,n){return new ae(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ae.prototype.visible=!1;ve.jsonID("node",ae);class dm{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Dc(r,r):new dm(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ae.isSelectable(r)?new ae(n):ve.near(n)}}class an extends ve{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ee.empty){if(n==ee.empty){e.delete(0,e.doc.content.size);let r=ve.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new an(e)}map(e){return new an(e)}eq(e){return e instanceof an}getBookmark(){return AP}}ve.jsonID("all",an);const AP={map(){return this},resolve(t){return new an(t)}};function Fs(t,e,n,r,i,s=!1){if(e.inlineContent)return pe.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!s&&ae.isSelectable(u))return ae.create(t,n-(i<0?u.nodeSize:0))}else{let c=Fs(t,u,n+i,i<0?u.childCount:0,i,s);if(c)return c}n+=u.nodeSize*i}return null}function Ax(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof vt||i instanceof St))return;let s=t.mapping.maps[r],l;s.forEach((u,c,d,h)=>{l==null&&(l=h)}),t.setSelection(ve.near(t.doc.resolve(l),n))}const Cx=1,su=2,Ex=4;class CP extends ck{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Cx)&~su,this.storedMarks=null,this}get selectionSet(){return(this.updated&Cx)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=su,this}ensureMarks(e){return Fe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&su)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~su,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Fe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let l=this.doc.resolve(n);s=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ve.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ex,this}get scrolledIntoView(){return(this.updated&Ex)>0}}function bx(t,e){return!e||!t?t:t.bind(e)}class nl{constructor(e,n,r){this.name=e,this.init=bx(n.init,r),this.apply=bx(n.apply,r)}}const EP=[new nl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new nl("selection",{init(t,e){return t.selection||ve.atStart(e.doc)},apply(t){return t.selection}}),new nl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new nl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rh{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=EP.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new nl(r.key,r.spec.state,r))})}}class Qs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let c=i?i[l].n:0,d=i?i[l].state:this,h=c<n.length&&u.spec.appendTransaction.call(u,c?n.slice(c):n,d,r);if(h&&r.filterTransaction(h,l)){if(h.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[l]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Qs(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new CP(this)}static create(e){let n=new rh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qs(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rh(this.schema,e.plugins),r=n.fields,i=new Qs(n);for(let s=0;s<r.length;s++){let l=r[s].name;i[l]=this.hasOwnProperty(l)?this[l]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rh(e.schema,e.plugins),s=new Qs(i);return i.fields.forEach(l=>{if(l.name=="doc")s.doc=ni.fromJSON(e.schema,n.doc);else if(l.name=="selection")s.selection=ve.fromJSON(s.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let c=r[u],d=c.spec.state;if(c.key==l.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){s[l.name]=d.fromJSON.call(c,e,n[u],s);return}}s[l.name]=l.init(e,s)}}),s}}function fk(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=fk(i,e,{})),n[r]=i}return n}class qe{constructor(e){this.spec=e,this.props={},e.props&&fk(e.props,this,this.props),this.key=e.key?e.key.key:dk("plugin")}getState(e){return e[this.key]}}const ih=Object.create(null);function dk(t){return t in ih?t+"$"+ ++ih[t]:(ih[t]=0,t+"$")}class ht{constructor(e="key"){this.key=dk(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const hm=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function hk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const pk=(t,e,n)=>{let r=hk(t,n);if(!r)return!1;let i=pm(r);if(!i){let l=r.blockRange(),u=l&&oo(l);return u==null?!1:(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}let s=i.nodeBefore;if(Ak(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Js(s,"end")||ae.isSelectable(s)))for(let l=r.depth;;l--){let u=Rc(t.doc,r.before(l),r.after(l),ee.empty);if(u&&u.slice.size<u.to-u.from){if(e){let c=t.tr.step(u);c.setSelection(Js(s,"end")?ve.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):ae.create(c.doc,i.pos-s.nodeSize)),e(c.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},bP=(t,e,n)=>{let r=hk(t,n);if(!r)return!1;let i=pm(r);return i?mk(t,i,e):!1},TP=(t,e,n)=>{let r=yk(t,n);if(!r)return!1;let i=mm(r);return i?mk(t,i,e):!1};function mk(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let l=e.nodeAfter,u=l,c=e.pos+1;for(;!u.isTextblock;c++){if(u.type.spec.isolating)return!1;let h=u.firstChild;if(!h)return!1;u=h}let d=Rc(t.doc,s,c,ee.empty);if(!d||d.from!=s||d instanceof vt&&d.slice.size>=c-s)return!1;if(n){let h=t.tr.step(d);h.setSelection(pe.create(h.doc,s)),n(h.scrollIntoView())}return!0}function Js(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const gk=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=pm(r)}let l=s&&s.nodeBefore;return!l||!ae.isSelectable(l)?!1:(e&&e(t.tr.setSelection(ae.create(t.doc,s.pos-l.nodeSize)).scrollIntoView()),!0)};function pm(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function yk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const vk=(t,e,n)=>{let r=yk(t,n);if(!r)return!1;let i=mm(r);if(!i)return!1;let s=i.nodeAfter;if(Ak(t,i,e,1))return!0;if(r.parent.content.size==0&&(Js(s,"start")||ae.isSelectable(s))){let l=Rc(t.doc,r.before(),r.after(),ee.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(Js(s,"start")?ve.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):ae.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},xk=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=mm(r)}let l=s&&s.nodeAfter;return!l||!ae.isSelectable(l)?!1:(e&&e(t.tr.setSelection(ae.create(t.doc,s.pos)).scrollIntoView()),!0)};function mm(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const MP=(t,e)=>{let n=t.selection,r=n instanceof ae,i;if(r){if(n.node.isTextblock||!fi(t.doc,n.from))return!1;i=n.from}else if(i=Nc(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(ae.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},NP=(t,e)=>{let n=t.selection,r;if(n instanceof ae){if(n.node.isTextblock||!fi(t.doc,n.to))return!1;r=n.to}else if(r=Nc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},RP=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&oo(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Sk=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function gm(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const DP=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),l=gm(i.contentMatchAt(s));if(!l||!i.canReplaceWith(s,s,l))return!1;if(e){let u=n.after(),c=t.tr.replaceWith(u,u,l.createAndFill());c.setSelection(ve.near(c.doc.resolve(u),1)),e(c.scrollIntoView())}return!0},wk=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof an||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=gm(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=t.tr.insert(l,s.createAndFill());u.setSelection(pe.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},kk=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(yr(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&oo(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function PP(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ae&&e.selection.node.isBlock)return!r.parentOffset||!yr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],l,u,c=!1,d=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){c=r.end(v)==r.pos+(r.depth-v),d=r.start(v)==r.pos-(r.depth-v),u=gm(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),s.unshift(c&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;s.unshift(null)}let h=e.tr;(e.selection instanceof pe||e.selection instanceof an)&&h.deleteSelection();let m=h.mapping.map(r.pos),g=yr(h.doc,m,s.length,s);if(g||(s[0]=u?{type:u}:null,g=yr(h.doc,m,s.length,s)),!g)return!1;if(h.split(m,s.length,s),!c&&d&&r.node(l).type!=u){let v=h.mapping.map(r.before(l)),S=h.doc.resolve(v);u&&r.node(l-1).canReplaceWith(S.index(),S.index()+1,u)&&h.setNodeMarkup(h.mapping.map(r.before(l)),u)}return n&&n(h.scrollIntoView()),!0}}const OP=PP(),IP=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(ae.create(t.doc,i))),!0)};function LP(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||fi(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Ak(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,l,u,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&LP(t,e,n))return!0;let d=!c&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&u.matchType(l[0]||s.type).validEnd){if(n){let v=e.pos+s.nodeSize,S=W.empty;for(let C=l.length-1;C>=0;C--)S=W.from(l[C].create(null,S));S=W.from(i.copy(S));let k=t.tr.step(new St(e.pos-1,v,e.pos,v,new ee(S,1,0),l.length,!0)),w=k.doc.resolve(v+2*l.length);w.nodeAfter&&w.nodeAfter.type==i.type&&fi(k.doc,w.pos)&&k.join(w.pos),n(k.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&c?null:ve.findFrom(e,1),m=h&&h.$from.blockRange(h.$to),g=m&&oo(m);if(g!=null&&g>=e.depth)return n&&n(t.tr.lift(m,g).scrollIntoView()),!0;if(d&&Js(s,"start",!0)&&Js(i,"end")){let v=i,S=[];for(;S.push(v),!v.isTextblock;)v=v.lastChild;let k=s,w=1;for(;!k.isTextblock;k=k.firstChild)w++;if(v.canReplace(v.childCount,v.childCount,k.content)){if(n){let C=W.empty;for(let D=S.length-1;D>=0;D--)C=W.from(S[D].copy(C));let T=t.tr.step(new St(e.pos-S.length,e.pos+s.nodeSize,e.pos+w,e.pos+s.nodeSize-w,new ee(C,S.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function Ck(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(pe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const BP=Ck(-1),FP=Ck(1);function zP(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,l=i.blockRange(s),u=l&&fm(l,t,e);return u?(r&&r(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function Tx(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[s];n.doc.nodesBetween(l,u,(c,d)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)i=!0;else{let h=n.doc.resolve(d),m=h.index();i=h.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:c}}=n.selection.ranges[l];s.setBlockType(u,c,t,e)}r(s.scrollIntoView())}return!0}}function ym(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}ym(hm,pk,gk);ym(hm,vk,xk);ym(Sk,wk,kk,OP);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function VP(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,l=i.blockRange(s);if(!l)return!1;let u=r?n.tr:null;return jP(u,l,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function jP(t,e,n,r=null){let i=!1,s=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=l.resolve(e.start-2);s=new Fu(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new Fu(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=fm(s,n,r,e);return u?(t&&_P(t,e,u,i,n),!0):!1}function _P(t,e,n,r,i){let s=W.empty;for(let h=n.length-1;h>=0;h--)s=W.from(n[h].type.create(n[h].attrs,s));t.step(new St(e.start-(r?2:0),e.end,e.start,e.end,new ee(s,0,0),n.length,!0));let l=0;for(let h=0;h<n.length;h++)n[h].type==i&&(l=h+1);let u=n.length-l,c=e.start+n.length-(r?2:0),d=e.parent;for(let h=e.startIndex,m=e.endIndex,g=!0;h<m;h++,g=!1)!g&&yr(t.doc,c,u)&&(t.split(c,u),c+=2*u),c+=d.child(h).nodeSize;return t}function UP(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?HP(e,n,t,s):WP(e,n,s):!0:!1}}function HP(t,e,n,r){let i=t.tr,s=r.end,l=r.$to.end(r.depth);s<l&&(i.step(new St(s-1,l,s,l,new ee(W.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Fu(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=oo(r);if(u==null)return!1;i.lift(r,u);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return fi(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),e(i.scrollIntoView()),!0}function WP(t,e,n){let r=t.tr,i=n.parent;for(let v=n.end,S=n.endIndex-1,k=n.startIndex;S>k;S--)v-=i.child(S).nodeSize,r.delete(v-1,v+1);let s=r.doc.resolve(n.start),l=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,c=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(u?0:1),h+1,l.content.append(c?W.empty:W.from(i))))return!1;let m=s.pos,g=m+l.nodeSize;return r.step(new St(m-(u?1:0),g+(c?1:0),m+1,g-1,new ee((u?W.empty:W.from(i.copy(W.empty))).append(c?W.empty:W.from(i.copy(W.empty))),u?0:1,c?0:1),u?0:1)),e(r.scrollIntoView()),!0}function QP(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!s)return!1;let l=s.startIndex;if(l==0)return!1;let u=s.parent,c=u.child(l-1);if(c.type!=t)return!1;if(n){let d=c.lastChild&&c.lastChild.type==u.type,h=W.from(d?t.create():null),m=new ee(W.from(t.create(null,W.from(u.type.create(null,h)))),d?3:1,0),g=s.start,v=s.end;n(e.tr.step(new St(g-(d?3:1),v,g,v,m,1,!0)).scrollIntoView())}return!0}}const Mt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Xs=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let rp=null;const pr=function(t,e,n){let r=rp||(rp=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},GP=function(){rp=null},Xi=function(t,e,n,r){return n&&(Mx(t,e,n,r,-1)||Mx(t,e,n,r,1))},KP=/^(img|br|input|textarea|hr)$/i;function Mx(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:wn(t))){let l=t.parentNode;if(!l||l.nodeType!=1||jl(t)||KP.test(t.nodeName)||t.contentEditable=="false")return!1;e=Mt(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((s=l.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?wn(t):0}else return!1}}function wn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function $P(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=wn(t)}else if(t.parentNode&&!jl(t))e=Mt(t),t=t.parentNode;else return null}}function qP(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!jl(t))e=Mt(t)+1,t=t.parentNode;else return null}}function YP(t,e,n){for(let r=e==0,i=e==wn(t);r||i;){if(t==n)return!0;let s=Mt(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==wn(t)}}function jl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Pc=function(t){return t.focusNode&&Xi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Bi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function JP(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function XP(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(wn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(wn(r.startContainer),r.startOffset)}}}const Xn=typeof navigator<"u"?navigator:null,Nx=typeof document<"u"?document:null,di=Xn&&Xn.userAgent||"",ip=/Edge\/(\d+)/.exec(di),Ek=/MSIE \d/.exec(di),sp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(di),tn=!!(Ek||sp||ip),ri=Ek?document.documentMode:sp?+sp[1]:ip?+ip[1]:0,Cn=!tn&&/gecko\/(\d+)/i.test(di);Cn&&+(/Firefox\/(\d+)/.exec(di)||[0,0])[1];const op=!tn&&/Chrome\/(\d+)/.exec(di),xt=!!op,bk=op?+op[1]:0,Rt=!tn&&!!Xn&&/Apple Computer/.test(Xn.vendor),Zs=Rt&&(/Mobile\/\w+/.test(di)||!!Xn&&Xn.maxTouchPoints>2),Sn=Zs||(Xn?/Mac/.test(Xn.platform):!1),Tk=Xn?/Win/.test(Xn.platform):!1,mr=/Android \d/.test(di),_l=!!Nx&&"webkitFontSmoothing"in Nx.documentElement.style,ZP=_l?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function eO(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function cr(t,e){return typeof t=="number"?t:t[e]}function tO(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Rx(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=Xs(l);continue}let u=l,c=u==s.body,d=c?eO(s):tO(u),h=0,m=0;if(e.top<d.top+cr(r,"top")?m=-(d.top-e.top+cr(i,"top")):e.bottom>d.bottom-cr(r,"bottom")&&(m=e.bottom-e.top>d.bottom-d.top?e.top+cr(i,"top")-d.top:e.bottom-d.bottom+cr(i,"bottom")),e.left<d.left+cr(r,"left")?h=-(d.left-e.left+cr(i,"left")):e.right>d.right-cr(r,"right")&&(h=e.right-d.right+cr(i,"right")),h||m)if(c)s.defaultView.scrollBy(h,m);else{let v=u.scrollLeft,S=u.scrollTop;m&&(u.scrollTop+=m),h&&(u.scrollLeft+=h);let k=u.scrollLeft-v,w=u.scrollTop-S;e={left:e.left-k,top:e.top-w,right:e.right-k,bottom:e.bottom-w}}let g=c?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(g))break;l=g=="absolute"?l.offsetParent:Xs(l)}}function nO(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=t.root.elementFromPoint(s,l);if(!u||u==t.dom||!t.dom.contains(u))continue;let c=u.getBoundingClientRect();if(c.top>=n-20){r=u,i=c.top;break}}return{refDOM:r,refTop:i,stack:Mk(t.dom)}}function Mk(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Xs(r));return e}function rO({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Nk(n,r==0?0:r-e)}function Nk(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ls=null;function iO(t){if(t.setActive)return t.setActive();if(Ls)return t.focus(Ls);let e=Mk(t);t.focus(Ls==null?{get preventScroll(){return Ls={preventScroll:!0},!0}}:void 0),Ls||(Ls=!1,Nk(e,0))}function Rk(t,e){let n,r=2e8,i,s=0,l=e.top,u=e.top,c,d;for(let h=t.firstChild,m=0;h;h=h.nextSibling,m++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=pr(h).getClientRects();else continue;for(let v=0;v<g.length;v++){let S=g[v];if(S.top<=l&&S.bottom>=u){l=Math.max(S.bottom,l),u=Math.min(S.top,u);let k=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(k<r){n=h,r=k,i=k&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,h.nodeType==1&&k&&(s=m+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!c&&S.left<=e.left&&S.right>=e.left&&(c=h,d={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(s=m+1)}}return!n&&c&&(n=c,i=d,r=0),n&&n.nodeType==3?sO(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Rk(n,i)}function sO(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let l=Gr(r,1);if(l.top!=l.bottom&&vm(e,l)){i={node:t,offset:s+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function vm(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function oO(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function lO(t,e,n){let{node:r,offset:i}=Rk(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();s=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function aO(t,e,n,r){let i=-1;for(let s=e,l=!1;s!=t.dom;){let u=t.docView.nearestDesc(s,!0),c;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((c=u.dom.getBoundingClientRect()).width||c.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&c.left>r.left||c.top>r.top?i=u.posBefore:(!l&&c.right<r.left||c.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Dk(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let l=t.childNodes[s];if(l.nodeType==1){let u=l.getClientRects();for(let c=0;c<u.length;c++){let d=u[c];if(vm(e,d))return Dk(l,e,d)}}if((s=(s+1)%r)==i)break}return t}function uO(t,e){let n=t.dom.ownerDocument,r,i=0,s=XP(n,e.left,e.top);s&&({node:r,offset:i}=s);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let d=t.dom.getBoundingClientRect();if(!vm(e,d)||(l=Dk(t.dom,e,d),!l))return null}if(Rt)for(let d=l;r&&d;d=Xs(d))d.draggable&&(r=void 0);if(l=oO(l,e),r){if(Cn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],m;h.nodeName=="IMG"&&(m=h.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let d;_l&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=aO(t,r,i,e))}u==null&&(u=lO(t,l,e));let c=t.docView.nearestDesc(l,!0);return{pos:u,inside:c?c.posAtStart-c.border:-1}}function Dx(t){return t.top<t.bottom||t.left<t.right}function Gr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Dx(r))return r}return Array.prototype.find.call(n,Dx)||t.getBoundingClientRect()}const cO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Pk(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),l=_l||Cn;if(r.nodeType==3)if(l&&(cO.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=Gr(pr(r,i,i),n);if(Cn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Gr(pr(r,i-1,i-1),-1);if(d.top==c.top){let h=Gr(pr(r,i,i+1),-1);if(h.top!=c.top)return Ko(h,h.left<d.left)}}return c}else{let c=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(c--,h=1):n<0?c--:d++,Ko(Gr(pr(r,c,d),h),h<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==wn(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return sh(c.getBoundingClientRect(),!1)}if(s==null&&i<wn(r)){let c=r.childNodes[i];if(c.nodeType==1)return sh(c.getBoundingClientRect(),!0)}return sh(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==wn(r))){let c=r.childNodes[i-1],d=c.nodeType==3?pr(c,wn(c)-(l?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(d)return Ko(Gr(d,1),!1)}if(s==null&&i<wn(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let d=c?c.nodeType==3?pr(c,0,l?0:1):c.nodeType==1?c:null:null;if(d)return Ko(Gr(d,-1),!0)}return Ko(Gr(r.nodeType==3?pr(r):r,-n),n>=0)}function Ko(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function sh(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Ok(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function fO(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Ok(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let l=Pk(t,i.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let c;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=pr(u,0,u.nodeValue.length).getClientRects();else continue;for(let d=0;d<c.length;d++){let h=c[d];if(h.bottom>h.top+1&&(n=="up"?l.top-h.top>(h.bottom-l.top)*2:h.bottom-l.bottom>(l.bottom-h.top)*2))return!1}}return!0})}const dO=/[\u0590-\u08ac]/;function hO(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,l=i==r.parent.content.size,u=t.domSelection();return u?!dO.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?s:l:Ok(t,e,()=>{let{focusNode:c,focusOffset:d,anchorNode:h,anchorOffset:m}=t.domSelectionRange(),g=u.caretBidiLevel;u.modify("move",n,"character");let v=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:S,focusOffset:k}=t.domSelectionRange(),w=S&&!v.contains(S.nodeType==1?S:S.parentNode)||c==S&&d==k;try{u.collapse(h,m),c&&(c!=h||d!=m)&&u.extend&&u.extend(c,d)}catch{}return g!=null&&(u.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let Px=null,Ox=null,Ix=!1;function pO(t,e,n){return Px==e&&Ox==n?Ix:(Px=e,Ox=n,Ix=n=="up"||n=="down"?fO(t,e,n):hO(t,e,n))}const En=0,Lx=1,Vi=2,Zn=3;class Ul{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=En,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,l;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(l)+l.size:this.posAtStart}else{let s,l;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Mt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),l;if(s&&(!n||s.node))if(r&&(l=s.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let l=this.children[r],u=s+l.size;if(u>e||l instanceof Lk){i=e-s;break}s=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Ik&&s.side>=0;r--);if(n<=0){let s,l=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,l=!1);return s&&n&&l&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Mt(s.dom)+1:0}}else{let s,l=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,l=!1);return s&&l&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Mt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let l=r,u=0;;u++){let c=this.children[u],d=l+c.size;if(i==-1&&e<=d){let h=l+c.border;if(e>=h&&n<=d-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,h);e=l;for(let m=u;m>0;m--){let g=this.children[m-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=Mt(g.dom)+1;break}e-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||u==this.children.length-1)){n=d;for(let h=u+1;h<this.children.length;h++){let m=this.children[h];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){s=Mt(m.dom);break}n+=m.size}s==-1&&(s=this.contentDOM.childNodes.length);break}l=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),l=Math.max(e,n);for(let v=0,S=0;v<this.children.length;v++){let k=this.children[v],w=S+k.size;if(s>S&&l<w)return k.setSelection(e-S-k.border,n-S-k.border,r,i);S=w}let u=this.domFromPos(e,e?-1:1),c=n==e?u:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),m=!1;if((Cn||Rt)&&e==n){let{node:v,offset:S}=u;if(v.nodeType==3){if(m=!!(S&&v.nodeValue[S-1]==`
`),m&&S==v.nodeValue.length)for(let k=v,w;k;k=k.parentNode){if(w=k.nextSibling){w.nodeName=="BR"&&(u=c={node:w.parentNode,offset:Mt(w)+1});break}let C=k.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let k=v.childNodes[S-1];m=k&&(k.nodeName=="BR"||k.contentEditable=="false")}}if(Cn&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let v=h.focusNode.childNodes[h.focusOffset];v&&v.contentEditable=="false"&&(i=!0)}if(!(i||m&&Rt)&&Xi(u.node,u.offset,h.anchorNode,h.anchorOffset)&&Xi(c.node,c.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||e==n)&&!(m&&Cn)){d.collapse(u.node,u.offset);try{e!=n&&d.extend(c.node,c.offset),g=!0}catch{}}if(!g){if(e>n){let S=u;u=c,c=S}let v=document.createRange();v.setEnd(c.node,c.offset),v.setStart(u.node,u.offset),d.removeAllRanges(),d.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],l=r+s.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let u=r+s.border,c=l-s.border;if(e>=u&&n<=c){this.dirty=e==r||n==l?Vi:Lx,e==u&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Zn:s.markDirty(e-u,n-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Vi:Zn}r=l}this.dirty=Vi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Vi:Lx;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Ik extends Ul{constructor(e,n,r,i){let s,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==En&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class mO extends Ul{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Zi extends Ul{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],l=s&&s(n,i,r);return(!l||!l.dom)&&(l=ts.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Zi(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Zn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=En){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=En}}slice(e,n,r){let i=Zi.create(this.parent,this.mark,!0,r),s=this.children,l=this.size;n<l&&(s=ap(s,n,l,r)),e>0&&(s=ap(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ii extends Ul{constructor(e,n,r,i,s,l,u,c,d){super(e,[],s,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,n,r,i,s,l){let u=s.nodeViews[n.type.name],c,d=u&&u(n,s,()=>{if(!c)return l;if(c.parent)return c.parent.posBeforeChild(c)},r,i),h=d&&d.dom,m=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:m}=ts.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=zk(h,r,n),d?c=new gO(e,n,r,i,h,m||null,g,d,s,l+1):n.isText?new Oc(e,n,r,i,h,g,s):new ii(e,n,r,i,h,m||null,g,s,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,n,r){return this.dirty==En&&e.eq(this.node)&&Vu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,l=s&&s.pos>-1?s:null,u=s&&s.pos<0,c=new vO(this,l&&l.node,e);wO(this.node,this.innerDeco,(d,h,m)=>{d.spec.marks?c.syncToMarks(d.spec.marks,r,e,h):d.type.side>=0&&!m&&c.syncToMarks(h==this.node.childCount?Fe.none:this.node.child(h).marks,r,e,h),c.placeWidget(d,e,i)},(d,h,m,g)=>{c.syncToMarks(d.marks,r,e,g);let v;c.findNodeMatch(d,h,m,g)||u&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(v=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(d,h,m,v,e)||c.updateNextNode(d,h,m,e,g,i)||c.addNode(d,h,m,e,i),i+=d.nodeSize}),c.syncToMarks([],r,e,0),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==Vi)&&(l&&this.protectLocalComposition(e,l),Bk(this.contentDOM,this.children,e),Zs&&kO(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof pe)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,u=AO(this.node.content,l,r-n,i-n);return u<0?null:{node:s,pos:u,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let l=new mO(this,s,n,i);e.input.compositionNodes.push(l),this.children=ap(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==Zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=En}updateOuterDeco(e){if(Vu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Fk(this.dom,this.nodeDOM,lp(this.outerDeco,this.node,n),lp(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Bx(t,e,n,r,i){zk(r,e,t);let s=new ii(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Oc extends ii{constructor(e,n,r,i,s,l,u){super(e,n,r,i,s,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Zn||this.dirty!=En&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=En||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=En,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Oc(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Lk extends Ul{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==En&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class gO extends ii{constructor(e,n,r,i,s,l,u,c,d,h){super(e,n,r,i,s,l,u,d,h),this.spec=c}update(e,n,r,i){if(this.dirty==Zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Bk(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let l=e[s],u=l.dom;if(u.parentNode==t){for(;u!=r;)r=Fx(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(u,r);if(l instanceof Zi){let c=r?r.previousSibling:t.lastChild;Bk(l.contentDOM,l.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=Fx(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const fl=function(t){t&&(this.nodeName=t)};fl.prototype=Object.create(null);const ji=[new fl];function lp(t,e,n){if(t.length==0)return ji;let r=n?ji[0]:new fl,i=[r];for(let s=0;s<t.length;s++){let l=t[s].type.attrs;if(l){l.nodeName&&i.push(r=new fl(l.nodeName));for(let u in l){let c=l[u];c!=null&&(n&&i.length==1&&i.push(r=new fl(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+c:u=="style"?r.style=(r.style?r.style+";":"")+c:u!="nodeName"&&(r[u]=c))}}}return i}function Fk(t,e,n,r){if(n==ji&&r==ji)return e;let i=e;for(let s=0;s<r.length;s++){let l=r[s],u=n[s];if(s){let c;u&&u.nodeName==l.nodeName&&i!=t&&(c=i.parentNode)&&c.nodeName.toLowerCase()==l.nodeName||(c=document.createElement(l.nodeName),c.pmIsDeco=!0,c.appendChild(i),u=ji[0]),i=c}yO(i,u||ji[0],l)}return i}function yO(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function zk(t,e,n){return Fk(t,t,ji,lp(e,n,t.nodeType!=1))}function Vu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Fx(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class vO{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=xO(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let s=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;s<u&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=En,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let c=-1,d=this.top.children.length;i<this.preMatch.index&&(d=Math.min(this.index+3,d));for(let h=this.index;h<d;h++){let m=this.top.children[h];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){c=h;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let h=Zi.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,i){let s=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))s=this.top.children.indexOf(l,this.index);else for(let u=this.index,c=Math.min(this.top.children.length,u+5);u<c;u++){let d=this.top.children[u];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let l=this.top.children[i];return l.dirty==Zn&&l.dom==l.contentDOM&&(l.dirty=Vi),l.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,l){for(let u=this.index;u<this.top.children.length;u++){let c=this.top.children[u];if(c instanceof ii){let d=this.preMatch.matched.get(c);if(d!=null&&d!=s)return!1;let h=c.dom,m,g=this.isLocked(h)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=Zn&&Vu(n,c.outerDeco));if(!g&&c.update(e,n,r,i))return this.destroyBetween(this.index,u),c.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(m=this.recreateWrapper(c,e,n,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Vi,m.updateChildren(i,l+1),m.dirty=En),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Vu(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ii.create(this.top,n,r,i,s,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let c of u.children)c.parent=u}return e.destroy(),u}addNode(e,n,r,i,s){let l=ii.create(this.top,e,n,r,i,s);l.contentDOM&&l.updateChildren(i,s+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Ik(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Zi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Oc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Rt||xt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Lk(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function xO(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let d=n.children[r-1];if(d instanceof Zi)n=d,r=d.children.length;else{u=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=u.node;if(c){if(c!=t.child(i-1))break;--i,s.set(u,i),l.push(u)}}return{index:i,matched:s,matches:l.reverse()}}function SO(t,e){return t.type.side-e.type.side}function wO(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let h=t.child(d);r(h,i,e.forChild(s,h),d),s+=h.nodeSize}return}let l=0,u=[],c=null;for(let d=0;;){let h,m;for(;l<i.length&&i[l].to==s;){let w=i[l++];w.widget&&(h?(m||(m=[h])).push(w):h=w)}if(h)if(m){m.sort(SO);for(let w=0;w<m.length;w++)n(m[w],d,!!c)}else n(h,d,!!c);let g,v;if(c)v=-1,g=c,c=null;else if(d<t.childCount)v=d,g=t.child(d++);else break;for(let w=0;w<u.length;w++)u[w].to<=s&&u.splice(w--,1);for(;l<i.length&&i[l].from<=s&&i[l].to>s;)u.push(i[l++]);let S=s+g.nodeSize;if(g.isText){let w=S;l<i.length&&i[l].from<w&&(w=i[l].from);for(let C=0;C<u.length;C++)u[C].to<w&&(w=u[C].to);w<S&&(c=g.cut(w-s),g=g.cut(0,w-s),S=w,v=-1)}else for(;l<i.length&&i[l].to<S;)l++;let k=g.isInline&&!g.isLeaf?u.filter(w=>!w.inline):u.slice();r(g,k,e.forChild(s,g),v),s=S}}function kO(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function AO(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let l=t.child(i++),u=s;if(s+=l.nodeSize,!l.isText)continue;let c=l.text;for(;i<t.childCount;){let d=t.child(i++);if(s+=d.nodeSize,!d.isText)break;c+=d.text}if(s>=n){if(s>=r&&c.slice(r-e.length-u,r-u)==e)return r-e.length;let d=u<r?c.lastIndexOf(e,r-u-1):-1;if(d>=0&&d+e.length+u>=n)return u+d;if(n==r&&c.length>=r+e.length-u&&c.slice(r-u,r-u+e.length)==e)return r}}return-1}function ap(t,e,n,r,i){let s=[];for(let l=0,u=0;l<t.length;l++){let c=t[l],d=u,h=u+=c.size;d>=n||h<=e?s.push(c):(d<e&&s.push(c.slice(0,e-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(c.slice(n-d,c.size,r)))}return s}function xm(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=r.resolve(l),c,d;if(Pc(n)){for(c=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&ae.isSelectable(m)&&i.parent&&!(m.isInline&&YP(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new ae(l==g?u:r.resolve(g))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,g=l;for(let v=0;v<n.rangeCount;v++){let S=n.getRangeAt(v);m=Math.min(m,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),g=Math.max(g,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(m<0)return null;[c,l]=g==t.state.selection.anchor?[g,m]:[m,g],u=r.resolve(l)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let h=r.resolve(c);if(!d){let m=e=="pointer"||t.state.selection.head<u.pos&&!s?1:-1;d=Sm(t,h,u,m)}return d}function Vk(t){return t.editable?t.hasFocus():_k(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function vr(t,e=!1){let n=t.state.selection;if(jk(t,n),!!Vk(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&xt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Xi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)EO(t);else{let{anchor:r,head:i}=n,s,l;zx&&!(n instanceof pe)&&(n.$from.parent.inlineContent||(s=Vx(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=Vx(t,n.to))),t.docView.setSelection(r,i,t,e),zx&&(s&&jx(s),l&&jx(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&CO(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const zx=Rt||xt&&bk<63;function Vx(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Rt&&i&&i.contentEditable=="false")return oh(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return oh(i);if(s)return oh(s)}}function oh(t){return t.contentEditable="true",Rt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function jx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function CO(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Vk(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function EO(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Mt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&tn&&ri<=11&&(n.disabled=!0,n.disabled=!1)}function jk(t,e){if(e instanceof ae){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(_x(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else _x(t)}function _x(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Sm(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||pe.between(e,n,r)}function Ux(t){return t.editable&&!t.hasFocus()?!1:_k(t)}function _k(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function bO(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Xi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function up(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ve.findFrom(s,e)}function Kr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Hx(t,e,n){let r=t.state.selection;if(r instanceof pe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Kr(t,new pe(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=up(t.state,e);return i&&i instanceof ae?Kr(t,i):!1}else if(!(Sn&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!s||s.isText)return!1;let u=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM?ae.isSelectable(s)?Kr(t,new ae(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):_l?Kr(t,new pe(t.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ae&&r.node.isInline)return Kr(t,new pe(e>0?r.$to:r.$from));{let i=up(t.state,e);return i?Kr(t,i):!1}}}function ju(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function dl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Bs(t,e){return e<0?TO(t):MO(t)}function TO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,l=!1;for(Cn&&n.nodeType==1&&r<ju(n)&&dl(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(dl(u,-1))i=n,s=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(Uk(n))break;{let u=n.previousSibling;for(;u&&dl(u,-1);)i=n.parentNode,s=Mt(u),u=u.previousSibling;if(u)n=u,r=ju(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?cp(t,n,r):i&&cp(t,i,s)}function MO(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=ju(n),s,l;for(;;)if(r<i){if(n.nodeType!=1)break;let u=n.childNodes[r];if(dl(u,1))s=n,l=++r;else break}else{if(Uk(n))break;{let u=n.nextSibling;for(;u&&dl(u,1);)s=u.parentNode,l=Mt(u)+1,u=u.nextSibling;if(u)n=u,r=0,i=ju(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&cp(t,s,l)}function Uk(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function NO(t,e){for(;t&&e==t.childNodes.length&&!jl(t);)e=Mt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function RO(t,e){for(;t&&!e&&!jl(t);)e=Mt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function cp(t,e,n){if(e.nodeType!=3){let s,l;(l=NO(e,n))?(e=l,n=0):(s=RO(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Pc(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&vr(t)},50)}function Wx(t,e){let n=t.state.doc.resolve(e);if(!(xt||Tk)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Qx(t,e,n){let r=t.state.selection;if(r instanceof pe&&!r.empty||n.indexOf("s")>-1||Sn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=up(t.state,e);if(l&&l instanceof ae)return Kr(t,l)}if(!i.parent.inlineContent){let l=e<0?i:s,u=r instanceof an?ve.near(l,e):ve.findFrom(l,e);return u?Kr(t,u):!1}return!1}function Gx(t,e){if(!(t.state.selection instanceof pe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let l=t.state.tr;return e<0?l.delete(n.pos-s.nodeSize,n.pos):l.delete(n.pos,n.pos+s.nodeSize),t.dispatch(l),!0}return!1}function Kx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function DO(t){if(!Rt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Kx(t,r,"true"),setTimeout(()=>Kx(t,r,"false"),20)}return!1}function PO(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function OO(t,e){let n=e.keyCode,r=PO(e);if(n==8||Sn&&n==72&&r=="c")return Gx(t,-1)||Bs(t,-1);if(n==46&&!e.shiftKey||Sn&&n==68&&r=="c")return Gx(t,1)||Bs(t,1);if(n==13||n==27)return!0;if(n==37||Sn&&n==66&&r=="c"){let i=n==37?Wx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Hx(t,i,r)||Bs(t,i)}else if(n==39||Sn&&n==70&&r=="c"){let i=n==39?Wx(t,t.state.selection.from)=="ltr"?1:-1:1;return Hx(t,i,r)||Bs(t,i)}else{if(n==38||Sn&&n==80&&r=="c")return Qx(t,-1,r)||Bs(t,-1);if(n==40||Sn&&n==78&&r=="c")return DO(t)||Qx(t,1,r)||Bs(t,1);if(r==(Sn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function wm(t,e){t.someProp("transformCopied",v=>{e=v(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let v=r.firstChild;n.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=t.someProp("clipboardSerializer")||ts.fromSchema(t.state.schema),u=$k(),c=u.createElement("div");c.appendChild(l.serializeFragment(r,{document:u}));let d=c.firstChild,h,m=0;for(;d&&d.nodeType==1&&(h=Kk[d.nodeName.toLowerCase()]);){for(let v=h.length-1;v>=0;v--){let S=u.createElement(h[v]);for(;c.firstChild;)S.appendChild(c.firstChild);c.appendChild(S),m++}d=c.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${m?` -${m}`:""} ${JSON.stringify(n)}`);let g=t.someProp("clipboardTextSerializer",v=>v(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:g,slice:e}}function Hk(t,e,n,r,i){let s=i.parent.type.spec.code,l,u;if(!n&&!e)return null;let c=!!e&&(r||s||!n);if(c){if(t.someProp("transformPastedText",g=>{e=g(e,s||r,t)}),s)return u=new ee(W.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",g=>{u=g(u,t,!0)}),u;let m=t.someProp("clipboardTextParser",g=>g(e,i,r,t));if(m)u=m;else{let g=i.marks(),{schema:v}=t.state,S=ts.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let w=l.appendChild(document.createElement("p"));k&&w.appendChild(S.serializeNode(v.text(k,g)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=FO(n),_l&&zO(l);let d=l&&l.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let m=+h[3];m>0;m--){let g=l.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;l=g}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||ul.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(c||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!IO.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)u=VO($x(u,+h[1],+h[2]),h[4]);else if(u=ee.maxOpen(LO(u.content,i),!0),u.openStart||u.openEnd){let m=0,g=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;g<u.openEnd&&!v.type.spec.isolating;g++,v=v.lastChild);u=$x(u,m,g)}return t.someProp("transformPasted",m=>{u=m(u,t,c)}),u}const IO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function LO(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,l=[];if(t.forEach(u=>{if(!l)return;let c=i.findWrapping(u.type),d;if(!c)return l=null;if(d=l.length&&s.length&&Qk(c,s,u,l[l.length-1],0))l[l.length-1]=d;else{l.length&&(l[l.length-1]=Gk(l[l.length-1],s.length));let h=Wk(u,c);l.push(h),i=i.matchType(h.type),s=c}}),l)return W.from(l)}return t}function Wk(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,W.from(t));return t}function Qk(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Qk(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(W.from(Wk(n,t,i+1))))}}function Gk(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Gk(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(W.empty,!0);return t.copy(n.append(r))}function fp(t,e,n,r,i,s){let l=e<0?t.firstChild:t.lastChild,u=l.content;return t.childCount>1&&(s=0),i<r-1&&(u=fp(u,e,n,r,i+1,s)),i>=n&&(u=e<0?l.contentMatchAt(0).fillBefore(u,s<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(W.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(u))}function $x(t,e,n){return e<t.openStart&&(t=new ee(fp(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ee(fp(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Kk={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let qx=null;function $k(){return qx||(qx=document.implementation.createHTMLDocument("title"))}let lh=null;function BO(t){let e=window.trustedTypes;return e?(lh||(lh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),lh.createHTML(t)):t}function FO(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=$k().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Kk[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=BO(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function zO(t){let e=t.querySelectorAll(xt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function VO(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:l}=t;for(let u=r.length-2;u>=0;u-=2){let c=n.nodes[r[u]];if(!c||c.hasRequiredAttrs())break;i=W.from(c.create(r[u+1],i)),s++,l++}return new ee(i,s,l)}const Qt={},Gt={},jO={touchstart:!0,touchmove:!0};class _O{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function UO(t){for(let e in Qt){let n=Qt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{WO(t,r)&&!km(t,r)&&(t.editable||!(r.type in Gt))&&n(t,r)},jO[e]?{passive:!0}:void 0)}Rt&&t.dom.addEventListener("input",()=>null),dp(t)}function ti(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function HO(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function dp(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>km(t,r))})}function km(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function WO(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function QO(t,e){!km(t,e)&&Qt[e.type]&&(t.editable||!(e.type in Gt))&&Qt[e.type](t,e)}Gt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Yk(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(mr&&xt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Zs&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Bi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||OO(t,n)?n.preventDefault():ti(t,"key")};Gt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Gt.keypress=(t,e)=>{let n=e;if(Yk(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Sn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof pe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function Ic(t){return{left:t.clientX,top:t.clientY}}function GO(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Am(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let l=s.depth+1;l>0;l--)if(t.someProp(e,u=>l>s.depth?u(t,n,s.nodeAfter,s.before(l),i,!0):u(t,n,s.node(l),s.before(l),i,!1)))return!0;return!1}function $s(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function KO(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ae.isSelectable(r)?($s(t,new ae(n)),!0):!1}function $O(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ae&&(r=n.node);let s=t.state.doc.resolve(e);for(let l=s.depth+1;l>0;l--){let u=l>s.depth?s.nodeAfter:s.node(l);if(ae.isSelectable(u)){r&&n.$from.depth>0&&l>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(l);break}}return i!=null?($s(t,ae.create(t.state.doc,i)),!0):!1}function qO(t,e,n,r,i){return Am(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?$O(t,n):KO(t,n))}function YO(t,e,n,r){return Am(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function JO(t,e,n,r){return Am(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||XO(t,n,r)}function XO(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?($s(t,pe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s),u=i.before(s);if(l.inlineContent)$s(t,pe.create(r,u+1,u+1+l.content.size));else if(ae.isSelectable(l))$s(t,ae.create(r,u));else continue;return!0}}function Cm(t){return _u(t)}const qk=Sn?"metaKey":"ctrlKey";Qt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Cm(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&GO(n,t.input.lastClick)&&!n[qk]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let l=t.posAtCoords(Ic(n));l&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new ZO(t,l,n,!!r)):(s=="doubleClick"?YO:JO)(t,l.pos,l.inside,n)?n.preventDefault():ti(t,"pointer"))};class ZO{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[qk],this.allowDefault=r.shiftKey;let s,l;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),l=n.inside;else{let h=e.state.doc.resolve(n.pos);s=h.parent,l=h.depth?h.before():0}const u=i?null:r.target,c=u?e.docView.nearestDesc(u,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof ae&&d.from<=l&&d.to>l)&&(this.mightDrag={node:s,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ti(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>vr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ic(e))),this.updateAllowDefault(e),this.allowDefault||!n?ti(this.view,"pointer"):qO(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Rt&&this.mightDrag&&!this.mightDrag.node.isAtom||xt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?($s(this.view,ve.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ti(this.view,"pointer")}move(e){this.updateAllowDefault(e),ti(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Qt.touchstart=t=>{t.input.lastTouch=Date.now(),Cm(t),ti(t,"pointer")};Qt.touchmove=t=>{t.input.lastTouch=Date.now(),ti(t,"pointer")};Qt.contextmenu=t=>Cm(t);function Yk(t,e){return t.composing?!0:Rt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const eI=mr?5e3:-1;Gt.compositionstart=Gt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof pe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||xt&&Tk&&tI(t)))t.markCursor=t.state.storedMarks||n.marks(),_u(t,!0),t.markCursor=null;else if(_u(t,!e.selection.empty),Cn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let l=s<0?i.lastChild:i.childNodes[s-1];if(!l)break;if(l.nodeType==3){let u=t.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,s=-1}}t.input.composing=!0}Jk(t,eI)};function tI(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Gt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Jk(t,20))};function Jk(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>_u(t),e))}function Xk(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=rI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function nI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=$P(e.focusNode,e.focusOffset),r=qP(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function rI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function _u(t,e=!1){if(!(mr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Xk(t),e||t.docView&&t.docView.dirty){let n=xm(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function iI(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ml=tn&&ri<15||Zs&&ZP<604;Qt.copy=Gt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Ml?null:n.clipboardData,l=r.content(),{dom:u,text:c}=wm(t,l);s?(n.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",c)):iI(t,u),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function oI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Nl(t,r.value,null,i,e):Nl(t,r.textContent,r.innerHTML,i,e)},50)}function Nl(t,e,n,r,i){let s=Hk(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,i,s||ee.empty)))return!0;if(!s)return!1;let l=sI(s),u=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(s);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Zk(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Gt.paste=(t,e)=>{let n=e;if(t.composing&&!mr)return;let r=Ml?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Nl(t,Zk(r),r.getData("text/html"),i,n)?n.preventDefault():oI(t,n)};class eA{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const lI=Sn?"altKey":"ctrlKey";function tA(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[lI]}Qt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Ic(n)),l;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ae?i.to-1:i.to))){if(r&&r.mightDrag)l=ae.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=ae.create(t.state.doc,m.posBefore))}}let u=(l||t.state.selection).content(),{dom:c,text:d,slice:h}=wm(t,u);(!n.dataTransfer.files.length||!xt||bk>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ml?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ml||n.dataTransfer.setData("text/plain",d),t.dragging=new eA(h,tA(t,n),l)};Qt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Gt.dragover=Gt.dragenter=(t,e)=>e.preventDefault();Gt.drop=(t,e)=>{try{aI(t,e,t.dragging)}finally{t.dragging=null}};function aI(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Ic(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",v=>{s=v(s,t,!1)}):s=Hk(t,Zk(e.dataTransfer),Ml?null:e.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&tA(t,e));if(t.someProp("handleDrop",v=>v(t,e,s||ee.empty,l))){e.preventDefault();return}if(!s)return;e.preventDefault();let u=s?sk(t.state.doc,i.pos,s):i.pos;u==null&&(u=i.pos);let c=t.state.tr;if(l){let{node:v}=n;v?v.replace(c):c.deleteSelection()}let d=c.mapping.map(u),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=c.doc;if(h?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(m))return;let g=c.doc.resolve(d);if(h&&ae.isSelectable(s.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new ae(g));else{let v=c.mapping.map(u);c.mapping.maps[c.mapping.maps.length-1].forEach((S,k,w,C)=>v=C),c.setSelection(Sm(t,g,c.doc.resolve(v)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}Qt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&vr(t)},20))};Qt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Qt.beforeinput=(t,e)=>{if(xt&&mr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Bi(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Gt)Qt[t]=Gt[t];function Rl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Uu{constructor(e,n){this.toDOM=e,this.spec=n||Ki,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new Wt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Uu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Rl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class si{constructor(e,n){this.attrs=e,this.spec=n||Ki}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=l?null:new Wt(s,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof si&&Rl(this.attrs,e.attrs)&&Rl(this.spec,e.spec)}static is(e){return e.type instanceof si}destroy(){}}class Em{constructor(e,n){this.attrs=e,this.spec=n||Ki}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=s.pos?null:new Wt(s.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Em&&Rl(this.attrs,e.attrs)&&Rl(this.spec,e.spec)}destroy(){}}class Wt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Wt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Wt(e,e,new Uu(n,r))}static inline(e,n,r,i){return new Wt(e,n,new si(r,i))}static node(e,n,r,i){return new Wt(e,n,new Em(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof si}get widget(){return this.type instanceof Uu}}const zs=[],Ki={};class Ke{constructor(e,n){this.local=e.length?e:zs,this.children=n.length?n:zs}static create(e,n){return n.length?Hu(n,e,0,Ki):Ft}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,n-u,r,i+u,s)}}map(e,n,r){return this==Ft||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ki)}mapInner(e,n,r,i,s){let l;for(let u=0;u<this.local.length;u++){let c=this.local[u].map(e,r,i);c&&c.type.valid(n,c)?(l||(l=[])).push(c):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?uI(this.children,l||[],e,n,r,i,s):l?new Ke(l.sort($i),zs):Ft}add(e,n){return n.length?this==Ft?Ke.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((u,c)=>{let d=c+r,h;if(h=rA(n,u,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(u,h,d+1):i.splice(s,0,c,c+u.nodeSize,Hu(h,u,d+1,Ki)),s+=3}});let l=nA(s?iA(n):n,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Ke(l.length?this.local.concat(l).sort($i):this.local,i||this.children)}remove(e){return e.length==0||this==Ft?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let l,u=r[s]+n,c=r[s+1]+n;for(let h=0,m;h<e.length;h++)(m=e[h])&&m.from>u&&m.to<c&&(e[h]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(l,u+1);d!=Ft?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,l;s<e.length;s++)if(l=e[s])for(let u=0;u<i.length;u++)i[u].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ke(i,r):Ft}forChild(e,n){if(this==Ft)return this;if(n.isLeaf)return Ke.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,l=s+n.content.size;for(let u=0;u<this.local.length;u++){let c=this.local[u];if(c.from<l&&c.to>s&&c.type instanceof si){let d=Math.max(s,c.from)-s,h=Math.min(l,c.to)-s;d<h&&(i||(i=[])).push(c.copy(d,h))}}if(i){let u=new Ke(i.sort($i),zs);return r?new Yr([u,r]):u}return r||Ft}eq(e){if(this==e)return!0;if(!(e instanceof Ke)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return bm(this.localsInner(e))}localsInner(e){if(this==Ft)return zs;if(e.inlineContent||!this.local.some(si.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof si||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ke.empty=new Ke([],[]);Ke.removeOverlap=bm;const Ft=Ke.empty;class Yr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ki));return Yr.from(r)}forChild(e,n){if(n.isLeaf)return Ke.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Ft&&(s instanceof Yr?r=r.concat(s.members):r.push(s))}return Yr.from(r)}eq(e){if(!(e instanceof Yr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let l=0;l<s.length;l++)n.push(s[l])}}return n?bm(r?n:n.sort($i)):zs}static from(e){switch(e.length){case 0:return Ft;case 1:return e[0];default:return new Yr(e.every(n=>n instanceof Ke)?e:e.reduce((n,r)=>n.concat(r instanceof Ke?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function uI(t,e,n,r,i,s,l){let u=t.slice();for(let d=0,h=s;d<n.maps.length;d++){let m=0;n.maps[d].forEach((g,v,S,k)=>{let w=k-S-(v-g);for(let C=0;C<u.length;C+=3){let T=u[C+1];if(T<0||g>T+h-m)continue;let D=u[C]+h-m;v>=D?u[C+1]=g<=D?-2:-1:g>=h&&w&&(u[C]+=w,u[C+1]+=w)}m+=w}),h=n.maps[d].map(h,-1)}let c=!1;for(let d=0;d<u.length;d+=3)if(u[d+1]<0){if(u[d+1]==-2){c=!0,u[d+1]=-1;continue}let h=n.map(t[d]+s),m=h-i;if(m<0||m>=r.content.size){c=!0;continue}let g=n.map(t[d+1]+s,-1),v=g-i,{index:S,offset:k}=r.content.findIndex(m),w=r.maybeChild(S);if(w&&k==m&&k+w.nodeSize==v){let C=u[d+2].mapInner(n,w,h+1,t[d]+s+1,l);C!=Ft?(u[d]=m,u[d+1]=v,u[d+2]=C):(u[d+1]=-2,c=!0)}else c=!0}if(c){let d=cI(u,t,e,n,i,s,l),h=Hu(d,r,0,l);e=h.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,g=0;m<h.children.length;m+=3){let v=h.children[m];for(;g<u.length&&u[g]<v;)g+=3;u.splice(g,0,h.children[m],h.children[m+1],h.children[m+2])}}return new Ke(e.sort($i),u)}function nA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Wt(i.from+e,i.to+e,i.type))}return n}function cI(t,e,n,r,i,s,l){function u(c,d){for(let h=0;h<c.local.length;h++){let m=c.local[h].map(r,i,d);m?n.push(m):l.onRemove&&l.onRemove(c.local[h].spec)}for(let h=0;h<c.children.length;h+=3)u(c.children[h+2],c.children[h]+d+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&u(t[c+2],e[c]+s+1);return n}function rA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,l;s<t.length;s++)(l=t[s])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[s]=null);return i}function iA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hu(t,e,n,r){let i=[],s=!1;e.forEach((u,c)=>{let d=rA(t,u,c+n);if(d){s=!0;let h=Hu(d,u,n+c+1,r);h!=Ft&&i.push(c,c+u.nodeSize,h)}});let l=nA(s?iA(t):t,-n).sort($i);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new Ke(l,i):Ft}function $i(t,e){return t.from-e.from||t.to-e.to}function bm(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Yx(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Yx(e,i,r.copy(s.from,r.to)));break}}}return e}function Yx(t,e,n){for(;e<t.length&&$i(n,t[e])>0;)e++;t.splice(e,0,n)}function ah(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ft&&e.push(r)}),t.cursorWrapper&&e.push(Ke.create(t.state.doc,[t.cursorWrapper.deco])),Yr.from(e)}const fI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dI=tn&&ri<=11;class hI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pI{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);tn&&ri<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Rt&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),dI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Ux(this.view)){if(this.suppressingSelectionUpdates)return vr(this.view);if(tn&&ri<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Xs(s))n.add(s);for(let s=e.anchorNode;s;s=Xs(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Ux(e)&&!this.ignoreSelectionChange(r),s=-1,l=-1,u=!1,c=[];if(e.editable)for(let h=0;h<n.length;h++){let m=this.registerMutation(n[h],c);m&&(s=s<0?m.from:Math.min(m.from,s),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(Cn&&c.length){let h=c.filter(m=>m.nodeName=="BR");if(h.length==2){let[m,g]=h;m.parentNode&&m.parentNode.parentNode==g.parentNode?g.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let g of h){let v=g.parentNode;v&&v.nodeName=="LI"&&(!m||yI(e,m)!=v)&&g.remove()}}}else if((xt||Rt)&&c.some(h=>h.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let h of c)if(h.nodeName=="BR"&&h.parentNode){let m=h.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&h.parentNode.removeChild(h)}}let d=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Pc(r)&&(d=xm(e))&&d.eq(ve.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,vr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,l),mI(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,vI(e,c)),this.handleDOMChange(s,l,u,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||vr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let m=e.addedNodes[h];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(tn&&ri<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:m,nextSibling:g}=e.addedNodes[h];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g)}let l=i&&i.parentNode==e.target?Mt(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),c=s&&s.parentNode==e.target?Mt(s):e.target.childNodes.length,d=r.localPosFromDOM(e.target,c,1);return{from:u,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Jx=new WeakMap,Xx=!1;function mI(t){if(!Jx.has(t)&&(Jx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Cn,Xx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Xx=!0}}function Zx(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Xi(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function gI(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Zx(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Zx(t,n):null}function yI(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function vI(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let s of e)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=s.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let c=u.firstChild;if(!c||c.nodeType!=1||c.contentEditable=="false"||/^(BR|IMG)$/.test(c.nodeName))break;u=c}u.insertBefore(s,u.firstChild),r==s&&t.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function xI(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:l,to:u}=t.docView.parseRange(e,n),c=t.domSelectionRange(),d,h=c.anchorNode;if(h&&t.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:c.anchorOffset}],Pc(c)||d.push({node:c.focusNode,offset:c.focusOffset})),xt&&t.input.lastKeyCode===8)for(let w=s;w>i;w--){let C=r.childNodes[w-1],T=C.pmViewDesc;if(C.nodeName=="BR"&&!T){s=w;break}if(!T||T.size)break}let m=t.state.doc,g=t.someProp("domParser")||ul.fromSchema(t.state.schema),v=m.resolve(l),S=null,k=g.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:s,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:SI,context:v});if(d&&d[0].pos!=null){let w=d[0].pos,C=d[1]&&d[1].pos;C==null&&(C=w),S={anchor:w+l,head:C+l}}return{doc:k,sel:S,from:l,to:u}}function SI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Rt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Rt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const wI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function kI(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let I=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,B=xm(t,I);if(B&&!t.state.selection.eq(B)){if(xt&&mr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ue=>ue(t,Bi(13,"Enter"))))return;let X=t.state.tr.setSelection(B);I=="pointer"?X.setMeta("pointer",!0):I=="key"&&X.scrollIntoView(),s&&X.setMeta("composition",s),t.dispatch(X)}return}let l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);let c=t.state.selection,d=xI(t,e,n),h=t.state.doc,m=h.slice(d.from,d.to),g,v;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(g=t.state.selection.to,v="end"):(g=t.state.selection.from,v="start"),t.input.lastKeyCode=null;let S=EI(m.content,d.doc.content,d.from,g,v);if(S&&t.input.domChangeCount++,(Zs&&t.input.lastIOSEnter>Date.now()-225||mr)&&i.some(I=>I.nodeType==1&&!wI.test(I.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",I=>I(t,Bi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(r&&c instanceof pe&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))S={start:c.from,endA:c.to,endB:c.to};else{if(d.sel){let I=e1(t,t.state.doc,d.sel);if(I&&!I.eq(t.state.selection)){let B=t.state.tr.setSelection(I);s&&B.setMeta("composition",s),t.dispatch(B)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof pe&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),tn&&ri<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>d.from&&d.doc.textBetween(S.start-d.from-1,S.start-d.from+1)==" "&&(S.start--,S.endA--,S.endB--);let k=d.doc.resolveNoCache(S.start-d.from),w=d.doc.resolveNoCache(S.endB-d.from),C=h.resolve(S.start),T=k.sameParent(w)&&k.parent.inlineContent&&C.end()>=S.endA;if((Zs&&t.input.lastIOSEnter>Date.now()-225&&(!T||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!T&&k.pos<d.doc.content.size&&(!k.sameParent(w)||!k.parent.inlineContent)&&k.pos<w.pos&&!/\S/.test(d.doc.textBetween(k.pos,w.pos,"","")))&&t.someProp("handleKeyDown",I=>I(t,Bi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&CI(h,S.start,S.endA,k,w)&&t.someProp("handleKeyDown",I=>I(t,Bi(8,"Backspace")))){mr&&xt&&t.domObserver.suppressSelectionUpdates();return}xt&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),mr&&!T&&k.start()!=w.start()&&w.parentOffset==0&&k.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==S.endA&&(S.endB-=2,w=d.doc.resolveNoCache(S.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(I){return I(t,Bi(13,"Enter"))})},20));let D=S.start,P=S.endA,R=I=>{let B=I||t.state.tr.replace(D,P,d.doc.slice(S.start-d.from,S.endB-d.from));if(d.sel){let X=e1(t,B.doc,d.sel);X&&!(xt&&t.composing&&X.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(X.head==D||X.head==B.mapping.map(P)-1)||tn&&X.empty&&X.head==D)&&B.setSelection(X)}return s&&B.setMeta("composition",s),B.scrollIntoView()},M;if(T)if(k.pos==w.pos){tn&&ri<=11&&k.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>vr(t),20));let I=R(t.state.tr.delete(D,P)),B=h.resolve(S.start).marksAcross(h.resolve(S.endA));B&&I.ensureMarks(B),t.dispatch(I)}else if(S.endA==S.endB&&(M=AI(k.parent.content.cut(k.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,S.endA-C.start())))){let I=R(t.state.tr);M.type=="add"?I.addMark(D,P,M.mark):I.removeMark(D,P,M.mark),t.dispatch(I)}else if(k.parent.child(k.index()).isText&&k.index()==w.index()-(w.textOffset?0:1)){let I=k.parent.textBetween(k.parentOffset,w.parentOffset),B=()=>R(t.state.tr.insertText(I,D,P));t.someProp("handleTextInput",X=>X(t,D,P,I,B))||t.dispatch(B())}else t.dispatch(R());else t.dispatch(R())}function e1(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Sm(t,e.resolve(n.anchor),e.resolve(n.head))}function AI(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,l,u,c;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)u=i[0],l="add",c=h=>h.mark(u.addToSet(h.marks));else if(i.length==0&&s.length==1)u=s[0],l="remove",c=h=>h.mark(u.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(c(e.child(h)));if(W.from(d).eq(t))return{mark:u,type:l}}function CI(t,e,n,r,i){if(n-e<=i.pos-r.pos||uh(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&n==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let l=t.resolve(uh(s,!0,!0));return!l.parent.isTextblock||l.pos>n||uh(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function uh(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function EI(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:l,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let c=Math.max(0,s-Math.min(l,u));r-=l+c-s}if(l<s&&t.size<e.size){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<e.size&&t1(e.textBetween(s-1,s+1))&&(s+=c?1:-1),u=s+(u-l),l=s}else if(u<s){let c=r<=s&&r>=u?s-r:0;s-=c,s&&s<t.size&&t1(t.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-u),u=s}return{start:s,endA:l,endB:u}}function t1(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class sA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new _O,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(o1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=i1(this),r1(this),this.nodeViews=s1(this),this.docView=Bx(this.state.doc,n1(this),ah(this),this.dom,this),this.domObserver=new pI(this,(r,i,s,l)=>kI(this,r,i,s,l)),this.domObserver.start(),UO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&dp(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(o1),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,l=!1;e.storedMarks&&this.composing&&(Xk(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let v=s1(this);TI(v,this.nodeViews)&&(this.nodeViews=v,s=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&dp(this),this.editable=i1(this),r1(this);let c=ah(this),d=n1(this),h=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=s||!this.docView.matchesNode(e.doc,d,c);(m||!e.selection.eq(i.selection))&&(l=!0);let g=h=="preserve"&&l&&this.dom.style.overflowAnchor==null&&nO(this);if(l){this.domObserver.stop();let v=m&&(tn||xt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&bI(i.selection,e.selection);if(m){let S=xt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=nI(this)),(s||!this.docView.update(e.doc,d,c,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=Bx(e.doc,d,c,this.dom,this)),S&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&bO(this))?vr(this,v):(jk(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&rO(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ae){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Rx(this,n.getBoundingClientRect(),e)}else Rx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new eA(e.slice,e.move,i<0?void 0:ae.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=n?n(u):u))return i}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let u=s[l].props[e];if(u!=null&&(i=n?n(u):u))return i}}hasFocus(){if(tn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&iO(this.dom),vr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return uO(this,e)}coordsAtPos(e,n=1){return Pk(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return pO(this,n||this.state,e)}pasteHTML(e,n){return Nl(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Nl(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return wm(this,e)}destroy(){this.docView&&(HO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ah(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,GP())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return QO(this,e)}domSelectionRange(){let e=this.domSelection();return e?Rt&&this.root.nodeType===11&&JP(this.dom.ownerDocument)==this.dom&&gI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}sA.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function n1(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Wt.node(0,t.state.doc.content.size,e)]}function r1(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Wt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function i1(t){return!t.someProp("editable",e=>e(t.state)===!1)}function bI(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function s1(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function TI(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function o1(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ai={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},MI=typeof navigator<"u"&&/Mac/.test(navigator.platform),NI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Nt=0;Nt<10;Nt++)ai[48+Nt]=ai[96+Nt]=String(Nt);for(var Nt=1;Nt<=24;Nt++)ai[Nt+111]="F"+Nt;for(var Nt=65;Nt<=90;Nt++)ai[Nt]=String.fromCharCode(Nt+32),Wu[Nt]=String.fromCharCode(Nt);for(var ch in ai)Wu.hasOwnProperty(ch)||(Wu[ch]=ai[ch]);function RI(t){var e=MI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||NI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Wu:ai)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const DI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),PI=typeof navigator<"u"&&/Win/.test(navigator.platform);function OI(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,l;for(let u=0;u<e.length-1;u++){let c=e[u];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))DI?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function II(t){let e=Object.create(null);for(let n in t)e[OI(n)]=t[n];return e}function fh(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function LI(t){return new qe({props:{handleKeyDown:oA(t)}})}function oA(t){let e=II(t);return function(n,r){let i=RI(r),s,l=e[fh(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[fh(i,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(PI&&r.ctrlKey&&r.altKey)&&(s=ai[r.keyCode])&&s!=i){let u=e[fh(s,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var BI=Object.defineProperty,Tm=(t,e)=>{for(var n in e)BI(t,n,{get:e[n],enumerable:!0})};function Lc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Bc=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>{const h=u(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,l=[],u=!!t,c=t||i.tr,d=()=>(!u&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),l.every(m=>m===!0)),h={...Object.fromEntries(Object.entries(n).map(([m,g])=>[m,(...S)=>{const k=this.buildProps(c,e),w=g(...S)(k);return l.push(w),h}])),run:d};return h}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([u,c])=>[u,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,l={tr:t,editor:r,view:s,state:Lc({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,c])=>[u,(...d)=>c(...d)(l)]))}};return l}},lA={};Tm(lA,{blur:()=>FI,clearContent:()=>zI,clearNodes:()=>VI,command:()=>jI,createParagraphNear:()=>_I,cut:()=>UI,deleteCurrentNode:()=>HI,deleteNode:()=>WI,deleteRange:()=>QI,deleteSelection:()=>GI,enter:()=>KI,exitCode:()=>$I,extendMarkRange:()=>qI,first:()=>YI,focus:()=>XI,forEach:()=>ZI,insertContent:()=>eL,insertContentAt:()=>rL,joinBackward:()=>oL,joinDown:()=>sL,joinForward:()=>lL,joinItemBackward:()=>aL,joinItemForward:()=>uL,joinTextblockBackward:()=>cL,joinTextblockForward:()=>fL,joinUp:()=>iL,keyboardShortcut:()=>hL,lift:()=>pL,liftEmptyBlock:()=>mL,liftListItem:()=>gL,newlineInCode:()=>yL,resetAttributes:()=>vL,scrollIntoView:()=>xL,selectAll:()=>SL,selectNodeBackward:()=>wL,selectNodeForward:()=>kL,selectParentNode:()=>AL,selectTextblockEnd:()=>CL,selectTextblockStart:()=>EL,setContent:()=>bL,setMark:()=>GL,setMeta:()=>KL,setNode:()=>$L,setNodeSelection:()=>qL,setTextDirection:()=>YL,setTextSelection:()=>JL,sinkListItem:()=>XL,splitBlock:()=>ZL,splitListItem:()=>eB,toggleList:()=>tB,toggleMark:()=>nB,toggleNode:()=>rB,toggleWrap:()=>iB,undoInputRule:()=>sB,unsetAllMarks:()=>oB,unsetMark:()=>lB,unsetTextDirection:()=>aB,updateAttributes:()=>uB,wrapIn:()=>cB,wrapInList:()=>fB});var FI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),zI=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),VI=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:l})=>{t.doc.nodesBetween(s.pos,l.pos,(u,c)=>{if(u.type.isText)return;const{doc:d,mapping:h}=e,m=d.resolve(h.map(c)),g=d.resolve(h.map(c+u.nodeSize)),v=m.blockRange(g);if(!v)return;const S=oo(v);if(u.type.isTextblock){const{defaultType:k}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,k)}(S||S===0)&&e.lift(v,S)})}),!0},jI=t=>e=>t(e),_I=()=>({state:t,dispatch:e})=>wk(t,e),UI=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,s.content),r.setSelection(new pe(r.doc.resolve(Math.max(l-1,0)))),!0},HI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const u=i.before(s),c=i.after(s);t.delete(u,c).scrollIntoView()}return!0}return!1};function ot(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var WI=t=>({tr:e,state:n,dispatch:r})=>{const i=ot(t,n.schema),s=e.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===i){if(r){const c=s.before(l),d=s.after(l);e.delete(c,d).scrollIntoView()}return!0}return!1},QI=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},GI=()=>({state:t,dispatch:e})=>hm(t,e),KI=()=>({commands:t})=>t.keyboardShortcut("Enter"),$I=()=>({state:t,dispatch:e})=>DP(t,e);function Mm(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Qu(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Mm(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function aA(t,e,n={}){return t.find(r=>r.type===e&&Qu(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function l1(t,e,n={}){return!!aA(t,e,n)}function Nm(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!aA([...i.node.marks],e,n)))return;let l=i.index,u=t.start()+i.offset,c=l+1,d=u+i.node.nodeSize;for(;l>0&&l1([...t.parent.child(l-1).marks],e,n);)l-=1,u-=t.parent.child(l).nodeSize;for(;c<t.parent.childCount&&l1([...t.parent.child(c).marks],e,n);)d+=t.parent.child(c).nodeSize,c+=1;return{from:u,to:d}}function Sr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var qI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Sr(t,r.schema),{doc:l,selection:u}=n,{$from:c,from:d,to:h}=u;if(i){const m=Nm(c,s,e);if(m&&m.from<=d&&m.to>=h){const g=pe.create(l,m.from,m.to);n.setSelection(g)}}return!0},YI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function uA(t){return t instanceof pe}function _i(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function cA(t,e=null){if(!e)return null;const n=ve.atStart(t),r=ve.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?pe.create(t,_i(0,i,s),_i(t.content.size,i,s)):pe.create(t,_i(e,i,s),_i(e,i,s))}function a1(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Gu(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function JI(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var XI=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const l=()=>{(Gu()||a1())&&r.dom.focus(),JI()&&!Gu()&&!a1()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!uA(n.state.selection))return l(),!0;const u=cA(i.doc,t)||n.state.selection,c=n.state.selection.eq(u);return s&&(c||i.setSelection(u),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},ZI=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),eL=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),fA=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&fA(r)}return t};function ou(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return fA(n)}function Dl(t,e,n){if(t instanceof ni||t instanceof W)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return W.fromArray(t.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Dl("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,u="";const c=new $w({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(l=!0,u=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?ul.fromSchema(c).parseSlice(ou(t),n.parseOptions):ul.fromSchema(c).parse(ou(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=ul.fromSchema(e);return n.slice?s.parseSlice(ou(t),n.parseOptions).content:s.parse(ou(t),n.parseOptions)}return Dl("",e,n)}function tL(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof vt||i instanceof St))return;const s=t.mapping.maps[r];let l=0;s.forEach((u,c,d,h)=>{l===0&&(l=h)}),t.setSelection(ve.near(t.doc.resolve(l),n))}var nL=t=>!("type"in t),rL=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var l;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const c=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Dl(e,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){c(w)}try{u=Dl(e,s.schema,{parseOptions:d,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:s.options.enableContentCheck})}catch(w){return c(w),!1}let{from:h,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},g=!0,v=!0;if((nL(u)?u:[u]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,v=v?w.isBlock:!1}),h===m&&v){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,m+=1)}let k;if(g){if(Array.isArray(e))k=e.map(w=>w.text||"").join("");else if(e instanceof W){let w="";e.forEach(C=>{C.text&&(w+=C.text)}),k=w}else typeof e=="object"&&e&&e.text?k=e.text:k=e;r.insertText(k,h,m)}else{k=u;const w=r.doc.resolve(h),C=w.node(),T=w.parentOffset===0,D=C.isText||C.isTextblock,P=C.content.size>0;T&&D&&P&&(h=Math.max(0,h-1)),r.replaceWith(h,m,k)}n.updateSelection&&tL(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:k}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:k})}return!0},iL=()=>({state:t,dispatch:e})=>MP(t,e),sL=()=>({state:t,dispatch:e})=>NP(t,e),oL=()=>({state:t,dispatch:e})=>pk(t,e),lL=()=>({state:t,dispatch:e})=>vk(t,e),aL=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Nc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},uL=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Nc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},cL=()=>({state:t,dispatch:e})=>bP(t,e),fL=()=>({state:t,dispatch:e})=>TP(t,e);function dA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dL(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,l;for(let u=0;u<e.length-1;u+=1){const c=e[u];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))Gu()||dA()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var hL=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=dL(t).split(/-(?!$)/),l=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,u))});return c?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0};function ui(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,l=e?ot(e,t.schema):null,u=[];t.doc.nodesBetween(r,i,(m,g)=>{if(m.isText)return;const v=Math.max(r,g),S=Math.min(i,g+m.nodeSize);u.push({node:m,from:v,to:S})});const c=i-r,d=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>Qu(m.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((m,g)=>m+g.to-g.from,0)>=c}var pL=(t,e={})=>({state:n,dispatch:r})=>{const i=ot(t,n.schema);return ui(n,i,e)?RP(n,r):!1},mL=()=>({state:t,dispatch:e})=>kk(t,e),gL=t=>({state:e,dispatch:n})=>{const r=ot(t,e.schema);return UP(r)(e,n)},yL=()=>({state:t,dispatch:e})=>Sk(t,e);function Fc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function u1(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var vL=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,l=null;const u=Fc(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(s=ot(t,r.schema)),u==="mark"&&(l=Sr(t,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,m)=>{s&&s===h.type&&(c=!0,i&&n.setNodeMarkup(m,void 0,u1(h.attrs,e))),l&&h.marks.length&&h.marks.forEach(g=>{l===g.type&&(c=!0,i&&n.addMark(m,m+h.nodeSize,l.create(u1(g.attrs,e))))})})}),c},xL=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),SL=()=>({tr:t,dispatch:e})=>{if(e){const n=new an(t.doc);t.setSelection(n)}return!0},wL=()=>({state:t,dispatch:e})=>gk(t,e),kL=()=>({state:t,dispatch:e})=>xk(t,e),AL=()=>({state:t,dispatch:e})=>IP(t,e),CL=()=>({state:t,dispatch:e})=>FP(t,e),EL=()=>({state:t,dispatch:e})=>BP(t,e);function hp(t,e,n={},r={}){return Dl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var bL=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:l,commands:u})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const d=hp(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&s.replaceWith(0,c.content.size,d).setMeta("preventUpdate",!n),!0}return l&&s.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function hA(t,e){const n=Sr(e,t.schema),{from:r,to:i,empty:s}=t.selection,l=[];s?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,c=>{l.push(...c.marks)});const u=l.find(c=>c.type.name===n.name);return u?{...u.attrs}:{}}function pA(t,e){const n=new ck(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function TL(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function ML(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function NL(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function zc(t){return e=>NL(e.$from,t)}function le(t,e,n){return t.config[e]===void 0&&t.parent?le(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?le(t.parent,e,n):null}):t.config[e]}function Rm(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=le(e,"addExtensions",n);return r?[e,...Rm(r())]:e}).flat(10)}function Dm(t,e){const n=ts.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function mA(t){return typeof t=="function"}function Ie(t,e=void 0,...n){return mA(t)?e?t.bind(e)(...n):t(...n):t}function RL(t={}){return Object.keys(t).length===0&&t.constructor===Object}function eo(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function gA(t){const e=[],{nodeExtensions:n,markExtensions:r}=eo(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:i},c=le(l,"addGlobalAttributes",u);if(!c)return;c().forEach(h=>{h.types.forEach(m=>{Object.entries(h.attributes).forEach(([g,v])=>{e.push({type:m,name:g,attribute:{...s,...v}})})})})}),i.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},c=le(l,"addAttributes",u);if(!c)return;const d=c();Object.entries(d).forEach(([h,m])=>{const g={...s,...m};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,e.push({type:l.name,name:h,attribute:g})})}),e}function nt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const u=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],d=u.filter(h=>!c.includes(h));r[i]=[...c,...d].join(" ")}else if(i==="style"){const u=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;c.forEach(h=>{const[m,g]=h.split(":").map(v=>v.trim());d.set(m,g)}),u.forEach(h=>{const[m,g]=h.split(":").map(v=>v.trim());d.set(m,g)}),r[i]=Array.from(d.entries()).map(([h,m])=>`${h}: ${m}`).join("; ")}else r[i]=s}),r},{})}function Pl(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>nt(n,r),{})}function DL(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function c1(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):DL(n.getAttribute(l.name));return u==null?s:{...s,[l.name]:u}},{});return{...r,...i}}}}function f1(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&RL(n)?!1:n!=null))}function d1(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function PL(t,e){var n;const r=gA(t),{nodeExtensions:i,markExtensions:s}=eo(t),l=(n=i.find(d=>le(d,"topNode")))==null?void 0:n.name,u=Object.fromEntries(i.map(d=>{const h=r.filter(C=>C.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},g=t.reduce((C,T)=>{const D=le(T,"extendNodeSchema",m);return{...C,...D?D(d):{}}},{}),v=f1({...g,content:Ie(le(d,"content",m)),marks:Ie(le(d,"marks",m)),group:Ie(le(d,"group",m)),inline:Ie(le(d,"inline",m)),atom:Ie(le(d,"atom",m)),selectable:Ie(le(d,"selectable",m)),draggable:Ie(le(d,"draggable",m)),code:Ie(le(d,"code",m)),whitespace:Ie(le(d,"whitespace",m)),linebreakReplacement:Ie(le(d,"linebreakReplacement",m)),defining:Ie(le(d,"defining",m)),isolating:Ie(le(d,"isolating",m)),attrs:Object.fromEntries(h.map(d1))}),S=Ie(le(d,"parseHTML",m));S&&(v.parseDOM=S.map(C=>c1(C,h)));const k=le(d,"renderHTML",m);k&&(v.toDOM=C=>k({node:C,HTMLAttributes:Pl(C,h)}));const w=le(d,"renderText",m);return w&&(v.toText=w),[d.name,v]})),c=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),m={name:d.name,options:d.options,storage:d.storage,editor:e},g=t.reduce((w,C)=>{const T=le(C,"extendMarkSchema",m);return{...w,...T?T(d):{}}},{}),v=f1({...g,inclusive:Ie(le(d,"inclusive",m)),excludes:Ie(le(d,"excludes",m)),group:Ie(le(d,"group",m)),spanning:Ie(le(d,"spanning",m)),code:Ie(le(d,"code",m)),attrs:Object.fromEntries(h.map(d1))}),S=Ie(le(d,"parseHTML",m));S&&(v.parseDOM=S.map(w=>c1(w,h)));const k=le(d,"renderHTML",m);return k&&(v.toDOM=w=>k({mark:w,HTMLAttributes:Pl(w,h)})),[d.name,v]}));return new $w({topNode:l,nodes:u,marks:c})}function OL(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Ku(t){return t.sort((n,r)=>{const i=le(n,"priority")||100,s=le(r,"priority")||100;return i>s?-1:i<s?1:0})}function yA(t){const e=Ku(Rm(t)),n=OL(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function vA(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:l={}}=n||{};let u="";return t.nodesBetween(r,i,(c,d,h,m)=>{var g;c.isBlock&&d>r&&(u+=s);const v=l?.[c.type.name];if(v)return h&&(u+=v({node:c,pos:d,parent:h,index:m,range:e})),!1;c.isText&&(u+=(g=c?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),u}function IL(t,e){const n={from:0,to:t.content.size};return vA(t,n,e)}function xA(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function LL(t,e){const n=ot(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,u=>{s.push(u)});const l=s.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function SA(t,e){const n=Fc(typeof e=="string"?e:e.name,t.schema);return n==="node"?LL(t,e):n==="mark"?hA(t,e):{}}function BL(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function FL(t){const e=BL(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,l)=>l!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function wA(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const l=[];if(i.ranges.length)i.forEach((u,c)=>{l.push({from:u,to:c})});else{const{from:u,to:c}=n[s];if(u===void 0||c===void 0)return;l.push({from:u,to:c})}l.forEach(({from:u,to:c})=>{const d=e.slice(s).map(u,-1),h=e.slice(s).map(c),m=e.invert().map(d,-1),g=e.invert().map(h);r.push({oldRange:{from:m,to:g},newRange:{from:d,to:h}})})}),FL(r)}function Pm(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),l=Nm(s,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(l=>({from:s,to:s+i.nodeSize,mark:l})))}),r}var zL=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,l=null;for(;s>0&&l===null;){const u=i.node(s);u?.type.name===e?l=u:s-=1}return[l,s]};function lu(t,e){return e.nodes[t]||e.marks[t]||null}function Cu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var VL=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,l,u)=>{var c,d;const h=((d=(c=i.type.spec).toText)==null?void 0:d.call(c,{node:i,pos:s,parent:l,index:u}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function pp(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Sr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>s?s.name===m.type.name:!0).find(m=>Qu(m.attrs,n,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:m,$to:g})=>{const v=m.pos,S=g.pos;t.doc.nodesBetween(v,S,(k,w)=>{if(!k.isText&&!k.marks.length)return;const C=Math.max(v,w),T=Math.min(S,w+k.nodeSize),D=T-C;l+=D,u.push(...k.marks.map(P=>({mark:P,from:C,to:T})))})}),l===0)return!1;const c=u.filter(m=>s?s.name===m.mark.type.name:!0).filter(m=>Qu(m.mark.attrs,n,{strict:!1})).reduce((m,g)=>m+g.to-g.from,0),d=u.filter(m=>s?m.mark.type!==s&&m.mark.type.excludes(s):!0).reduce((m,g)=>m+g.to-g.from,0);return(c>0?c+d:c)>=l}function jL(t,e,n={}){if(!e)return ui(t,null,n)||pp(t,null,n);const r=Fc(e,t.schema);return r==="node"?ui(t,e,n):r==="mark"?pp(t,e,n):!1}var _L=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=zc(u=>u.type.name===e)(t.selection);if(!s)return!1;const l=t.doc.resolve(s.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},UL=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function h1(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function p1(t,e){const{nodeExtensions:n}=eo(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ie(le(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Vc(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Vc(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function kA(t){return t instanceof ae}var AA=class CA{constructor(e){this.position=e}static fromJSON(e){return new CA(e.position)}toJSON(){return{position:this.position}}};function HL(t,e){const n=e.mapping.mapResult(t.position);return{position:new AA(n.pos),mapResult:n}}function WL(t){return new AA(t)}function QL(t,e,n){var r;const{selection:i}=e;let s=null;if(uA(i)&&(s=i.$cursor),s){const u=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(d=>d.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:u,$to:c})=>{let d=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,c.pos,(h,m,g)=>{if(d)return!1;if(h.isInline){const v=!g||g.type.allowsMarkType(n),S=!!n.isInSet(h.marks)||!h.marks.some(k=>k.type.excludes(n));d=v&&S}return!d}),d})}var GL=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:l,ranges:u}=s,c=Sr(t,r.schema);if(i)if(l){const d=hA(r,c);n.addStoredMark(c.create({...d,...e}))}else u.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;r.doc.nodesBetween(h,m,(g,v)=>{const S=Math.max(v,h),k=Math.min(v+g.nodeSize,m);g.marks.find(C=>C.type===c)?g.marks.forEach(C=>{c===C.type&&n.addMark(S,k,c.create({...C.attrs,...e}))}):n.addMark(S,k,c.create(e))})});return QL(r,n,c)},KL=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),$L=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=ot(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:u})=>Tx(s,{...l,...e})(n)?!0:u.clearNodes()).command(({state:u})=>Tx(s,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qL=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=_i(t,0,r.content.size),s=ae.create(r,i);e.setSelection(s)}return!0},YL=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=s.from,u=s.to),i&&n.doc.nodesBetween(l,u,(c,d)=>{c.isText||n.setNodeMarkup(d,void 0,{...c.attrs,dir:t})}),!0},JL=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,l=pe.atStart(r).from,u=pe.atEnd(r).to,c=_i(i,l,u),d=_i(s,l,u),h=pe.create(r,c,d);e.setSelection(h)}return!0},XL=t=>({state:e,dispatch:n})=>{const r=ot(t,e.schema);return QP(r)(e,n)};function m1(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var ZL=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:l}=e,{$from:u,$to:c}=s,d=i.extensionManager.attributes,h=Cu(d,u.node().type.name,u.node().attrs);if(s instanceof ae&&s.node.isBlock)return!u.parentOffset||!yr(l,u.pos)?!1:(r&&(t&&m1(n,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=c.parentOffset===c.parent.content.size,g=u.depth===0?void 0:TL(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&g?[{type:g,attrs:h}]:void 0,S=yr(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!S&&yr(e.doc,e.mapping.map(u.pos),1,g?[{type:g}]:void 0)&&(S=!0,v=g?[{type:g,attrs:h}]:void 0),r){if(S&&(s instanceof pe&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),g&&!m&&!u.parentOffset&&u.parent.type!==g)){const k=e.mapping.map(u.before()),w=e.doc.resolve(k);u.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&e.setNodeMarkup(e.mapping.map(u.before()),g)}t&&m1(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return S},eB=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var l;const u=ot(t,r.schema),{$from:c,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(d))return!1;const m=c.node(-1);if(m.type!==u)return!1;const g=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==u||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let C=W.empty;const T=c.index(-1)?1:c.index(-2)?2:3;for(let B=c.depth-T;B>=c.depth-3;B-=1)C=W.from(c.node(B).copy(C));const D=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,P={...Cu(g,c.node().type.name,c.node().attrs),...e},R=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(P))||void 0;C=C.append(W.from(u.createAndFill(null,R)||void 0));const M=c.before(c.depth-(T-1));n.replace(M,c.after(-D),new ee(C,4-T,0));let I=-1;n.doc.nodesBetween(M,n.doc.content.size,(B,X)=>{if(I>-1)return!1;B.isTextblock&&B.content.size===0&&(I=X+1)}),I>-1&&n.setSelection(pe.near(n.doc.resolve(I))),n.scrollIntoView()}return!0}const v=d.pos===c.end()?m.contentMatchAt(0).defaultType:null,S={...Cu(g,m.type.name,m.attrs),...e},k={...Cu(g,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,d.pos);const w=v?[{type:u,attrs:S},{type:v,attrs:k}]:[{type:u,attrs:S}];if(!yr(n.doc,c.pos,2))return!1;if(i){const{selection:C,storedMarks:T}=r,{splittableMarks:D}=s.extensionManager,P=T||C.$to.parentOffset&&C.$from.marks();if(n.split(c.pos,2,w).scrollIntoView(),!P||!i)return!0;const R=P.filter(M=>D.includes(M.type.name));n.ensureMarks(R)}return!0},dh=(t,e)=>{const n=zc(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&fi(t.doc,n.pos)&&t.join(n.pos),!0},hh=(t,e)=>{const n=zc(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&fi(t.doc,r)&&t.join(r),!0},tB=(t,e,n,r={})=>({editor:i,tr:s,state:l,dispatch:u,chain:c,commands:d,can:h})=>{const{extensions:m,splittableMarks:g}=i.extensionManager,v=ot(t,l.schema),S=ot(e,l.schema),{selection:k,storedMarks:w}=l,{$from:C,$to:T}=k,D=C.blockRange(T),P=w||k.$to.parentOffset&&k.$from.marks();if(!D)return!1;const R=zc(M=>p1(M.type.name,m))(k);if(D.depth>=1&&R&&D.depth-R.depth<=1){if(R.node.type===v)return d.liftListItem(S);if(p1(R.node.type.name,m)&&v.validContent(R.node.content)&&u)return c().command(()=>(s.setNodeMarkup(R.pos,v),!0)).command(()=>dh(s,v)).command(()=>hh(s,v)).run()}return!n||!P||!u?c().command(()=>h().wrapInList(v,r)?!0:d.clearNodes()).wrapInList(v,r).command(()=>dh(s,v)).command(()=>hh(s,v)).run():c().command(()=>{const M=h().wrapInList(v,r),I=P.filter(B=>g.includes(B.type.name));return s.ensureMarks(I),M?!0:d.clearNodes()}).wrapInList(v,r).command(()=>dh(s,v)).command(()=>hh(s,v)).run()},nB=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,l=Sr(t,r.schema);return pp(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:s}):i.setMark(l,e)},rB=(t,e,n={})=>({state:r,commands:i})=>{const s=ot(t,r.schema),l=ot(e,r.schema),u=ui(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),u?i.setNode(l,c):i.setNode(s,{...c,...n})},iB=(t,e={})=>({state:n,commands:r})=>{const i=ot(t,n.schema);return ui(n,i,e)?r.lift(i):r.wrapIn(i,e)},sB=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const l=t.tr,u=s.transform;for(let c=u.steps.length-1;c>=0;c-=1)l.step(u.steps[c].invert(u.docs[c]));if(s.text){const c=l.doc.resolve(s.from).marks();l.replaceWith(s.from,s.to,t.schema.text(s.text,c))}else l.delete(s.from,s.to)}return!0}}return!1},oB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},lB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=n,c=Sr(t,r.schema),{$from:d,empty:h,ranges:m}=u;if(!i)return!0;if(h&&l){let{from:g,to:v}=u;const S=(s=d.marks().find(w=>w.type===c))==null?void 0:s.attrs,k=Nm(d,c,S);k&&(g=k.from,v=k.to),n.removeMark(g,v,c)}else m.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,c)});return n.removeStoredMark(c),!0},aB=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let s,l;return typeof t=="number"?(s=t,l=t):t&&"from"in t&&"to"in t?(s=t.from,l=t.to):(s=i.from,l=i.to),r&&e.doc.nodesBetween(s,l,(u,c)=>{if(u.isText)return;const d={...u.attrs};delete d.dir,e.setNodeMarkup(c,void 0,d)}),!0},uB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,l=null;const u=Fc(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(s=ot(t,r.schema)),u==="mark"&&(l=Sr(t,r.schema));let c=!1;return n.selection.ranges.forEach(d=>{const h=d.$from.pos,m=d.$to.pos;let g,v,S,k;n.selection.empty?r.doc.nodesBetween(h,m,(w,C)=>{s&&s===w.type&&(c=!0,S=Math.max(C,h),k=Math.min(C+w.nodeSize,m),g=C,v=w)}):r.doc.nodesBetween(h,m,(w,C)=>{C<h&&s&&s===w.type&&(c=!0,S=Math.max(C,h),k=Math.min(C+w.nodeSize,m),g=C,v=w),C>=h&&C<=m&&(s&&s===w.type&&(c=!0,i&&n.setNodeMarkup(C,void 0,{...w.attrs,...e})),l&&w.marks.length&&w.marks.forEach(T=>{if(l===T.type&&(c=!0,i)){const D=Math.max(C,h),P=Math.min(C+w.nodeSize,m);n.addMark(D,P,l.create({...T.attrs,...e}))}}))}),v&&(g!==void 0&&i&&n.setNodeMarkup(g,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(w=>{l===w.type&&i&&n.addMark(S,k,l.create({...w.attrs,...e}))}))}),c},cB=(t,e={})=>({state:n,dispatch:r})=>{const i=ot(t,n.schema);return zP(i,e)(n,r)},fB=(t,e={})=>({state:n,dispatch:r})=>{const i=ot(t,n.schema);return VP(i,e)(n,r)},dB=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},jc=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},hB=(t,e)=>{if(Mm(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function au(t){var e;const{editor:n,from:r,to:i,text:s,rules:l,plugin:u}=t,{view:c}=n;if(c.composing)return!1;const d=c.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(g=>g.type.spec.code))return!1;let h=!1;const m=VL(d)+s;return l.forEach(g=>{if(h)return;const v=hB(m,g.find);if(!v)return;const S=c.state.tr,k=Lc({state:c.state,transaction:S}),w={from:r-(v[0].length-s.length),to:i},{commands:C,chain:T,can:D}=new Bc({editor:n,state:k});g.handler({state:k,range:w,match:v,commands:C,chain:T,can:D})===null||!S.steps.length||(g.undoable&&S.setMeta(u,{transform:S,from:r,to:i,text:s}),c.dispatch(S),h=!0)}),h}function pB(t){const{editor:e,rules:n}=t,r=new qe({state:{init(){return null},apply(i,s,l){const u=i.getMeta(r);if(u)return u;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:h}=c;typeof h=="string"?h=h:h=Dm(W.from(h),l.schema);const{from:m}=c,g=m+h.length;au({editor:e,from:m,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,l,u){return au({editor:e,from:s,to:l,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&au({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?au({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function mB(t){return Object.prototype.toString.call(t).slice(8,-1)}function uu(t){return mB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function EA(t,e){const n={...t};return uu(t)&&uu(e)&&Object.keys(e).forEach(r=>{uu(e[r])&&uu(t[r])?n[r]=EA(t[r],e[r]):n[r]=e[r]}),n}var Om=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ie(le(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ie(le(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>EA(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},hi=class bA extends Om{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new bA(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(d=>d?.type.name===n.name))return!1;const c=l.find(d=>d?.type.name===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function gB(t){return typeof t=="number"}var yB=class{constructor(t){this.find=t.find,this.handler=t.handler}},vB=(t,e,n)=>{if(Mm(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function xB(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:l,dropEvent:u}=t,{commands:c,chain:d,can:h}=new Bc({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(v,S)=>{var k,w,C,T,D;if((w=(k=v.type)==null?void 0:k.spec)!=null&&w.code||!(v.isText||v.isTextblock||v.isInline))return;const P=(D=(T=(C=v.content)==null?void 0:C.size)!=null?T:v.nodeSize)!=null?D:0,R=Math.max(r,S),M=Math.min(i,S+P);if(R>=M)return;const I=v.isText?v.text||"":v.textBetween(R-S,M-S,void 0,"");vB(I,s.find,l).forEach(X=>{if(X.index===void 0)return;const ue=R+X.index+1,Ee=ue+X[0].length,ke={from:n.tr.mapping.map(ue),to:n.tr.mapping.map(Ee)},Ne=s.handler({state:n,range:ke,match:X,commands:c,chain:d,can:h,pasteEvent:l,dropEvent:u});m.push(Ne)})}),m.every(v=>v!==null)}var cu=null,SB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function wB(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const c=({state:h,from:m,to:g,rule:v,pasteEvt:S})=>{const k=h.tr,w=Lc({state:h,transaction:k});if(!(!xB({editor:e,state:w,from:Math.max(m-1,0),to:g.b-1,rule:v,pasteEvent:S,dropEvent:u})||!k.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return n.map(h=>new qe({view(m){const g=S=>{var k;r=(k=m.dom.parentElement)!=null&&k.contains(S.target)?m.dom.parentElement:null,r&&(cu=e)},v=()=>{cu&&(cu=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,g)=>{if(s=r===m.dom.parentElement,u=g,!s){const v=cu;v?.isEditable&&setTimeout(()=>{const S=v.state.selection;S&&v.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(m,g)=>{var v;const S=(v=g.clipboardData)==null?void 0:v.getData("text/html");return l=g,i=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(m,g,v)=>{const S=m[0],k=S.getMeta("uiEvent")==="paste"&&!i,w=S.getMeta("uiEvent")==="drop"&&!s,C=S.getMeta("applyPasteRules"),T=!!C;if(!k&&!w&&!T)return;if(T){let{text:R}=C;typeof R=="string"?R=R:R=Dm(W.from(R),v.schema);const{from:M}=C,I=M+R.length,B=SB(R);return c({rule:h,state:v,from:M,to:{b:I},pasteEvt:B})}const D=g.doc.content.findDiffStart(v.doc.content),P=g.doc.content.findDiffEnd(v.doc.content);if(!(!gB(D)||!P||D===P.b))return c({rule:h,state:v,from:D,to:P,pasteEvt:l})}}))}var _c=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=yA(t),this.schema=PL(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:lu(e.name,this.schema)},r=le(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Ku([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:lu(r.name,this.schema)},s=[],l=le(r,"addKeyboardShortcuts",i);let u={};if(r.type==="mark"&&le(r,"exitable",i)&&(u.ArrowRight=()=>hi.handleExit({editor:t,mark:r})),l){const g=Object.fromEntries(Object.entries(l()).map(([v,S])=>[v,()=>S({editor:t})]));u={...u,...g}}const c=LI(u);s.push(c);const d=le(r,"addInputRules",i);if(h1(r,t.options.enableInputRules)&&d){const g=d();if(g&&g.length){const v=pB({editor:t,rules:g}),S=Array.isArray(v)?v:[v];s.push(...S)}}const h=le(r,"addPasteRules",i);if(h1(r,t.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const v=wB({editor:t,rules:g});s.push(...v)}}const m=le(r,"addProseMirrorPlugins",i);if(m){const g=m();s.push(...g)}return s})}get attributes(){return gA(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=eo(this.extensions);return Object.fromEntries(e.filter(n=>!!le(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ot(n.name,this.schema)},s=le(n,"addNodeView",i);if(!s)return[];const l=s();if(!l)return[];const u=(c,d,h,m,g)=>{const v=Pl(c,r);return l({node:c,view:d,getPos:h,decorations:m,innerDecorations:g,editor:t,extension:n,HTMLAttributes:v})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return Ku([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:lu(i.name,this.schema)},l=le(i,"dispatchTransaction",s);return l?u=>{l.call(s,{transaction:u,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=eo(this.extensions);return Object.fromEntries(e.filter(n=>!!le(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Sr(n.name,this.schema)},s=le(n,"addMarkView",i);if(!s)return[];const l=(u,c,d)=>{const h=Pl(u,r);return s()({mark:u,view:c,inline:d,editor:t,extension:n,HTMLAttributes:h,updateAttributes:m=>{LB(u,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:lu(e.name,this.schema)};e.type==="mark"&&((n=Ie(le(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=le(e,"onBeforeCreate",r),s=le(e,"onCreate",r),l=le(e,"onUpdate",r),u=le(e,"onSelectionUpdate",r),c=le(e,"onTransaction",r),d=le(e,"onFocus",r),h=le(e,"onBlur",r),m=le(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),c&&this.editor.on("transaction",c),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),m&&this.editor.on("destroy",m)})}};_c.resolve=yA;_c.sort=Ku;_c.flatten=Rm;var kB={};Tm(kB,{ClipboardTextSerializer:()=>MA,Commands:()=>NA,Delete:()=>RA,Drop:()=>DA,Editable:()=>PA,FocusEvents:()=>IA,Keymap:()=>LA,Paste:()=>BA,Tabindex:()=>FA,TextDirection:()=>zA,focusEventsPluginKey:()=>OA});var Le=class TA extends Om{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new TA(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},MA=Le.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new qe({key:new ht("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,l=Math.min(...s.map(h=>h.$from.pos)),u=Math.max(...s.map(h=>h.$to.pos)),c=xA(n);return vA(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),NA=Le.create({name:"commands",addCommands(){return{...lA}}}),RA=Le.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var l,u,c,d;if((d=(c=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:c.call(u,t))!=null?d:t.getMeta("y-sync$"))return;const h=pA(t.before,[t,...e]);wA(h).forEach(v=>{h.mapping.mapResult(v.oldRange.from).deletedAfter&&h.mapping.mapResult(v.oldRange.to).deletedBefore&&h.before.nodesBetween(v.oldRange.from,v.oldRange.to,(S,k)=>{const w=k+S.nodeSize-2,C=v.oldRange.from<=k&&w<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:k,to:w,newFrom:h.mapping.map(k),newTo:h.mapping.map(w),deletedRange:v.oldRange,newRange:v.newRange,partial:!C,editor:this.editor,transaction:t,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((v,S)=>{var k,w;if(v instanceof Fn){const C=g.slice(S).map(v.from,-1),T=g.slice(S).map(v.to),D=g.invert().map(C,-1),P=g.invert().map(T),R=(k=h.doc.nodeAt(C-1))==null?void 0:k.marks.some(I=>I.eq(v.mark)),M=(w=h.doc.nodeAt(T))==null?void 0:w.marks.some(I=>I.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:D,to:P},newRange:{from:C,to:T},partial:!!(M||R),editor:this.editor,transaction:t,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),DA=Le.create({name:"drop",addProseMirrorPlugins(){return[new qe({key:new ht("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),PA=Le.create({name:"editable",addProseMirrorPlugins(){return[new qe({key:new ht("editable"),props:{editable:()=>this.editor.options.editable}})]}}),OA=new ht("focusEvents"),IA=Le.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new qe({key:OA,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),LA=Le.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:c,doc:d}=u,{empty:h,$anchor:m}=c,{pos:g,parent:v}=m,S=m.parent.isTextblock&&g>0?u.doc.resolve(g-1):m,k=S.parent.type.spec.isolating,w=m.pos-m.parentOffset,C=k&&S.parent.childCount===1?w===m.pos:ve.atStart(d).from===g;return!h||!v.type.isTextblock||v.textContent.length||!C||C&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Gu()||dA()?s:i},addProseMirrorPlugins(){return[new qe({key:new ht("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(k=>k.getMeta("composition")))return;const r=t.some(k=>k.docChanged)&&!e.doc.eq(n.doc),i=t.some(k=>k.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:l,to:u}=e.selection,c=ve.atStart(e.doc).from,d=ve.atEnd(e.doc).to;if(s||!(l===c&&u===d)||!Vc(n.doc))return;const g=n.tr,v=Lc({state:n,transaction:g}),{commands:S}=new Bc({editor:this.editor,state:v});if(S.clearNodes(),!!g.steps.length)return g}})]}}),BA=Le.create({name:"paste",addProseMirrorPlugins(){return[new qe({key:new ht("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),FA=Le.create({name:"tabindex",addProseMirrorPlugins(){return[new qe({key:new ht("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),zA=Le.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=eo(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new qe({key:new ht("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),AB=class Vs{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Vs(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Vs(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Vs(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,l=this.pos+r+(s?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!i&&u.depth<=this.depth)return;const c=new Vs(u,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),e.push(new Vs(u,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const c=l[u];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&s.every(c=>n[c]===l.node.attrs[c])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},CB=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function EB(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var bB=class extends dB{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:HL,createMappablePosition:WL},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=cA(e,this.options.autofocus);this.editorState=Qs.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=EB(CB,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=mA(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[PA,MA.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),NA,IA,LA,FA,DA,BA,RA,zA.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new _c(r,this)}createCommandManager(){this.commandManager=new Bc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=hp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=hp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new sA(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),u=l?.getMeta("focus"),c=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),c&&this.emit("blur",{editor:this,event:c.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return SA(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return jL(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Dm(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return IL(this.state.doc,{blockSeparator:e,textSerializers:{...xA(this.schema),...n}})}get isEmpty(){return Vc(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new AB(e,this)}get $doc(){return this.$pos(0)}};function to(t){return new jc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ie(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,l=r[r.length-1],u=r[0];if(l){const c=u.search(/\S/),d=n.from+u.indexOf(l),h=d+l.length;if(Pm(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(k=>k===t.type&&k!==v.mark.type)).filter(v=>v.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+c,d);const g=n.from+c+l.length;s.addMark(n.from+c,g,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function TB(t){return new jc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ie(t.getAttributes,void 0,r)||{},{tr:s}=e,l=n.from;let u=n.to;const c=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=l+d;h>u?h=u:u=h+r[1].length;const m=r[0][r[0].length-1];s.insertText(m,l+r[0].length-1),s.replaceWith(h,u,c)}else if(r[0]){const d=t.type.isInline?l:l-1;s.insert(d,t.type.create(i)).delete(s.mapping.map(l),s.mapping.map(u))}s.scrollIntoView()},undoable:t.undoable})}function mp(t){return new jc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Ie(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function no(t){return new jc({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Ie(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),c=l.doc.resolve(n.from).blockRange(),d=c&&fm(c,t.type,s);if(!d)return null;if(l.wrap(c,d),t.keepMarks&&t.editor){const{selection:m,storedMarks:g}=e,{splittableMarks:v}=t.editor.extensionManager,S=g||m.$to.parentOffset&&m.$from.marks();if(S){const k=S.filter(w=>v.includes(w.type.name));l.ensureMarks(k)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,s).run()}const h=l.doc.resolve(n.from-1).nodeBefore;h&&h.type===t.type&&fi(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,h))&&l.join(n.from-1)},undoable:t.undoable})}function MB(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof ae){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var NB={};Tm(NB,{createAtomBlockMarkdownSpec:()=>RB,createBlockMarkdownSpec:()=>DB,createInlineMarkdownSpec:()=>IB,parseAttributes:()=>Im,parseIndentedBlocks:()=>gp,renderNestedMarkdownContent:()=>Bm,serializeAttributes:()=>Lm});function Im(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,d=>(n.push(d),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const d=i.map(h=>h.trim().slice(1));e.class=d.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,d,h])=>{var m;const g=parseInt(((m=h.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),v=n[g];v&&(e[d]=v.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(h=>{h.match(/^[a-zA-Z][\w-]*$/)&&(e[h]=!0)}),e}function Lm(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function RB(t){const{nodeName:e,name:n,parseAttributes:r=Im,serializeAttributes:i=Lm,defaultAttributes:s={},requiredAttributes:l=[],allowedAttributes:u}=t,c=n||e,d=h=>{if(!u)return h;const m={};return u.forEach(g=>{g in h&&(m[g]=h[g])}),m};return{parseMarkdown:(h,m)=>{const g={...s,...h.attributes};return m.createNode(e,g,[])},markdownTokenizer:{name:e,level:"block",start(h){var m;const g=new RegExp(`^:::${c}(?:\\s|$)`,"m"),v=(m=h.match(g))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(h,m,g){const v=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=h.match(v);if(!S)return;const k=S[1]||"",w=r(k);if(!l.find(T=>!(T in w)))return{type:e,raw:S[0],attributes:w}}},renderMarkdown:h=>{const m=d(h.attrs||{}),g=i(m),v=g?` {${g}}`:"";return`:::${c}${v} :::`}}}function DB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=Im,serializeAttributes:s=Lm,defaultAttributes:l={},content:u="block",allowedAttributes:c}=t,d=n||e,h=m=>{if(!c)return m;const g={};return c.forEach(v=>{v in m&&(g[v]=m[v])}),g};return{parseMarkdown:(m,g)=>{let v;if(r){const k=r(m);v=typeof k=="string"?[{type:"text",text:k}]:k}else u==="block"?v=g.parseChildren(m.tokens||[]):v=g.parseInline(m.tokens||[]);const S={...l,...m.attributes};return g.createNode(e,S,v)},markdownTokenizer:{name:e,level:"block",start(m){var g;const v=new RegExp(`^:::${d}`,"m"),S=(g=m.match(v))==null?void 0:g.index;return S!==void 0?S:-1},tokenize(m,g,v){var S;const k=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),w=m.match(k);if(!w)return;const[C,T=""]=w,D=i(T);let P=1;const R=C.length;let M="";const I=/^:::([\w-]*)(\s.*)?/gm,B=m.slice(R);for(I.lastIndex=0;;){const X=I.exec(B);if(X===null)break;const ue=X.index,Ee=X[1];if(!((S=X[2])!=null&&S.endsWith(":::"))){if(Ee)P+=1;else if(P-=1,P===0){const ke=B.slice(0,ue);M=ke.trim();const Ne=m.slice(0,R+ue+X[0].length);let xe=[];if(M)if(u==="block")for(xe=v.blockTokens(ke),xe.forEach(Ae=>{Ae.text&&(!Ae.tokens||Ae.tokens.length===0)&&(Ae.tokens=v.inlineTokens(Ae.text))});xe.length>0;){const Ae=xe[xe.length-1];if(Ae.type==="paragraph"&&(!Ae.text||Ae.text.trim()===""))xe.pop();else break}else xe=v.inlineTokens(M);return{type:e,raw:Ne,attributes:D,content:M,tokens:xe}}}}}},renderMarkdown:(m,g)=>{const v=h(m.attrs||{}),S=s(v),k=S?` {${S}}`:"",w=g.renderChildren(m.content||[],`

`);return`:::${d}${k}

${w}

:::`}}}function PB(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,l]=r;e[i]=s||l,r=n.exec(t)}return e}function OB(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function IB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=PB,serializeAttributes:s=OB,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:c}=t,d=n||e,h=g=>{if(!c)return g;const v={};return c.forEach(S=>{const k=typeof S=="string"?S:S.name,w=typeof S=="string"?void 0:S.skipIfDefault;if(k in g){const C=g[k];if(w!==void 0&&C===w)return;v[k]=C}}),v},m=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(g,v)=>{const S={...l,...g.attributes};if(u)return v.createNode(e,S);const k=r?r(g):g.content||"";return k?v.createNode(e,S,[v.createTextNode(k)]):v.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(g){const v=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),S=g.match(v),k=S?.index;return k!==void 0?k:-1},tokenize(g,v,S){const k=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),w=g.match(k);if(!w)return;let C="",T="";if(u){const[,P]=w;T=P}else{const[,P,R]=w;T=P,C=R||""}const D=i(T.trim());return{type:e,raw:w[0],content:C.trim(),attributes:D}}},renderMarkdown:g=>{let v="";r?v=r(g):g.content&&g.content.length>0&&(v=g.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const S=h(g.attrs||{}),k=s(S),w=k?` ${k}`:"";return u?`[${d}${w}]`:`[${d}${w}]${v}[/${d}]`}}}function gp(t,e,n){var r,i,s,l;const u=t.split(`
`),c=[];let d="",h=0;const m=e.baseIndentSize||2;for(;h<u.length;){const g=u[h],v=g.match(e.itemPattern);if(!v){if(c.length>0)break;if(g.trim()===""){h+=1,d=`${d}${g}
`;continue}else return}const S=e.extractItemData(v),{indentLevel:k,mainContent:w}=S;d=`${d}${g}
`;const C=[w];for(h+=1;h<u.length;){const R=u[h];if(R.trim()===""){const I=u.slice(h+1).findIndex(ue=>ue.trim()!=="");if(I===-1)break;if((((i=(r=u[h+1+I].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>k){C.push(R),d=`${d}${R}
`,h+=1;continue}else break}if((((l=(s=R.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>k)C.push(R),d=`${d}${R}
`,h+=1;else break}let T;const D=C.slice(1);if(D.length>0){const R=D.map(M=>M.slice(k+m)).join(`
`);R.trim()&&(e.customNestedParser?T=e.customNestedParser(R):T=n.blockTokens(R))}const P=e.createToken(S,T);c.push(P)}if(c.length!==0)return{items:c,raw:d}}function Bm(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...l]=t.content,u=e.renderChildren([s]),c=[`${i}${u}`];return l&&l.length>0&&l.forEach(d=>{const h=e.renderChildren([d]);if(h){const m=h.split(`
`).map(g=>g?e.indent(g):"").join(`
`);c.push(m)}}),c.join(`
`)}function LB(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,l=t;i.descendants((u,c)=>{const d=s.mapping.map(c),h=s.mapping.map(c)+u.nodeSize;let m=null;if(u.marks.forEach(v=>{if(v!==l)return!1;m=v}),!m)return;let g=!1;if(Object.keys(n).forEach(v=>{n[v]!==m.attrs[v]&&(g=!0)}),g){const v=t.type.create({...t.attrs,...n});s.removeMark(d,h,t.type),s.addMark(d,h,v)}}),s.docChanged&&e.view.dispatch(s)}var un=class VA extends Om{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new VA(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function es(t){return new yB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Ie(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:l}=e,u=r[r.length-1],c=r[0];let d=n.to;if(u){const h=c.search(/\S/),m=n.from+c.indexOf(u),g=m+u.length;if(Pm(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(w=>w===t.type&&w!==S.mark.type)).filter(S=>S.to>m).length)return null;g<n.to&&l.delete(g,n.to),m>n.from&&l.delete(n.from+h,m),d=n.from+h+u.length,l.addMark(n.from+h,d,t.type.create(s||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:BB,getOwnPropertySymbols:FB}=Object,{hasOwnProperty:zB}=Object.prototype;function ph(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function fu(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,l=s.get(n),u=s.get(r);if(l&&u)return l===r&&u===n;s.set(n,r),s.set(r,n);const c=t(n,r,i);return s.delete(n),s.delete(r),c}}function VB(t){return t?.[Symbol.toStringTag]}function g1(t){return BB(t).concat(FB(t))}const jB=Object.hasOwn||((t,e)=>zB.call(t,e));function ns(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const _B="__v",UB="__o",HB="_owner",{getOwnPropertyDescriptor:y1,keys:v1}=Object;function WB(t,e){return t.byteLength===e.byteLength&&$u(new Uint8Array(t),new Uint8Array(e))}function QB(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function GB(t,e){return t.byteLength===e.byteLength&&$u(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function KB(t,e){return ns(t.getTime(),e.getTime())}function $B(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function qB(t,e){return t===e}function x1(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let l,u,c=0;for(;(l=s.next())&&!l.done;){const d=e.entries();let h=!1,m=0;for(;(u=d.next())&&!u.done;){if(i[m]){m++;continue}const g=l.value,v=u.value;if(n.equals(g[0],v[0],c,m,t,e,n)&&n.equals(g[1],v[1],g[0],v[0],t,e,n)){h=i[m]=!0;break}m++}if(!h)return!1;c++}return!0}const YB=ns;function JB(t,e,n){const r=v1(t);let i=r.length;if(v1(e).length!==i)return!1;for(;i-- >0;)if(!jA(t,e,n,r[i]))return!1;return!0}function $o(t,e,n){const r=g1(t);let i=r.length;if(g1(e).length!==i)return!1;let s,l,u;for(;i-- >0;)if(s=r[i],!jA(t,e,n,s)||(l=y1(t,s),u=y1(e,s),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function XB(t,e){return ns(t.valueOf(),e.valueOf())}function ZB(t,e){return t.source===e.source&&t.flags===e.flags}function S1(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let l,u;for(;(l=s.next())&&!l.done;){const c=e.values();let d=!1,h=0;for(;(u=c.next())&&!u.done;){if(!i[h]&&n.equals(l.value,u.value,l.value,u.value,t,e,n)){d=i[h]=!0;break}h++}if(!d)return!1}return!0}function $u(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function eF(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function jA(t,e,n,r){return(r===HB||r===UB||r===_B)&&(t.$$typeof||e.$$typeof)?!0:jB(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const tF="[object ArrayBuffer]",nF="[object Arguments]",rF="[object Boolean]",iF="[object DataView]",sF="[object Date]",oF="[object Error]",lF="[object Map]",aF="[object Number]",uF="[object Object]",cF="[object RegExp]",fF="[object Set]",dF="[object String]",hF={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},pF="[object URL]",mF=Object.prototype.toString;function gF({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:h,areSetsEqual:m,areTypedArraysEqual:g,areUrlsEqual:v,unknownTagComparators:S}){return function(w,C,T){if(w===C)return!0;if(w==null||C==null)return!1;const D=typeof w;if(D!==typeof C)return!1;if(D!=="object")return D==="number"?u(w,C,T):D==="function"?s(w,C,T):!1;const P=w.constructor;if(P!==C.constructor)return!1;if(P===Object)return c(w,C,T);if(Array.isArray(w))return e(w,C,T);if(P===Date)return r(w,C,T);if(P===RegExp)return h(w,C,T);if(P===Map)return l(w,C,T);if(P===Set)return m(w,C,T);const R=mF.call(w);if(R===sF)return r(w,C,T);if(R===cF)return h(w,C,T);if(R===lF)return l(w,C,T);if(R===fF)return m(w,C,T);if(R===uF)return typeof w.then!="function"&&typeof C.then!="function"&&c(w,C,T);if(R===pF)return v(w,C,T);if(R===oF)return i(w,C,T);if(R===nF)return c(w,C,T);if(hF[R])return g(w,C,T);if(R===tF)return t(w,C,T);if(R===iF)return n(w,C,T);if(R===rF||R===aF||R===dF)return d(w,C,T);if(S){let M=S[R];if(!M){const I=VB(w);I&&(M=S[I])}if(M)return M(w,C,T)}return!1}}function yF({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:WB,areArraysEqual:n?$o:QB,areDataViewsEqual:GB,areDatesEqual:KB,areErrorsEqual:$B,areFunctionsEqual:qB,areMapsEqual:n?ph(x1,$o):x1,areNumbersEqual:YB,areObjectsEqual:n?$o:JB,arePrimitiveWrappersEqual:XB,areRegExpsEqual:ZB,areSetsEqual:n?ph(S1,$o):S1,areTypedArraysEqual:n?ph($u,$o):$u,areUrlsEqual:eF,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=fu(r.areArraysEqual),s=fu(r.areMapsEqual),l=fu(r.areObjectsEqual),u=fu(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:u})}return r}function vF(t){return function(e,n,r,i,s,l,u){return t(e,n,u)}}function xF({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(u,c){const{cache:d=t?new WeakMap:void 0,meta:h}=n();return e(u,c,{cache:d,equals:r,meta:h,strict:i})};if(t)return function(u,c){return e(u,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,c){return e(u,c,s)}}const SF=pi();pi({strict:!0});pi({circular:!0});pi({circular:!0,strict:!0});pi({createInternalComparator:()=>ns});pi({strict:!0,createInternalComparator:()=>ns});pi({circular:!0,createInternalComparator:()=>ns});pi({circular:!0,createInternalComparator:()=>ns,strict:!0});function pi(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=yF(t),l=gF(s),u=n?n(l):vF(l);return xF({circular:e,comparator:l,createState:r,equals:u,strict:i})}var mh={exports:{}},gh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function wF(){if(w1)return gh;w1=1;var t=Ll(),e=Dw();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,l=t.useEffect,u=t.useMemo,c=t.useDebugValue;return gh.useSyncExternalStoreWithSelector=function(d,h,m,g,v){var S=s(null);if(S.current===null){var k={hasValue:!1,value:null};S.current=k}else k=S.current;S=u(function(){function C(M){if(!T){if(T=!0,D=M,M=g(M),v!==void 0&&k.hasValue){var I=k.value;if(v(I,M))return P=I}return P=M}if(I=P,r(D,M))return I;var B=g(M);return v!==void 0&&v(I,B)?(D=M,I):(D=M,P=B)}var T=!1,D,P,R=m===void 0?null:m;return[function(){return C(h())},R===null?void 0:function(){return C(R())}]},[h,m,g,v]);var w=i(d,S[0],S[1]);return l(function(){k.hasValue=!0,k.value=w},[w]),c(w),w},gh}var k1;function kF(){return k1||(k1=1,mh.exports=wF()),mh.exports}var AF=kF(),CF=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},EF=({contentComponent:t})=>{const e=Pw.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return E.jsx(E.Fragment,{children:Object.values(e)})};function bF(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:ND.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var TF=class extends zn.Component{constructor(t){var e;super(t),this.editorContentRef=zn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=bF(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return E.jsxs(E.Fragment,{children:[E.jsx("div",{ref:CF(e,this.editorContentRef),...n}),t?.contentComponent&&E.jsx(EF,{contentComponent:t.contentComponent})]})}},MF=F.forwardRef((t,e)=>{const n=zn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return zn.createElement(TF,{key:n,innerRef:e,...t})}),NF=zn.memo(MF),RF=typeof window<"u"?F.useLayoutEffect:F.useEffect,DF=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function PF(t){var e;const[n]=F.useState(()=>new DF(t.editor)),r=AF.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:SF);return RF(()=>n.watch(t.editor),[t.editor,n]),F.useDebugValue(r),r}var OF=!1,yp=typeof window>"u",IF=yp||!!(typeof window<"u"&&window.next),LF=class _A{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?yp||IF?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new bB(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var l;return i===((l=n.extensions)==null?void 0:l[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?_A.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function BF(t={},e=[]){const n=F.useRef(t);n.current=t;const[r]=F.useState(()=>new LF(n)),i=Pw.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return F.useDebugValue(i),F.useEffect(r.onRender(e)),PF({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var FF=F.createContext({editor:null});FF.Consumer;var zF=F.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),VF=()=>F.useContext(zF);zn.forwardRef((t,e)=>{const{onDragStart:n}=VF(),r=t.as||"div";return E.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});zn.createContext({markViewContentRef:()=>{}});var qu=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},jF=/^\s*>\s$/,_F=un.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return qu("blockquote",{...nt(this.options.HTMLAttributes,t),children:qu("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const u=e.renderChildren([i]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(u.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[no({find:jF,type:this.type})]}}),UF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,HF=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,WF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,QF=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,GF=hi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return qu("strong",{...nt(this.options.HTMLAttributes,t),children:qu("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[to({find:UF,type:this.type}),to({find:WF,type:this.type})]},addPasteRules(){return[es({find:HF,type:this.type}),es({find:QF,type:this.type})]}}),KF=/(^|[^`])`([^`]+)`(?!`)$/,$F=/(^|[^`])`([^`]+)`(?!`)/g,qF=hi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[to({find:KF,type:this.type})]},addPasteRules(){return[es({find:$F,type:this.type})]}}),yh=4,YF=/^```([a-z]+)?[\s\n]$/,JF=/^~~~([a-z]+)?[\s\n]$/,XF=un.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:yh,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",nt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:yh,{state:r}=t,{selection:i}=r,{$from:s,empty:l}=i;if(s.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?t.commands.insertContent(u):t.commands.command(({tr:c})=>{const{from:d,to:h}=i,v=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(S=>u+S).join(`
`);return c.replaceWith(d,h,r.schema.text(v)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:yh,{state:r}=t,{selection:i}=r,{$from:s,empty:l}=i;return s.parent.type!==this.type?!1:l?t.commands.command(({tr:u})=>{var c;const{pos:d}=s,h=s.start(),m=s.end(),v=r.doc.textBetween(h,m,`
`,`
`).split(`
`);let S=0,k=0;const w=d-h;for(let M=0;M<v.length;M+=1){if(k+v[M].length>=w){S=M;break}k+=v[M].length+1}const T=((c=v[S].match(/^ */))==null?void 0:c[0])||"",D=Math.min(T.length,n);if(D===0)return!0;let P=h;for(let M=0;M<S;M+=1)P+=v[M].length+1;return u.delete(P,P+D),d-P<=D&&u.setSelection(pe.create(u.doc,P)),!0}):t.commands.command(({tr:u})=>{const{from:c,to:d}=i,g=r.doc.textBetween(c,d,`
`,`
`).split(`
`).map(v=>{var S;const k=((S=v.match(/^ */))==null?void 0:S[0])||"",w=Math.min(k.length,n);return v.slice(w)}).join(`
`);return u.replaceWith(c,d,r.schema.text(g)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!s||!l?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:d})=>(d.setSelection(ve.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[mp({find:YF,type:this.type,getAttributes:t=>({language:t[1]})}),mp({find:JF,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new qe({key:new ht("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:l,schema:u}=t.state,c=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:s},c)),l.selection.$from.parent.type!==this.type&&l.setSelection(pe.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),ZF=un.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),ez=un.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",nt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&c&&l){const m=c.filter(g=>u.includes(g.type.name));d.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),tz=un.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,nt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>mp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),nz=un.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",nt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!MB(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return kA(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:l,dispatch:u})=>{if(u){const{$to:c}=l.selection,d=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?l.setSelection(pe.create(l.doc,c.pos+1)):c.nodeAfter.isBlock?l.setSelection(ae.create(l.doc,c.pos)):l.setSelection(pe.create(l.doc,c.pos));else{const h=s.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,m=h?.create();m&&(l.insert(d,m),l.setSelection(pe.create(l.doc,d+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[TB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,sz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,oz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lz=hi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[to({find:rz,type:this.type}),to({find:sz,type:this.type})]},addPasteRules(){return[es({find:iz,type:this.type}),es({find:oz,type:this.type})]}});const az="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",uz="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",vp="numeric",xp="ascii",Sp="alpha",hl="asciinumeric",rl="alphanumeric",wp="domain",UA="emoji",cz="scheme",fz="slashscheme",vh="whitespace";function dz(t,e){return t in e||(e[t]=[]),e[t]}function Ui(t,e,n){e[vp]&&(e[hl]=!0,e[rl]=!0),e[xp]&&(e[hl]=!0,e[Sp]=!0),e[hl]&&(e[rl]=!0),e[Sp]&&(e[rl]=!0),e[rl]&&(e[wp]=!0),e[UA]&&(e[wp]=!0);for(const r in e){const i=dz(r,n);i.indexOf(t)<0&&i.push(t)}}function hz(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Zt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Zt.groups={};Zt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Zt.groups;let i;return e&&e.j?i=e:(i=new Zt(e),n&&r&&Ui(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let l=0;l<s-1;l++)i=i.tt(t[l]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Zt.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let l,u=i.go(t);if(u?(l=new Zt,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new Zt,s){if(r)if(l.t&&typeof l.t=="string"){const c=Object.assign(hz(l.t,r),n);Ui(s,c,r)}else n&&Ui(s,n,r);l.t=s}return i.j[t]=l,l}};const ye=(t,e,n,r,i)=>t.ta(e,n,r,i),Je=(t,e,n,r,i)=>t.tr(e,n,r,i),A1=(t,e,n,r,i)=>t.ts(e,n,r,i),K=(t,e,n,r,i)=>t.tt(e,n,r,i),hr="WORD",kp="UWORD",HA="ASCIINUMERICAL",WA="ALPHANUMERICAL",Ol="LOCALHOST",Ap="TLD",Cp="UTLD",Eu="SCHEME",js="SLASH_SCHEME",Fm="NUM",Ep="WS",zm="NL",pl="OPENBRACE",ml="CLOSEBRACE",Yu="OPENBRACKET",Ju="CLOSEBRACKET",Xu="OPENPAREN",Zu="CLOSEPAREN",ec="OPENANGLEBRACKET",tc="CLOSEANGLEBRACKET",nc="FULLWIDTHLEFTPAREN",rc="FULLWIDTHRIGHTPAREN",ic="LEFTCORNERBRACKET",sc="RIGHTCORNERBRACKET",oc="LEFTWHITECORNERBRACKET",lc="RIGHTWHITECORNERBRACKET",ac="FULLWIDTHLESSTHAN",uc="FULLWIDTHGREATERTHAN",cc="AMPERSAND",fc="APOSTROPHE",dc="ASTERISK",$r="AT",hc="BACKSLASH",pc="BACKTICK",mc="CARET",Jr="COLON",Vm="COMMA",gc="DOLLAR",Gn="DOT",yc="EQUALS",jm="EXCLAMATION",xn="HYPHEN",gl="PERCENT",vc="PIPE",xc="PLUS",Sc="POUND",yl="QUERY",_m="QUOTE",QA="FULLWIDTHMIDDLEDOT",Um="SEMI",Kn="SLASH",vl="TILDE",wc="UNDERSCORE",GA="EMOJI",kc="SYM";var KA=Object.freeze({__proto__:null,ALPHANUMERICAL:WA,AMPERSAND:cc,APOSTROPHE:fc,ASCIINUMERICAL:HA,ASTERISK:dc,AT:$r,BACKSLASH:hc,BACKTICK:pc,CARET:mc,CLOSEANGLEBRACKET:tc,CLOSEBRACE:ml,CLOSEBRACKET:Ju,CLOSEPAREN:Zu,COLON:Jr,COMMA:Vm,DOLLAR:gc,DOT:Gn,EMOJI:GA,EQUALS:yc,EXCLAMATION:jm,FULLWIDTHGREATERTHAN:uc,FULLWIDTHLEFTPAREN:nc,FULLWIDTHLESSTHAN:ac,FULLWIDTHMIDDLEDOT:QA,FULLWIDTHRIGHTPAREN:rc,HYPHEN:xn,LEFTCORNERBRACKET:ic,LEFTWHITECORNERBRACKET:oc,LOCALHOST:Ol,NL:zm,NUM:Fm,OPENANGLEBRACKET:ec,OPENBRACE:pl,OPENBRACKET:Yu,OPENPAREN:Xu,PERCENT:gl,PIPE:vc,PLUS:xc,POUND:Sc,QUERY:yl,QUOTE:_m,RIGHTCORNERBRACKET:sc,RIGHTWHITECORNERBRACKET:lc,SCHEME:Eu,SEMI:Um,SLASH:Kn,SLASH_SCHEME:js,SYM:kc,TILDE:vl,TLD:Ap,UNDERSCORE:wc,UTLD:Cp,UWORD:kp,WORD:hr,WS:Ep});const fr=/[a-z]/,qo=/\p{L}/u,xh=/\p{Emoji}/u,dr=/\d/,Sh=/\s/,C1="\r",wh=`
`,pz="",mz="",kh="";let du=null,hu=null;function gz(t=[]){const e={};Zt.groups=e;const n=new Zt;du==null&&(du=E1(az)),hu==null&&(hu=E1(uz)),K(n,"'",fc),K(n,"{",pl),K(n,"}",ml),K(n,"[",Yu),K(n,"]",Ju),K(n,"(",Xu),K(n,")",Zu),K(n,"<",ec),K(n,">",tc),K(n,"",nc),K(n,"",rc),K(n,"",ic),K(n,"",sc),K(n,"",oc),K(n,"",lc),K(n,"",ac),K(n,"",uc),K(n,"&",cc),K(n,"*",dc),K(n,"@",$r),K(n,"`",pc),K(n,"^",mc),K(n,":",Jr),K(n,",",Vm),K(n,"$",gc),K(n,".",Gn),K(n,"=",yc),K(n,"!",jm),K(n,"-",xn),K(n,"%",gl),K(n,"|",vc),K(n,"+",xc),K(n,"#",Sc),K(n,"?",yl),K(n,'"',_m),K(n,"/",Kn),K(n,";",Um),K(n,"~",vl),K(n,"_",wc),K(n,"\\",hc),K(n,"",QA);const r=Je(n,dr,Fm,{[vp]:!0});Je(r,dr,r);const i=Je(r,fr,HA,{[hl]:!0}),s=Je(r,qo,WA,{[rl]:!0}),l=Je(n,fr,hr,{[xp]:!0});Je(l,dr,i),Je(l,fr,l),Je(i,dr,i),Je(i,fr,i);const u=Je(n,qo,kp,{[Sp]:!0});Je(u,fr),Je(u,dr,s),Je(u,qo,u),Je(s,dr,s),Je(s,fr),Je(s,qo,s);const c=K(n,wh,zm,{[vh]:!0}),d=K(n,C1,Ep,{[vh]:!0}),h=Je(n,Sh,Ep,{[vh]:!0});K(n,kh,h),K(d,wh,c),K(d,kh,h),Je(d,Sh,h),K(h,C1),K(h,wh),Je(h,Sh,h),K(h,kh,h);const m=Je(n,xh,GA,{[UA]:!0});K(m,"#"),Je(m,xh,m),K(m,pz,m);const g=K(m,mz);K(g,"#"),Je(g,xh,m);const v=[[fr,l],[dr,i]],S=[[fr,null],[qo,u],[dr,s]];for(let k=0;k<du.length;k++)Wr(n,du[k],Ap,hr,v);for(let k=0;k<hu.length;k++)Wr(n,hu[k],Cp,kp,S);Ui(Ap,{tld:!0,ascii:!0},e),Ui(Cp,{utld:!0,alpha:!0},e),Wr(n,"file",Eu,hr,v),Wr(n,"mailto",Eu,hr,v),Wr(n,"http",js,hr,v),Wr(n,"https",js,hr,v),Wr(n,"ftp",js,hr,v),Wr(n,"ftps",js,hr,v),Ui(Eu,{scheme:!0,ascii:!0},e),Ui(js,{slashscheme:!0,ascii:!0},e),t=t.sort((k,w)=>k[0]>w[0]?1:-1);for(let k=0;k<t.length;k++){const w=t[k][0],T=t[k][1]?{[cz]:!0}:{[fz]:!0};w.indexOf("-")>=0?T[wp]=!0:fr.test(w)?dr.test(w)?T[hl]=!0:T[xp]=!0:T[vp]=!0,A1(n,w,w,T)}return A1(n,"localhost",Ol,{ascii:!0}),n.jd=new Zt(kc),{start:n,tokens:Object.assign({groups:e},KA)}}function $A(t,e){const n=yz(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,i=[];let s=0,l=0;for(;l<r;){let u=t,c=null,d=0,h=null,m=-1,g=-1;for(;l<r&&(c=u.go(n[l]));)u=c,u.accepts()?(m=0,g=0,h=u):m>=0&&(m+=n[l].length,g++),d+=n[l].length,s+=n[l].length,l++;s-=m,l-=g,d-=m,i.push({t:h.t,v:e.slice(s-d,s),s:s-d,e:s})}return i}function yz(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,l=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function Wr(t,e,n,r,i){let s;const l=e.length;for(let u=0;u<l-1;u++){const c=e[u];t.j[c]?s=t.j[c]:(s=new Zt(r),s.jr=i.slice(),t.j[c]=s),t=s}return s=new Zt(n),s.jr=i.slice(),t.j[e[l-1]]=s,s}function E1(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+s),10);l>0;l--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Il={defaultProtocol:"http",events:null,format:b1,formatHref:b1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Hm(t,e=null){let n=Object.assign({},Il);t&&(n=Object.assign(n,t instanceof Hm?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Hm.prototype={o:Il,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Il[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function b1(t){return t}function qA(t,e){this.t="token",this.v=t,this.tk=e}qA.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Il.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),l={},u=t.get("className",n,e),c=t.get("target",n,e),d=t.get("rel",n,e),h=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,u&&(l.class=u),c&&(l.target=c),d&&(l.rel=d),h&&Object.assign(l,h),{tagName:i,attributes:l,content:s,eventListeners:m}}};function Uc(t,e){class n extends qA{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const T1=Uc("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),M1=Uc("text"),vz=Uc("nl"),pu=Uc("url",{isLink:!0,toHref(t=Il.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ol&&t[1].t===Jr}}),yn=t=>new Zt(t);function xz({groups:t}){const e=t.domain.concat([cc,dc,$r,hc,pc,mc,gc,yc,xn,Fm,gl,vc,xc,Sc,Kn,kc,vl,wc]),n=[fc,Jr,Vm,Gn,jm,gl,yl,_m,Um,ec,tc,pl,ml,Ju,Yu,Xu,Zu,nc,rc,ic,sc,oc,lc,ac,uc],r=[cc,fc,dc,hc,pc,mc,gc,yc,xn,pl,ml,gl,vc,xc,Sc,yl,Kn,kc,vl,wc],i=yn(),s=K(i,vl);ye(s,r,s),ye(s,t.domain,s);const l=yn(),u=yn(),c=yn();ye(i,t.domain,l),ye(i,t.scheme,u),ye(i,t.slashscheme,c),ye(l,r,s),ye(l,t.domain,l);const d=K(l,$r);K(s,$r,d),K(u,$r,d),K(c,$r,d);const h=K(s,Gn);ye(h,r,s),ye(h,t.domain,s);const m=yn();ye(d,t.domain,m),ye(m,t.domain,m);const g=K(m,Gn);ye(g,t.domain,m);const v=yn(T1);ye(g,t.tld,v),ye(g,t.utld,v),K(d,Ol,v);const S=K(m,xn);K(S,xn,S),ye(S,t.domain,m),ye(v,t.domain,m),K(v,Gn,g),K(v,xn,S);const k=K(v,Jr);ye(k,t.numeric,T1);const w=K(l,xn),C=K(l,Gn);K(w,xn,w),ye(w,t.domain,l),ye(C,r,s),ye(C,t.domain,l);const T=yn(pu);ye(C,t.tld,T),ye(C,t.utld,T),ye(T,t.domain,l),ye(T,r,s),K(T,Gn,C),K(T,xn,w),K(T,$r,d);const D=K(T,Jr),P=yn(pu);ye(D,t.numeric,P);const R=yn(pu),M=yn();ye(R,e,R),ye(R,n,M),ye(M,e,R),ye(M,n,M),K(T,Kn,R),K(P,Kn,R);const I=K(u,Jr),B=K(c,Jr),X=K(B,Kn),ue=K(X,Kn);ye(u,t.domain,l),K(u,Gn,C),K(u,xn,w),ye(c,t.domain,l),K(c,Gn,C),K(c,xn,w),ye(I,t.domain,R),K(I,Kn,R),K(I,yl,R),ye(ue,t.domain,R),ye(ue,e,R),K(ue,Kn,R);const Ee=[[pl,ml],[Yu,Ju],[Xu,Zu],[ec,tc],[nc,rc],[ic,sc],[oc,lc],[ac,uc]];for(let ke=0;ke<Ee.length;ke++){const[Ne,xe]=Ee[ke],Ae=K(R,Ne);K(M,Ne,Ae),K(Ae,xe,R);const De=yn(pu);ye(Ae,e,De);const se=yn();ye(Ae,n),ye(De,e,De),ye(De,n,se),ye(se,e,De),ye(se,n,se),K(De,xe,R),K(se,xe,R)}return K(i,Ol,T),K(i,zm,vz),{start:i,tokens:KA}}function Sz(t,e,n){let r=n.length,i=0,s=[],l=[];for(;i<r;){let u=t,c=null,d=null,h=0,m=null,g=-1;for(;i<r&&!(c=u.go(n[i].t));)l.push(n[i++]);for(;i<r&&(d=c||u.go(n[i].t));)c=null,u=d,u.accepts()?(g=0,m=u):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(l.push(n[i]),i++);else{l.length>0&&(s.push(Ah(M1,e,l)),l=[]),i-=g,h-=g;const v=m.t,S=n.slice(i-h,i);s.push(Ah(v,e,S))}}return l.length>0&&s.push(Ah(M1,e,l)),s}function Ah(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const wz=typeof console<"u"&&console&&console.warn||(()=>{}),kz="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",_e={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Az(){return Zt.groups={},_e.scanner=null,_e.parser=null,_e.tokenQueue=[],_e.pluginQueue=[],_e.customSchemes=[],_e.initialized=!1,_e}function N1(t,e=!1){if(_e.initialized&&wz(`linkifyjs: already initialized - will not register custom scheme "${t}" ${kz}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);_e.customSchemes.push([t,e])}function Cz(){_e.scanner=gz(_e.customSchemes);for(let t=0;t<_e.tokenQueue.length;t++)_e.tokenQueue[t][1]({scanner:_e.scanner});_e.parser=xz(_e.scanner.tokens);for(let t=0;t<_e.pluginQueue.length;t++)_e.pluginQueue[t][1]({scanner:_e.scanner,parser:_e.parser});return _e.initialized=!0,_e}function Wm(t){return _e.initialized||Cz(),Sz(_e.parser.start,t,$A(_e.scanner.start,t))}Wm.scan=$A;function YA(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Hm(n),i=Wm(t),s=[];for(let l=0;l<i.length;l++){const u=i[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}var Qm="[\0- -\u2029]",Ez=new RegExp(Qm),bz=new RegExp(`${Qm}$`),Tz=new RegExp(Qm,"g");function Mz(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Nz(t){return new qe({key:new ht("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=e.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:l}=r,u=pA(n.doc,[...e]);if(wA(u).forEach(({newRange:d})=>{const h=ML(r.doc,d,v=>v.isTextblock);let m,g;if(h.length>1)m=h[0],g=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(h.length){const v=r.doc.textBetween(d.from,d.to," "," ");if(!bz.test(v))return;m=h[0],g=r.doc.textBetween(m.pos,d.to,void 0," ")}if(m&&g){const v=g.split(Ez).filter(Boolean);if(v.length<=0)return!1;const S=v[v.length-1],k=m.pos+g.lastIndexOf(S);if(!S)return!1;const w=Wm(S).map(C=>C.toObject(t.defaultProtocol));if(!Mz(w))return!1;w.filter(C=>C.isLink).map(C=>({...C,from:k+C.start+1,to:k+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>t.validate(C.value)).filter(C=>t.shouldAutoLink(C.value)).forEach(C=>{Pm(C.from,C.to,r.doc).some(T=>T.mark.type===t.type)||l.addMark(C.from,C.to,t.type.create({href:C.href}))})}}),!!l.steps.length)return l}})}function Rz(t){return new qe({key:new ht("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const c=r.target;if(!c)return!1;const d=t.editor.view.dom;l=c.closest("a"),l&&!d.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const c=SA(e.state,t.type.name),d=(i=l.href)!=null?i:c.href,h=(s=l.target)!=null?s:c.target;d&&(window.open(d,h),u=!0)}return u}}})}function Dz(t){return new qe({key:new ht("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:l}=s,{empty:u}=l;if(u)return!1;let c="";r.content.forEach(h=>{c+=h.textContent});const d=YA(c,{defaultProtocol:t.defaultProtocol}).find(h=>h.isLink&&h.value===c);return!c||!d||i!==void 0&&!i(d.value)?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function Ii(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(Tz,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var JA=hi.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){N1(t);return}N1(t.scheme,t.optionalSlashes)})},onDestroy(){Az()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Ii(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Ii(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Ii(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",nt(this.options.HTMLAttributes,t),0]:["a",nt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Ii(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Ii(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[es({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=YA(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:l=>!!Ii(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Nz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Ii(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(Rz({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Dz({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),Pz=JA,Oz=Object.defineProperty,Iz=(t,e)=>{for(var n in e)Oz(t,n,{get:e[n],enumerable:!0})},Lz="listItem",R1="textStyle",D1=/^\s*([-+*])\s$/,XA=un.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Lz,this.editor.getAttributes(R1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=no({find:D1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=no({find:D1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(R1),editor:this.editor})),[t]}}),ZA=un.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),u=e.parseChildren(l);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Bm(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Bz={};Iz(Bz,{findListItemPos:()=>Hl,getNextListDepth:()=>Gm,handleBackspace:()=>bp,handleDelete:()=>Tp,hasListBefore:()=>eC,hasListItemAfter:()=>Fz,hasListItemBefore:()=>tC,listItemHasSubList:()=>nC,nextListIsDeeper:()=>rC,nextListIsHigher:()=>iC});var Hl=(t,e)=>{const{$from:n}=e.selection,r=ot(t,e.schema);let i=null,s=n.depth,l=n.pos,u=null;for(;s>0&&u===null;)i=n.node(s),i.type===r?u=s:(s-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},Gm=(t,e)=>{const n=Hl(t,e);if(!n)return!1;const[,r]=zL(e,t,n.$pos.pos+4);return r},eC=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},tC=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},nC=(t,e,n)=>{if(!n)return!1;const r=ot(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},bp=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ui(t.state,e)&&eC(t.state,e,n)){const{$anchor:u}=t.state.selection,c=t.state.doc.resolve(u.before()-1),d=[];c.node().descendants((g,v)=>{g.type.name===e&&d.push({node:g,pos:v})});const h=d.at(-1);if(!h)return!1;const m=t.state.doc.resolve(c.start()+h.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!ui(t.state,e)||!UL(t.state))return!1;const r=Hl(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=nC(e,t.state,s);return tC(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},rC=(t,e)=>{const n=Gm(t,e),r=Hl(t,e);return!r||!n?!1:n>r.depth},iC=(t,e)=>{const n=Gm(t,e),r=Hl(t,e);return!r||!n?!1:n<r.depth},Tp=(t,e)=>{if(!ui(t.state,e)||!_L(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:rC(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():iC(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Fz=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},sC=Le.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Tp(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Tp(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&bp(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&bp(t,n,r)&&(e=!0)}),e}}}}),P1=/^(\s*)(\d+)\.\s+(.*)$/,zz=/^\s/;function Vz(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(P1);if(!s)break;const[,l,u,c]=s,d=l.length;let h=c,m=n+1;const g=[i];for(;m<t.length;){const v=t[m];if(v.match(P1))break;if(v.trim()==="")g.push(v),h+=`
`,m+=1;else if(v.match(zz))g.push(v),h+=`
${v.slice(d+2)}`,m+=1;else break}e.push({indent:d,number:parseInt(u,10),content:h.trim(),raw:g.join(`
`)}),r=m,n=m}return[e,r]}function oC(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const l=t[s];if(l.indent===e){const u=l.content.split(`
`),c=((r=u[0])==null?void 0:r.trim())||"",d=[];c&&d.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const h=u.slice(1).join(`
`).trim();if(h){const v=n.blockTokens(h);d.push(...v)}let m=s+1;const g=[];for(;m<t.length&&t[m].indent>e;)g.push(t[m]),m+=1;if(g.length>0){const v=Math.min(...g.map(k=>k.indent)),S=oC(g,v,n);d.push({type:"list",ordered:!0,start:g[0].number,items:S,raw:g.map(k=>k.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:d}),s=m}else s+=1}return i}function jz(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var _z="listItem",O1="textStyle",I1=/^(\d+)\.\s$/,lC=un.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",nt(this.options.HTMLAttributes,n),0]:["ol",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?jz(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,l]=Vz(i);if(s.length===0)return;const u=oC(s,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:u,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_z,this.editor.getAttributes(O1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=no({find:I1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=no({find:I1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(O1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Uz=/^\s*(\[([( |x])?\])\s$/,Hz=un.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",nt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Bm(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),c=document.createElement("div"),d=m=>{var g,v;u.ariaLabel=((v=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:v.call(g,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};d(t),s.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:g}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const S=n();if(typeof S!="number")return!1;const k=v.doc.nodeAt(S);return v.setNodeMarkup(S,void 0,{...k?.attrs,checked:g}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,g)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,g])=>{i.setAttribute(m,g)}),i.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,s.append(u,l),i.append(s,c),Object.entries(e).forEach(([m,g])=>{i.setAttribute(m,g)});let h=new Set(Object.keys(e));return{dom:i,contentDOM:c,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,d(m);const g=r.extensionManager.attributes,v=Pl(m,g),S=new Set(Object.keys(v)),k=this.options.HTMLAttributes;return h.forEach(w=>{S.has(w)||(w in k?i.setAttribute(w,k[w]):i.removeAttribute(w))}),Object.entries(v).forEach(([w,C])=>{C==null?w in k?i.setAttribute(w,k[w]):i.removeAttribute(w):i.setAttribute(w,C)}),h=S,!0}}}},addInputRules(){return[no({find:Uz,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),Wz=un.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",nt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const l=gp(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,c)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:c}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(s)},i=gp(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,l)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Le.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(XA.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(ZA.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(sC.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(lC.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Hz.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(Wz.configure(this.options.taskList)),t}});var Qz=un.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",nt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Gz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Kz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,$z=hi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",nt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[to({find:Gz,type:this.type})]},addPasteRules(){return[es({find:Kz,type:this.type})]}}),qz=un.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),aC=hi.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",nt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Yz=aC;function Jz(t={}){return new qe({view(e){return new Xz(e,t)}})}class Xz{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=l=>{this[i](l)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),l=s.width/i.offsetWidth,u=s.height/i.offsetHeight;if(n){let m=e.nodeBefore,g=e.nodeAfter;if(m||g){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let S=v.getBoundingClientRect(),k=m?S.bottom:S.top;m&&g&&(k=(k+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*u;r={left:S.left,right:S.right,top:k-w,bottom:k+w}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*l;r={left:m.left-g,right:m.left+g,top:m.top,bottom:m.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,h=-pageYOffset;else{let m=c.getBoundingClientRect(),g=m.width/c.offsetWidth,v=m.height/c.offsetHeight;d=m.left-c.scrollLeft*g,h=m.top-c.scrollTop*v}this.element.style.left=(r.left-d)/l+"px",this.element.style.top=(r.top-h)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=sk(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ze extends ve{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ze.valid(r)?new Ze(r):ve.near(r)}content(){return ee.empty}eq(e){return e instanceof Ze&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ze(e.resolve(n.pos))}getBookmark(){return new Km(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Zz(e)||!eV(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ze.valid(e))return e;let i=e.pos,s=null;for(let l=e.depth;;l--){let u=e.node(l);if(n>0?e.indexAfter(l)<u.childCount:e.index(l)>0){s=u.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let c=e.doc.resolve(i);if(Ze.valid(c))return c}for(;;){let l=n>0?s.firstChild:s.lastChild;if(!l){if(s.isAtom&&!s.isText&&!ae.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=l,i+=n;let u=e.doc.resolve(i);if(Ze.valid(u))return u}return null}}}Ze.prototype.visible=!1;Ze.findFrom=Ze.findGapCursorFrom;ve.jsonID("gapcursor",Ze);class Km{constructor(e){this.pos=e}map(e){return new Km(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ze.valid(n)?new Ze(n):ve.near(n)}}function uC(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Zz(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||uC(i.type))return!0;if(i.inlineContent)return!1}}return!0}function eV(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||uC(i.type))return!0;if(i.inlineContent)return!1}}return!0}function tV(){return new qe({props:{decorations:sV,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ze.valid(n)?new Ze(n):null},handleClick:rV,handleKeyDown:nV,handleDOMEvents:{beforeinput:iV}}})}const nV=oA({ArrowLeft:mu("horiz",-1),ArrowRight:mu("horiz",1),ArrowUp:mu("vert",-1),ArrowDown:mu("vert",1)});function mu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let l=r.selection,u=e>0?l.$to:l.$from,c=l.empty;if(l instanceof pe){if(!s.endOfTextblock(n)||u.depth==0)return!1;c=!1,u=r.doc.resolve(e>0?u.after():u.before())}let d=Ze.findGapCursorFrom(u,e,c);return d?(i&&i(r.tr.setSelection(new Ze(d))),!0):!1}}function rV(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ze.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ae.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ze(r))),!0)}function iV(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ze))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=W.empty;for(let l=r.length-1;l>=0;l--)i=W.from(r[l].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new ee(i,0,0));return s.setSelection(pe.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function sV(t){if(!(t.selection instanceof Ze))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ke.create(t.doc,[Wt.widget(t.selection.head,e,{key:"gapcursor"})])}var Ac=200,wt=function(){};wt.prototype.append=function(e){return e.length?(e=wt.from(e),!this.length&&e||e.length<Ac&&this.leafAppend(e)||this.length<Ac&&e.leafPrepend(this)||this.appendInner(e)):this};wt.prototype.prepend=function(e){return e.length?wt.from(e).append(this):this};wt.prototype.appendInner=function(e){return new oV(this,e)};wt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?wt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};wt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};wt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};wt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,l){return i.push(e(s,l))},n,r),i};wt.from=function(e){return e instanceof wt?e:e&&e.length?new cC(e):wt.empty};var cC=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,l,u){for(var c=s;c<l;c++)if(i(this.values[c],u+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,l,u){for(var c=s-1;c>=l;c--)if(i(this.values[c],u+c)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Ac)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Ac)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(wt);wt.empty=new cC([]);var oV=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(s,u),l)===!1||s>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,s)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(s,u)-u,l+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(i,u),s,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(wt);const lV=500;class Bn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let l=e.tr,u,c,d=[],h=[];return this.items.forEach((m,g)=>{if(!m.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(m);return}if(i){h.push(new $n(m.map));let v=m.step.map(i.slice(s)),S;v&&l.maybeStep(v).doc&&(S=l.mapping.maps[l.mapping.maps.length-1],d.push(new $n(S,void 0,void 0,d.length+h.length))),s--,S&&i.appendMap(S,s)}else l.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(s)):m.selection,c=new Bn(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:l,selection:u}}addTransform(e,n,r,i){let s=[],l=this.eventCount,u=this.items,c=!i&&u.length?u.get(u.length-1):null;for(let h=0;h<e.steps.length;h++){let m=e.steps[h].invert(e.docs[h]),g=new $n(e.mapping.maps[h],m,n),v;(v=c&&c.merge(g))&&(g=v,h?s.pop():u=u.slice(0,u.length-1)),s.push(g),n&&(l++,n=void 0),i||(c=g)}let d=l-r.depth;return d>uV&&(u=aV(u,d),l-=d),new Bn(u.append(s),l)}remapping(e,n){let r=new bl;return this.items.forEach((i,s)=>{let l=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new Bn(this.items.append(e.map(n=>new $n(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(g=>{g.selection&&u--},i);let c=n;this.items.forEach(g=>{let v=s.getMirror(--c);if(v==null)return;l=Math.min(l,v);let S=s.maps[v];if(g.step){let k=e.steps[v].invert(e.docs[v]),w=g.selection&&g.selection.map(s.slice(c+1,v));w&&u++,r.push(new $n(S,k,w))}else r.push(new $n(S))},i);let d=[];for(let g=n;g<l;g++)d.push(new $n(s.maps[g]));let h=this.items.slice(0,i).append(d).append(r),m=new Bn(h,u);return m.emptyItemCount()>lV&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&s++;else if(l.step){let c=l.step.map(n.slice(r)),d=c&&c.getMap();if(r--,d&&n.appendMap(d,r),c){let h=l.selection&&l.selection.map(n.slice(r));h&&s++;let m=new $n(d.invert(),c,h),g,v=i.length-1;(g=i.length&&i[v].merge(m))?i[v]=g:i.push(m)}}else l.map&&r--},this.items.length,0),new Bn(wt.from(i.reverse()),s)}}Bn.empty=new Bn(wt.empty,0);function aV(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class $n{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new $n(n.getMap().invert(),n,this.selection)}}}class qr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const uV=20;function cV(t,e,n,r){let i=n.getMeta(qi),s;if(i)return i.historyState;n.getMeta(hV)&&(t=new qr(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(qi))return l.getMeta(qi).redo?new qr(t.done.addTransform(n,void 0,r,bu(e)),t.undone,L1(n.mapping.maps),t.prevTime,t.prevComposition):new qr(t.done,t.undone.addTransform(n,void 0,r,bu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),c=t.prevTime==0||!l&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!fV(n,t.prevRanges)),d=l?Ch(t.prevRanges,n.mapping):L1(n.mapping.maps);return new qr(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,bu(e)),Bn.empty,d,n.time,u??t.prevComposition)}else return(s=n.getMeta("rebased"))?new qr(t.done.rebased(n,s),t.undone.rebased(n,s),Ch(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new qr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Ch(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function fV(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function L1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,l)=>e.push(s,l));return e}function Ch(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function dV(t,e,n){let r=bu(e),i=qi.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let l=s.selection.resolve(s.transform.doc),u=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),c=new qr(n?u:s.remaining,n?s.remaining:u,null,0,-1);return s.transform.setSelection(l).setMeta(qi,{redo:n,historyState:c})}let Eh=!1,B1=null;function bu(t){let e=t.plugins;if(B1!=e){Eh=!1,B1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Eh=!0;break}}return Eh}const qi=new ht("history"),hV=new ht("closeHistory");function pV(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new qe({key:qi,state:{init(){return new qr(Bn.empty,Bn.empty,null,0,-1)},apply(e,n,r){return cV(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?dC:r=="historyRedo"?hC:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function fC(t,e){return(n,r)=>{let i=qi.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=dV(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const dC=fC(!1,!0),hC=fC(!0,!0);Le.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new qe({key:new ht("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const l=s-i,u=0,c=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(u,c);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,c=s-r,d=u-c,h=u;return e.deleteRange(d,h),!(this.storage.characters({node:e.doc})>r)}})]}});var mV=Le.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Jz(this.options)]}});Le.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new qe({key:new ht("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return Ke.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((c,d)=>{if(c.isText)return;if(!(i>=d&&i<=d+c.nodeSize-1))return!1;l+=1});let u=0;return t.descendants((c,d)=>{if(c.isText||!(i>=d&&i<=d+c.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";s.push(Wt.node(d,d+c.nodeSize,{class:this.options.className}))}),Ke.create(t,s)}}})]}});var gV=Le.create({name:"gapCursor",addProseMirrorPlugins(){return[tV()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ie(le(t,"allowGapCursor",n)))!=null?e:null}}});Le.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new qe({key:new ht("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((l,u)=>{const c=r>=u&&r<=u+l.nodeSize,d=!l.isLeaf&&Vc(l);if((c||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const m=Wt.node(u,u+l.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:c}):this.options.placeholder});i.push(m)}return this.options.includeChildren}),Ke.create(t,i)}}})]}});Le.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new qe({key:new ht("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||kA(n.selection)||t.view.dragging?null:Ke.create(n.doc,[Wt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function F1({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var yV=Le.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new ht(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new qe({key:e,appendTransaction:(i,s,l)=>{const{doc:u,tr:c,schema:d}=l,h=e.getState(l),m=u.content.size,g=d.nodes[n];if(h)return c.insert(m,g.create())},state:{init:(i,s)=>{const l=s.tr.doc.lastChild;return!F1({node:l,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const l=i.doc.lastChild;return!F1({node:l,types:r})}}})]}}),vV=Le.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>dC(t,e),redo:()=>({state:t,dispatch:e})=>hC(t,e)}},addProseMirrorPlugins(){return[pV(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),xV=Le.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(GF.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(_F.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(XA.configure(this.options.bulletList)),this.options.code!==!1&&i.push(qF.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(XF.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(ZF.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(mV.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(gV.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(ez.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(tz.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(vV.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(nz.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(lz.configure(this.options.italic)),this.options.listItem!==!1&&i.push(ZA.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(sC.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(JA.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(lC.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Qz.configure(this.options.paragraph)),this.options.strike!==!1&&i.push($z.configure(this.options.strike)),this.options.text!==!1&&i.push(qz.configure(this.options.text)),this.options.underline!==!1&&i.push(aC.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(yV.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),SV=xV,wV=Le.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),kV=wV,AV=20,pC=(t,e=0)=>{const n=[];return!t.children.length||e>AV||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...pC(r,e+1))}),n},CV=t=>{if(!t.children.length)return;const e=pC(t);e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),l=(i=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");n.setAttribute("style",`${l};${s}`)})},mC=hi.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&CV(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",nt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),EV=Le.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const l=s[0].trim().toLowerCase(),u=s.slice(1).join(":").trim();if(l==="background-color")return u.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),gC=Le.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const s=r[i].split(":");if(s.length>=2){const l=s[0].trim().toLowerCase(),u=s.slice(1).join(":").trim();if(l==="color")return u.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),yC=Le.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),bV=Le.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),TV=Le.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Le.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(EV.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(gC.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(yC.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(bV.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(TV.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(mC.configure(this.options.textStyle)),t}});var MV=gC,NV=yC;function Hi({value:t,onChange:e,options:n,style:r,className:i}){const[s,l]=F.useState(!1),u=F.useRef(null);return F.useEffect(()=>{const c=d=>{u.current&&!u.current.contains(d.target)&&l(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),E.jsxs("div",{ref:u,className:`relative flex items-center border border-black/10 bg-white cursor-pointer select-none ${i||""}`,style:{height:"34px",gap:"5px",...r},onMouseDown:c=>c.preventDefault(),onClick:()=>l(!s),children:[E.jsx("span",{className:"font-mono text-xs text-black flex-1 truncate",style:{paddingLeft:"8px"},children:n.find(c=>c.value===t)?.label||t}),E.jsx(lm,{className:"w-3 h-3 text-black flex-shrink-0",style:{marginRight:"8px"}}),s&&E.jsx("div",{className:"absolute left-0 w-full bg-white border border-black/10 max-h-48 overflow-y-auto shadow-sm flex flex-col",style:{top:"100%",marginTop:"4px",zIndex:1e3},children:n.map(c=>E.jsx("div",{className:`px-3 py-2 text-xs text-left font-mono hover:bg-gray-50 transition-colors ${c.value===t?"bg-gray-50":""}`,onMouseDown:d=>d.preventDefault(),onClick:d=>{d.stopPropagation(),e(c.value),l(!1)},style:{paddingLeft:"8px"},children:c.label},c.value))})]})}function RV({animationType:t,onAnimationTypeChange:e,animationSpeed:n,onAnimationSpeedChange:r}){return E.jsxs("div",{className:"responsive-row items-end",style:{gap:"24px"},children:[E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:"Animation Type"}),E.jsx(Hi,{value:t,onChange:i=>e(i),options:[{label:"TYPEWRITER",value:"typewriter"},{label:"FADE IN",value:"fade-in"},{label:"WORD BY WORD",value:"word-by-word"},{label:"CHARACTER",value:"character-by-character"}],style:{width:"150px"}})]}),E.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:"Animation Speed"}),E.jsxs("div",{className:"flex flex-col",children:[E.jsxs("div",{className:"flex justify-between font-mono",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:[E.jsx("span",{children:"Slower"}),E.jsx("span",{children:"Faster"})]}),E.jsx("style",{children:`
                        .no-thumb::-webkit-slider-thumb {
                            -webkit-appearance: none;
                            appearance: none;
                            width: 0;
                            height: 0;
                            background: transparent;
                            border: none;
                        }
                        .no-thumb::-moz-range-thumb {
                            width: 0;
                            height: 0;
                            background: transparent;
                            border: none;
                        }
                        .no-thumb::-ms-thumb {
                            width: 0;
                            height: 0;
                            background: transparent;
                            border: none;
                        }
                    `}),E.jsx("input",{type:"range",min:"1",max:"10",value:n,onChange:i=>r(Number(i.target.value)),className:"no-thumb w-full appearance-none cursor-pointer focus:outline-none",style:{height:"10px",marginTop:"4px",marginBottom:"0",background:`linear-gradient(to right, #6A00FF ${(n-1)/9*100}%, #f3f4f6 ${(n-1)/9*100}%)`}})]})]})]})}function DV({toText:t,onToTextChange:e,toFont:n,onToFontChange:r,toSize:i,onToSizeChange:s,fromText:l,onFromTextChange:u,fromFont:c,onFromFontChange:d,fromSize:h,onFromSizeChange:m}){return E.jsxs("div",{className:"responsive-row",children:[E.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:"To (Recipient)"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx(Hi,{value:n,onChange:g=>r(g),options:[{label:"Sans",value:"font-editor-sans"},{label:"Serif",value:"font-serif"},{label:"Mono",value:"font-mono"}],style:{width:"92px"}}),E.jsx(Hi,{value:i,onChange:g=>s(g),options:[12,14,16,18,20,24].map(g=>({label:g,value:g})),style:{gap:"10px"}})]}),E.jsx("textarea",{value:t,onChange:g=>e(g.target.value),className:`w-full h-20 border border-black/10 p-3 resize-none text-sm focus:outline-none focus:border-black/20 ${n}`,style:{fontSize:`${i}px`},placeholder:""})]}),E.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:"From (Sender)"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx(Hi,{value:c,onChange:g=>d(g),options:[{label:"Sans",value:"font-editor-sans"},{label:"Serif",value:"font-serif"},{label:"Mono",value:"font-mono"}],style:{width:"92px"}}),E.jsx(Hi,{value:h,onChange:g=>m(g),options:[12,14,16,18,20,24].map(g=>({label:g,value:g})),style:{gap:"10px"}})]}),E.jsx("textarea",{value:l,onChange:g=>u(g.target.value),className:`w-full h-20 border border-black/10 p-3 resize-none text-sm focus:outline-none focus:border-black/20 ${c}`,style:{fontSize:`${h}px`},placeholder:""})]})]})}function bh({label:t,value:e,onChange:n}){return E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-mono uppercase",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:t}),E.jsxs("div",{className:"flex",style:{gap:"3px"},children:[E.jsxs("div",{className:"relative border border-black/10",style:{width:"34px",height:"34px",boxSizing:"border-box"},children:[E.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"24px",height:"24px",backgroundColor:e,border:"1px solid rgba(0,0,0,0.1)"}}),E.jsx("input",{type:"color",value:e,onChange:r=>n(r.target.value),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer",padding:0,margin:0}})]}),E.jsx("input",{type:"text",value:e,onChange:r=>n(r.target.value),className:"font-mono text-xs text-black border border-black/10 px-3 focus:outline-none focus:border-black/30",style:{height:"34px",width:"80px",boxSizing:"border-box"}})]})]})}function PV({envelopeColor:t,onEnvelopeColorChange:e,paperColor:n,onPaperColorChange:r,insideColor:i,onInsideColorChange:s}){return E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:"Colors"}),E.jsxs("div",{className:"responsive-row-sm",children:[E.jsx(bh,{label:"Envelope",value:t,onChange:e}),E.jsx(bh,{label:"Paper",value:n,onChange:r}),E.jsx(bh,{label:"Inside",value:i,onChange:s})]})]})}function Yo({label:t,isHidden:e,onToggleHide:n,filename:r,defaultText:i="Default",onFileChange:s}){return E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[n&&E.jsx("button",{type:"button",onClick:n,className:"focus:outline-none flex items-center justify-center p-0",style:{height:"12px",width:"12px"},children:e?E.jsx(HR,{size:12,strokeWidth:1.5,className:"text-gray-400"}):E.jsx(QR,{size:12,strokeWidth:1.5,className:"text-gray-500"})}),E.jsx("span",{className:"font-mono uppercase flex items-center h-[12px] leading-none",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:t})]}),E.jsxs("div",{className:`flex flex-wrap items-center gap-3 transition-opacity duration-200 ${e?"opacity-50 pointer-events-none":""}`,children:[E.jsxs("label",{style:{display:"inline-block",width:"auto"},className:"font-mono text-[10px] px-3 py-1.5 cursor-pointer rounded-none btn-purple transition-all duration-200 whitespace-nowrap",children:["CHOOSE FILE",E.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:s})]}),E.jsx("span",{className:"font-mono text-[10px] text-gray-400 truncate max-w-[80px] sm:max-w-[100px]",children:e?"No file uploaded":r||i})]})]})}function OV({stampFilename:t,hideStamp:e,onHideStampChange:n,onStampUpload:r,logo1Filename:i,hideLogo1:s,onHideLogo1Change:l,onLogo1Upload:u,sealFilename:c,hideSeal:d,onHideSealChange:h,onSealUpload:m,logo2Filename:g,hideLogo2:v,onHideLogo2Change:S,onLogo2Upload:k,letterLogoFilename:w,hideLetterLogo:C,onHideLetterLogoChange:T,onLetterLogoUpload:D,postmarkLocation:P,onPostmarkLocationChange:R}){return E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:"Stickers"}),E.jsx("div",{title:"Toggle checkboxes to show/hide items. Click 'Choose File' to upload your own custom images.",className:"cursor-help flex items-center",children:E.jsx(JR,{size:12,color:"rgba(0,0,0,0.4)"})})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2",style:{gap:"10px"},children:[E.jsx(Yo,{label:"Stamp",isHidden:e,onToggleHide:()=>n?.(!e),filename:t,defaultText:"Stamp...",onFileChange:r}),E.jsx(Yo,{label:"Logo 1",isHidden:s,onToggleHide:()=>l?.(!s),filename:i,onFileChange:u}),E.jsx(Yo,{label:"Wax Seal",isHidden:d,onToggleHide:()=>h?.(!d),filename:c,onFileChange:m}),E.jsx(Yo,{label:"Logo 2",isHidden:v,onToggleHide:()=>S?.(!v),filename:g,onFileChange:k}),E.jsx(Yo,{label:"Letter Logo",isHidden:C,onToggleHide:()=>T?.(!C),filename:w,onFileChange:D}),E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("span",{className:"font-mono uppercase",style:{color:"rgba(0, 0, 0, 0.5)",fontSize:"10px"},children:"Postmark Location"}),E.jsx("div",{className:"flex items-center gap-2",style:{height:"34px"},children:E.jsx("input",{type:"text",value:P,onChange:M=>R(M.target.value),placeholder:"LONDON",className:"w-[105px] border border-black/10 px-3 font-mono text-xs text-black focus:outline-none focus:border-black/20 [&::placeholder]:text-[rgba(0,0,0,0.3)]",style:{"--placeholder-color":"rgba(0, 0, 0, 0.3)",fontSize:"10px",height:"100%",boxSizing:"border-box"}})})]})]})]})}function IV({generatedUrl:t,onSaveAndShare:e,isUploading:n=!1}){const[r,i]=F.useState(""),[s,l]=F.useState(!1),[u,c]=F.useState(!1);zn.useEffect(()=>{i("")},[t]);const d=async()=>{if(!n){if(r){e(r,!0);return}l(!0);try{const m=await fetch(`/api/shorten?url=${encodeURIComponent(t)}`);if(m.ok){const g=await m.json();if(g.shortUrl){i(g.shortUrl),e(g.shortUrl,!1);return}}e()}catch(m){console.error("Shortening error:",m),e()}finally{l(!1)}}},h=r||"";return E.jsxs("div",{className:"flex flex-col gap-2 relative",children:[E.jsx("span",{className:"font-mono uppercase tracking-wider",style:{color:"rgba(0, 0, 0, 0.8)",fontSize:"12px"},children:r?"Share this link:":"Ready to share?"}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs("div",{className:"relative flex-none group",style:{width:"50%"},children:[E.jsx("input",{type:"text",value:h,readOnly:!0,placeholder:"Click Generate ",onClick:()=>{h&&(navigator.clipboard.writeText(h),c(!0),setTimeout(()=>c(!1),2e3))},className:`w-full border px-3 font-mono text-xs focus:outline-none transition-colors ${r?"border-green-500 text-green-700 bg-green-50 cursor-pointer":"border-black/10 text-gray-400 bg-gray-50"}`,style:{height:"34px",boxSizing:"border-box"},title:r?"Click to copy":"Generate link first"}),u&&E.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 bg-white text-black text-xs py-2 px-4 rounded-full pointer-events-none transition-all duration-200 z-[9999] shadow-xl border border-black/5 animate-in fade-in slide-in-from-bottom-4 font-medium",children:"Link copied to clipboard!"})]}),E.jsx("button",{onClick:d,disabled:n||s,className:`font-mono text-[10px] font-medium px-4 py-2 uppercase tracking-wider rounded-none shrink-0 btn-purple transition-all min-w-[80px] flex items-center justify-center gap-2 ${n||s?"opacity-50 cursor-wait":""}`,children:n?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"animate-spin h-3 w-3 border-2 border-white border-t-transparent rounded-full"}),"UPLOADING..."]}):s?E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"animate-spin h-3 w-3 border-2 border-white border-t-transparent rounded-full"}),"SHORTENING..."]}):r?"OPEN LETTER":"SAVE & GENERATE LINK"})]})]})}const LV=Le.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize?t.style.fontSize.replace("px",""):null,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}px`}:{}}}}]}}),Jo={"font-editor-sans":'"Inter", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',"font-serif":'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',"font-mono":'"Geist Mono", monospace'};function BV({letterText:t,onLetterTextChange:e,letterFont:n,onLetterFontChange:r,letterSize:i,onLetterSizeChange:s,textColor:l,onTextColorChange:u,animationType:c,onAnimationTypeChange:d,animationSpeed:h,onAnimationSpeedChange:m,toText:g,onToTextChange:v,toFont:S,onToFontChange:k,toSize:w,onToSizeChange:C,fromText:T,onFromTextChange:D,fromFont:P,onFromFontChange:R,fromSize:M,onFromSizeChange:I,envelopeColor:B,onEnvelopeColorChange:X,paperColor:ue,onPaperColorChange:Ee,insideColor:ke,onInsideColorChange:Ne,postmarkLocation:xe,onPostmarkLocationChange:Ae,stampSrc:De,onStampSrcChange:se,sealSrc:G,onSealSrcChange:q,logo1Src:J,onLogo1SrcChange:L,logo2Src:_,onLogo2SrcChange:me,stampFilename:ge,onStampFilenameChange:Ce,sealFilename:we,onSealFilenameChange:Pe,logo1Filename:be,onLogo1FilenameChange:Be,logo2Filename:kt,onLogo2FilenameChange:wr,hideStamp:rs,onHideStampChange:er,hideSeal:mi,onHideSealChange:gi,hideLogo1:is,onHideLogo1Change:kr,hideLogo2:ss,onHideLogo2Change:Ar,letterLogoSrc:Cr,onLetterLogoSrcChange:Vn,letterLogoFilename:yi,onLetterLogoFilenameChange:ls,hideLetterLogo:as,onHideLetterLogoChange:vi,generatedUrl:us,onCopyUrl:cs,onSaveAndShare:tr}){const jn=async(Te,At,cn,Dt)=>{const at=Te.target.files?.[0];if(at&&(cn&&cn(at.name),Dt&&Dt(!1),At)){lo(pt=>pt+1);try{const pt=await AD(at);At(pt),TD(pt,at.name).then(ut=>{ut?At(ut):console.warn("ImgBB upload failed, keeping local base64")}).finally(()=>{lo(ut=>Math.max(0,ut-1))})}catch(pt){console.error("Failed to process image:",pt),lo(Pt=>Math.max(0,Pt-1));const ut=new FileReader;ut.onload=Pt=>{Pt.target?.result&&At(Pt.target.result)},ut.readAsDataURL(at)}}},[,Y]=F.useState(0),[xi,lo]=F.useState(0),he=BF({extensions:[SV,Yz,kV.configure({types:["heading","paragraph"]}),Pz.configure({openOnClick:!1}),mC,NV,LV,MV],content:t||"<p>Write your letter here...</p>",onUpdate:({editor:Te})=>{const At=Te.getHTML();e(At)},onSelectionUpdate:()=>{Y(Te=>Te+1)},editorProps:{attributes:{class:"prose prose-sm sm:prose-base lg:prose-lg xl:prose-2xl focus:outline-none h-full"}}});return F.useEffect(()=>{if(he&&!he.isDestroyed)try{he.view.dom.style.fontFamily=n==="Mono"?"monospace":n==="Serif"?"serif":"sans-serif",he.view.dom.style.fontSize=`${i}px`,he.view.dom.style.color=l}catch{}},[he,n,i,l]),E.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[E.jsxs(en.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white border border-black/5 flex flex-col",style:{padding:"15px",gap:"20px"},children:[E.jsx("div",{className:"flex items-center gap-1 font-mono uppercase tracking-wider",style:{color:"#000000",fontSize:"16px"},children:E.jsx("span",{children:"Compose Your Letter"})}),E.jsxs("div",{className:"flex flex-col",style:{gap:"5px"},children:[E.jsxs("div",{className:"flex items-center gap-1 w-full",style:{flexWrap:"wrap"},children:[E.jsx("button",{onClick:()=>he?.chain().focus().toggleBold().run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive("bold")?"bg-gray-200":"bg-white"}`,children:E.jsx(zR,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().toggleItalic().run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive("italic")?"bg-gray-200":"bg-white"}`,children:E.jsx(ZR,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().toggleUnderline().run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive("underline")?"bg-gray-200":"bg-white"}`,children:E.jsx(mD,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().setTextAlign("left").run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive({textAlign:"left"})?"bg-gray-200":"bg-white"}`,children:E.jsx(IR,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().setTextAlign("center").run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive({textAlign:"center"})?"bg-gray-200":"bg-white"}`,children:E.jsx(PR,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().setTextAlign("right").run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive({textAlign:"right"})?"bg-gray-200":"bg-white"}`,children:E.jsx(BR,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().toggleBulletList().run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive("bulletList")?"bg-gray-200":"bg-white"}`,children:E.jsx(rD,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().toggleOrderedList().run(),className:`p-2 border border-black/10 hover:bg-gray-50 flex-shrink-0 ${he?.isActive("orderedList")?"bg-gray-200":"bg-white"}`,children:E.jsx(tD,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().liftListItem("listItem").run(),disabled:!he?.can().liftListItem("listItem"),className:`p-2 border border-black/10 flex-shrink-0 ${he?.can().liftListItem("listItem")?"bg-white hover:bg-gray-50":"bg-gray-100 text-gray-300"}`,title:"Outdent",children:E.jsx(KR,{className:"w-4 h-4 text-black"})}),E.jsx("button",{onClick:()=>he?.chain().focus().sinkListItem("listItem").run(),disabled:!he?.can().sinkListItem("listItem"),className:`p-2 border border-black/10 flex-shrink-0 ${he?.can().sinkListItem("listItem")?"bg-white hover:bg-gray-50":"bg-gray-100 text-gray-300"}`,title:"Indent",children:E.jsx(qR,{className:"w-4 h-4 text-black"})}),E.jsx("div",{className:"flex items-center border border-black/10 bg-white flex-shrink-0",children:E.jsxs("div",{className:"relative flex items-center",style:{height:"34px",paddingLeft:"8px",paddingRight:"4px"},children:[E.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:(()=>{try{return he?.getAttributes("textStyle").color||l}catch{return l}})(),border:"1px solid rgba(0,0,0,0.1)"}}),E.jsx(lm,{className:"w-3 h-3 text-black ml-1"}),E.jsx("input",{type:"color",value:(()=>{try{return he?.getAttributes("textStyle").color||l}catch{return l}})(),onChange:Te=>{const At=Te.target.value;he?.chain().focus().setColor(At).run(),Y(cn=>cn+1)},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}})]})}),E.jsx("div",{className:"hidden lg:block lg:flex-1"}),E.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[E.jsx(Hi,{value:(()=>{if(!he)return n;try{const{from:Te,to:At,empty:cn}=he.state.selection;if(cn){const pt=he.getAttributes("textStyle").fontFamily;return pt?Object.keys(Jo).find(ut=>Jo[ut]===pt)||pt:n}const Dt=new Set;return he.state.doc.nodesBetween(Te,At,at=>{if(at.isText){const ut=at.marks.find(bn=>bn.type.name==="textStyle"&&bn.attrs.fontFamily)?.attrs.fontFamily,Pt=ut?Object.keys(Jo).find(bn=>Jo[bn]===ut)||ut:n;Dt.add(Pt)}}),Dt.size>1?"Mixed":Dt.size===1?[...Dt][0]:n}catch{return n}})(),onChange:Te=>{const At=Jo[Te];At&&he?.chain().focus().setFontFamily(At).run()},options:[{label:"Sans",value:"font-editor-sans"},{label:"Serif",value:"font-serif"},{label:"Mono",value:"font-mono"}],style:{width:"100px"}}),E.jsx(Hi,{value:(()=>{if(!he||he.isDestroyed)return i;try{const{from:Te,to:At,empty:cn}=he.state.selection;if(cn){const at=he.getAttributes("textStyle");return at.fontSize?Number(at.fontSize):i}const Dt=new Set;return he.state.doc.nodesBetween(Te,At,at=>{if(at.isText){const pt=at.marks.find(Pt=>Pt.type.name==="textStyle"&&Pt.attrs.fontSize),ut=pt?Number(pt.attrs.fontSize):i;Dt.add(ut)}}),Dt.size>1?"Mixed":Dt.size===1?[...Dt][0]:i}catch{return i}})(),onChange:Te=>{he?.chain().focus().setMark("textStyle",{fontSize:Te}).run()},options:[12,14,16,18,20,24,28,32].map(Te=>({label:Te,value:Te})),style:{width:"60px"}})]})]}),E.jsx("div",{className:`w-full h-32 border border-black/10 p-3 overflow-auto focus-within:border-black/20 ${n}`,style:{fontSize:`${i}px`,color:l},children:E.jsx(NF,{editor:he,className:"h-full"})})]}),E.jsx(RV,{animationType:c,onAnimationTypeChange:d,animationSpeed:h,onAnimationSpeedChange:m})]}),E.jsxs(en.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white border border-black/5 flex flex-col",style:{padding:"15px",gap:"20px"},children:[E.jsx("div",{className:"flex items-center gap-1 font-mono uppercase tracking-wider",style:{color:"#000000",fontSize:"16px"},children:E.jsx("span",{children:"Customize Envelope"})}),E.jsx(DV,{toText:g,onToTextChange:v,toFont:S,onToFontChange:k,toSize:w,onToSizeChange:C,fromText:T,onFromTextChange:D,fromFont:P,onFromFontChange:R,fromSize:M,onFromSizeChange:I}),E.jsx(PV,{envelopeColor:B,onEnvelopeColorChange:X,paperColor:ue,onPaperColorChange:Ee,insideColor:ke,onInsideColorChange:Ne}),E.jsx(OV,{stampFilename:ge,hideStamp:rs,onHideStampChange:er,onStampUpload:Te=>jn(Te,se,Ce,er),logo1Filename:be,hideLogo1:is,onHideLogo1Change:kr,onLogo1Upload:Te=>jn(Te,L,Be,kr),sealFilename:we,hideSeal:mi,onHideSealChange:gi,onSealUpload:Te=>jn(Te,q,Pe,gi),logo2Filename:kt,hideLogo2:ss,onHideLogo2Change:Ar,onLogo2Upload:Te=>jn(Te,me,wr,Ar),letterLogoFilename:yi,hideLetterLogo:as,onHideLetterLogoChange:vi,onLetterLogoUpload:Te=>jn(Te,Vn,ls,vi),postmarkLocation:xe,onPostmarkLocationChange:Ae})]}),E.jsxs(en.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white border border-black/5 flex flex-col",style:{padding:"15px",gap:"20px"},children:[E.jsx("div",{className:"flex items-center gap-1 font-mono uppercase tracking-wider",style:{color:"#000000",fontSize:"16px"},children:E.jsx("span",{children:"Share Your Letter"})}),E.jsx(IV,{generatedUrl:us,onSaveAndShare:tr,isUploading:xi>0}),E.jsxs("p",{className:"font-mono text-[10px] text-gray-400 text-left mt-2 opacity-70",children:["Stamped, sealed and posted with  by ",E.jsx("a",{href:"https://navinthomsy.work/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-gray-600 transition-colors underline decoration-dotted underline-offset-2",children:"Navin Thomsy"})]})]})]})}var Th={exports:{}},z1;function FV(){return z1||(z1=1,(function(t){var e=(function(){var n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",s={};function l(c,d){if(!s[c]){s[c]={};for(var h=0;h<c.length;h++)s[c][c.charAt(h)]=h}return s[c][d]}var u={compressToBase64:function(c){if(c==null)return"";var d=u._compress(c,6,function(h){return r.charAt(h)});switch(d.length%4){default:case 0:return d;case 1:return d+"===";case 2:return d+"==";case 3:return d+"="}},decompressFromBase64:function(c){return c==null?"":c==""?null:u._decompress(c.length,32,function(d){return l(r,c.charAt(d))})},compressToUTF16:function(c){return c==null?"":u._compress(c,15,function(d){return n(d+32)})+" "},decompressFromUTF16:function(c){return c==null?"":c==""?null:u._decompress(c.length,16384,function(d){return c.charCodeAt(d)-32})},compressToUint8Array:function(c){for(var d=u.compress(c),h=new Uint8Array(d.length*2),m=0,g=d.length;m<g;m++){var v=d.charCodeAt(m);h[m*2]=v>>>8,h[m*2+1]=v%256}return h},decompressFromUint8Array:function(c){if(c==null)return u.decompress(c);for(var d=new Array(c.length/2),h=0,m=d.length;h<m;h++)d[h]=c[h*2]*256+c[h*2+1];var g=[];return d.forEach(function(v){g.push(n(v))}),u.decompress(g.join(""))},compressToEncodedURIComponent:function(c){return c==null?"":u._compress(c,6,function(d){return i.charAt(d)})},decompressFromEncodedURIComponent:function(c){return c==null?"":c==""?null:(c=c.replace(/ /g,"+"),u._decompress(c.length,32,function(d){return l(i,c.charAt(d))}))},compress:function(c){return u._compress(c,16,function(d){return n(d)})},_compress:function(c,d,h){if(c==null)return"";var m,g,v={},S={},k="",w="",C="",T=2,D=3,P=2,R=[],M=0,I=0,B;for(B=0;B<c.length;B+=1)if(k=c.charAt(B),Object.prototype.hasOwnProperty.call(v,k)||(v[k]=D++,S[k]=!0),w=C+k,Object.prototype.hasOwnProperty.call(v,w))C=w;else{if(Object.prototype.hasOwnProperty.call(S,C)){if(C.charCodeAt(0)<256){for(m=0;m<P;m++)M=M<<1,I==d-1?(I=0,R.push(h(M)),M=0):I++;for(g=C.charCodeAt(0),m=0;m<8;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1}else{for(g=1,m=0;m<P;m++)M=M<<1|g,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=0;for(g=C.charCodeAt(0),m=0;m<16;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1}T--,T==0&&(T=Math.pow(2,P),P++),delete S[C]}else for(g=v[C],m=0;m<P;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1;T--,T==0&&(T=Math.pow(2,P),P++),v[w]=D++,C=String(k)}if(C!==""){if(Object.prototype.hasOwnProperty.call(S,C)){if(C.charCodeAt(0)<256){for(m=0;m<P;m++)M=M<<1,I==d-1?(I=0,R.push(h(M)),M=0):I++;for(g=C.charCodeAt(0),m=0;m<8;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1}else{for(g=1,m=0;m<P;m++)M=M<<1|g,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=0;for(g=C.charCodeAt(0),m=0;m<16;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1}T--,T==0&&(T=Math.pow(2,P),P++),delete S[C]}else for(g=v[C],m=0;m<P;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1;T--,T==0&&(T=Math.pow(2,P),P++)}for(g=2,m=0;m<P;m++)M=M<<1|g&1,I==d-1?(I=0,R.push(h(M)),M=0):I++,g=g>>1;for(;;)if(M=M<<1,I==d-1){R.push(h(M));break}else I++;return R.join("")},decompress:function(c){return c==null?"":c==""?null:u._decompress(c.length,32768,function(d){return c.charCodeAt(d)})},_decompress:function(c,d,h){var m=[],g=4,v=4,S=3,k="",w=[],C,T,D,P,R,M,I,B={val:h(0),position:d,index:1};for(C=0;C<3;C+=1)m[C]=C;for(D=0,R=Math.pow(2,2),M=1;M!=R;)P=B.val&B.position,B.position>>=1,B.position==0&&(B.position=d,B.val=h(B.index++)),D|=(P>0?1:0)*M,M<<=1;switch(D){case 0:for(D=0,R=Math.pow(2,8),M=1;M!=R;)P=B.val&B.position,B.position>>=1,B.position==0&&(B.position=d,B.val=h(B.index++)),D|=(P>0?1:0)*M,M<<=1;I=n(D);break;case 1:for(D=0,R=Math.pow(2,16),M=1;M!=R;)P=B.val&B.position,B.position>>=1,B.position==0&&(B.position=d,B.val=h(B.index++)),D|=(P>0?1:0)*M,M<<=1;I=n(D);break;case 2:return""}for(m[3]=I,T=I,w.push(I);;){if(B.index>c)return"";for(D=0,R=Math.pow(2,S),M=1;M!=R;)P=B.val&B.position,B.position>>=1,B.position==0&&(B.position=d,B.val=h(B.index++)),D|=(P>0?1:0)*M,M<<=1;switch(I=D){case 0:for(D=0,R=Math.pow(2,8),M=1;M!=R;)P=B.val&B.position,B.position>>=1,B.position==0&&(B.position=d,B.val=h(B.index++)),D|=(P>0?1:0)*M,M<<=1;m[v++]=n(D),I=v-1,g--;break;case 1:for(D=0,R=Math.pow(2,16),M=1;M!=R;)P=B.val&B.position,B.position>>=1,B.position==0&&(B.position=d,B.val=h(B.index++)),D|=(P>0?1:0)*M,M<<=1;m[v++]=n(D),I=v-1,g--;break;case 2:return w.join("")}if(g==0&&(g=Math.pow(2,S),S++),m[I])k=m[I];else if(I===v)k=T+T.charAt(0);else return null;w.push(k),m[v++]=T+k.charAt(0),g--,T=k,g==0&&(g=Math.pow(2,S),S++)}}};return u})();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(Th)),Th.exports}var zV=FV();const vC=Mp(zV);function VV(t){const e=JSON.stringify(t);return"lz_"+vC.compressToEncodedURIComponent(e)}function V1(t){try{if(t.startsWith("lz_")){const n=vC.decompressFromEncodedURIComponent(t.slice(3));return n?JSON.parse(n):null}const e=decodeURIComponent(atob(t));return JSON.parse(e)}catch{return null}}function jV(t){const e=VV(t),n=new URL(window.location.href);return n.search="",n.hash=`letter=${e}`,n.toString()}function j1(){const e=window.location.hash.match(/#letter=(.+)/);if(e)return V1(e[1]);const r=new URLSearchParams(window.location.search).get("letter");return r?V1(r):null}function _1(){return window.location.hash.startsWith("#letter=")?!0:new URLSearchParams(window.location.search).has("letter")}const _V="/assets/Navin%20Logo%20Wax%20Seal-Bnzi9Y-5.png",UV="/assets/Stamp-JR_S32eg.png",HV="/assets/Logo%201-BOQocPks.png",WV="/assets/Logo%202-DxA4Vk5p.png",gu={STAMP:UV,SEAL:_V,LOGO1:HV,LOGO2:WV},yu={STAMP:"Stamp.png",SEAL:"Wax Seal.png",LOGO1:"Logo 1.png",LOGO2:"Logo 2.png"};function QV(){const t=()=>j1(),[e,n]=F.useState(()=>{const Y=t();return Y?Y.text:`Hello World 

Best,
Navin Thomsy`}),[r,i]=F.useState(()=>{const Y=t();return Y?Y.animationType:"fade-in"}),[s,l]=F.useState(()=>t()?.animationSpeed||5),[u,c]=F.useState(()=>t()?.font||"font-editor-sans"),[d,h]=F.useState(()=>t()?.fontSize||12),[m,g]=F.useState("#000000"),[v,S]=F.useState(()=>t()?.toText||"Recipient Name"),[k,w]=F.useState(()=>t()?.fromText||`Navin Thomsy
`),[C,T]=F.useState(()=>t()?.toFont||"font-serif"),[D,P]=F.useState(()=>t()?.toSize||14),[R,M]=F.useState(()=>t()?.fromFont||"font-serif"),[I,B]=F.useState(()=>t()?.fromSize||14),[X,ue]=F.useState(()=>t()?.envelopeColor||"#eceada"),[Ee,ke]=F.useState(()=>t()?.letterColor||"#ffffff"),[Ne,xe]=F.useState(()=>t()?.insideEnvelopeColor||"#966d1d"),[Ae,De]=F.useState(()=>{const Y=t();return Y?Y.stampImage||"":gu.STAMP}),[se,G]=F.useState(()=>{const Y=t();return Y?Y.sealSrc||"":gu.SEAL}),[q,J]=F.useState(()=>{const Y=t();return Y?Y.logo1Src||"":gu.LOGO1}),[L,_]=F.useState(()=>{const Y=t();return Y?Y.logo2Src||"":gu.LOGO2}),[me,ge]=F.useState(()=>{const Y=t();return Y&&Y.postmarkSrc||""}),[Ce,we]=F.useState(()=>t()?.postmarkText??"LONDON"),[Pe,be]=F.useState(()=>t()?.letterLogoSrc||void 0),[Be,kt]=F.useState(yu.STAMP),[wr,rs]=F.useState(yu.SEAL),[er,mi]=F.useState(yu.LOGO1),[gi,is]=F.useState(yu.LOGO2),[kr,ss]=F.useState("Letter Logo.png"),[Ar,Cr]=F.useState(!1),[Vn,yi]=F.useState(!1),[ls,as]=F.useState(!1),[vi,us]=F.useState(!1),[cs,tr]=F.useState(()=>{const Y=t();return Y?Y.hideLetterLogo??!1:!1}),jn=F.useCallback(()=>{const Y=j1();Y&&(n(Y.text),i(Y.animationType),c(Y.font||"font-sans"),h(Y.fontSize||16),Y.toText&&S(Y.toText),Y.fromText&&w(Y.fromText),Y.stampImage&&De(Y.stampImage),Y.logo1Src&&J(Y.logo1Src),Y.logo2Src&&_(Y.logo2Src),Y.toFont&&T(Y.toFont),Y.toSize&&P(Y.toSize),Y.fromFont&&M(Y.fromFont),Y.fromSize&&B(Y.fromSize),Y.letterLogoSrc!==void 0&&be(Y.letterLogoSrc||void 0),Y.hideLetterLogo!==void 0&&tr(Y.hideLetterLogo),Y.sealSrc&&G(Y.sealSrc),Y.postmarkText&&we(Y.postmarkText),Y.postmarkSrc&&ge(Y.postmarkSrc))},[]);return{text:e,animationType:r,animationSpeed:s,letterFont:u,letterSize:d,textColor:m,to:v,from:k,toFont:C,toSize:D,fromFont:R,fromSize:I,envelopeColor:X,letterColor:Ee,insideEnvelopeColor:Ne,stampSrc:Ae,sealSrc:se,logo1Src:q,logo2Src:L,postmarkSrc:me,postmarkText:Ce,letterLogoSrc:Pe,stampFilename:Be,sealFilename:wr,logo1Filename:er,logo2Filename:gi,letterLogoFilename:kr,hideStamp:Ar,hideSeal:Vn,hideLogo1:ls,hideLogo2:vi,hideLetterLogo:cs,setText:n,setAnimationType:i,setAnimationSpeed:l,setLetterFont:c,setLetterSize:h,setTextColor:g,setTo:S,setFrom:w,setToFont:T,setToSize:P,setFromFont:M,setFromSize:B,setEnvelopeColor:ue,setLetterColor:ke,setInsideEnvelopeColor:xe,setStampSrc:De,setSealSrc:G,setLogo1Src:J,setLogo2Src:_,setPostmarkSrc:ge,setPostmarkText:we,setLetterLogoSrc:be,setStampFilename:kt,setSealFilename:rs,setLogo1Filename:mi,setLogo2Filename:is,setLetterLogoFilename:ss,setHideStamp:Cr,setHideSeal:yi,setHideLogo1:as,setHideLogo2:us,setHideLetterLogo:tr,updateFromURL:jn}}const U1=[{word:"kathukal",phonetics:"[ka-thu-kal]"},{word:"",phonetics:"[ka-thu-kal]"},{word:"letters",phonetics:"[let-ers]"}];function GV(){const[t,e]=F.useState(0);F.useEffect(()=>{const r=setInterval(()=>{e(i=>(i+1)%U1.length)},3e3);return()=>clearInterval(r)},[]);const n=U1[t];return E.jsxs("div",{className:"mb-8 max-w-sm mx-auto text-left",children:[E.jsx("div",{className:"h-20",children:E.jsx(YN,{mode:"wait",children:E.jsxs(en.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.3},children:[E.jsx("h1",{className:"text-3xl font-mono font-bold text-gray-900 mb-2 lowercase",children:n.word}),E.jsx("div",{className:"text-sm font-mono text-gray-500 mb-1",children:n.phonetics})]},n.word)})}),E.jsx(en.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"text-sm font-mono text-gray-500 italic mb-6",children:"noun."}),E.jsxs(en.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"pl-4 mb-2",style:{borderLeft:"3px solid #6200ea"},children:[E.jsx("p",{className:"text-sm font-mono text-gray-700 leading-relaxed mb-4",children:"Written messages used to communicate thoughts, information, or emotions, traditionally sent on paper from one person to another."}),E.jsx("div",{className:"text-xs font-mono text-gray-400",children:"see also: letters, notes, correspondence, mail"})]})]})}function KV(){const t=QV(),[e,n]=F.useState(()=>_1()),[r,i]=F.useState(!1),[s,l]=F.useState(0),[u,c]=F.useState(!1),d=F.useRef(null),h=F.useRef(null),[m,g]=F.useState(()=>{try{const P=localStorage.getItem("sent_letters");return P?JSON.parse(P):[]}catch{return[]}});F.useEffect(()=>{const P=R=>{const M=R.target;r&&h.current&&h.current.contains(M)&&d.current&&!d.current.contains(M)&&(i(!1),l(Date.now()))};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[r]),F.useEffect(()=>{const P=()=>{const R=_1();n(R),R&&t.updateFromURL()};return window.addEventListener("hashchange",P),window.addEventListener("popstate",P),()=>{window.removeEventListener("hashchange",P),window.removeEventListener("popstate",P)}},[t.updateFromURL]),F.useEffect(()=>(r&&window.innerWidth<1024?(document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.documentElement.style.overflow=""),()=>{document.body.style.overflow="",document.documentElement.style.overflow=""}),[r]);const v=F.useMemo(()=>({text:t.text,animationType:t.animationType,font:t.letterFont,fontSize:t.letterSize,toText:t.to,fromText:t.from,stampImage:t.hideStamp?void 0:Is(t.stampSrc)?t.stampSrc:void 0,postmarkText:t.postmarkText,postmarkSrc:Is(t.postmarkSrc)?t.postmarkSrc:void 0,logo1Src:t.hideLogo1?void 0:Is(t.logo1Src)?t.logo1Src:void 0,logo2Src:t.hideLogo2?void 0:Is(t.logo2Src)?t.logo2Src:void 0,toFont:t.toFont,toSize:t.toSize,fromFont:t.fromFont,fromSize:t.fromSize,envelopeColor:t.envelopeColor,insideEnvelopeColor:t.insideEnvelopeColor,letterColor:t.letterColor,animationSpeed:t.animationSpeed,sealSrc:t.hideSeal?void 0:Is(t.sealSrc)?t.sealSrc:void 0,letterLogoSrc:t.hideLetterLogo?void 0:Is(t.letterLogoSrc)?t.letterLogoSrc:void 0,hideLetterLogo:t.hideLetterLogo}),[t]),S=F.useMemo(()=>jV(v),[v]),k=F.useMemo(()=>E.jsx(am,{text:t.text,animationType:t.animationType,font:t.letterFont,fontSize:t.letterSize,textColor:t.textColor,delay:1.5,animationSpeed:t.animationSpeed},`${r}-${t.animationType}`),[r,t.text,t.animationType,t.letterFont,t.letterSize,t.animationSpeed,t.textColor]),w=()=>i(!0),C=P=>{const R=m.filter(M=>M.id!==P);localStorage.setItem("sent_letters",JSON.stringify(R))},T=P=>window.open(P,"_blank"),D=(P,R=!0)=>{const M=P||S,B=[{id:Date.now().toString(),recipient:t.to,excerpt:t.text.slice(0,50)+(t.text.length>50?"...":""),createdAt:new Date().toISOString(),url:M},...m];g(B),localStorage.setItem("sent_letters",JSON.stringify(B)),R&&window.open(M,"_blank")};return e?E.jsxs(E.Fragment,{children:[E.jsx(xD,{text:t.text,animationType:t.animationType,font:t.letterFont,fontSize:t.letterSize,toText:t.to,fromText:t.from,stampImage:t.stampSrc,logo1Src:t.logo1Src,logo2Src:t.logo2Src,postmarkSrc:t.postmarkSrc,toFont:t.toFont,toSize:t.toSize,fromFont:t.fromFont,fromSize:t.fromSize,envelopeColor:t.envelopeColor,insideEnvelopeColor:t.insideEnvelopeColor,letterColor:t.letterColor,animationSpeed:t.animationSpeed,sealSrc:t.sealSrc,postmarkText:t.postmarkText,letterLogoSrc:t.letterLogoSrc,hideLetterLogo:t.hideLetterLogo}),E.jsx("a",{href:"https://kathukal.vercel.app/",className:"fixed bottom-4 right-4 text-gray-400 hover:text-gray-600 transition-colors text-xs uppercase tracking-widest bg-white/80 px-3 py-2 rounded-full shadow-sm backdrop-blur-sm",children:"Create Your Own"})]}):E.jsxs("div",{className:"flex lg:h-screen min-h-screen bg-gray-100 lg:overflow-hidden font-sans",children:[E.jsx("div",{className:`${u?"sidebar-container":"w-0"} transition-all duration-300 overflow-hidden relative border-r border-gray-200 bg-white`,children:E.jsx(SD,{letters:m,onDelete:C,onOpen:T,onClose:()=>c(!1)})}),E.jsxs("div",{className:"flex-1 flex flex-col lg:h-full h-auto lg:overflow-hidden relative",children:[!u&&E.jsx("button",{onClick:()=>c(!0),className:"menu-toggle absolute top-4 z-10 p-2 bg-white rounded-lg shadow-md hover:bg-gray-50 text-gray-600",children:E.jsx(lD,{className:"w-5 h-5"})}),E.jsxs("div",{className:"flex-1 lg:overflow-hidden lg:h-full h-auto",children:[E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 lg:h-full h-auto gap-0",children:[E.jsx("div",{className:"lg:h-full lg:overflow-y-auto h-auto p-4 md:p-8 border-r border-gray-200 no-scrollbar",children:E.jsxs("div",{className:"max-w-2xl mx-auto responsive-header-padding pb-20",children:[E.jsx(GV,{}),E.jsx(BV,{letterText:t.text,onLetterTextChange:t.setText,letterFont:t.letterFont,onLetterFontChange:t.setLetterFont,letterSize:t.letterSize,onLetterSizeChange:t.setLetterSize,textColor:t.textColor,onTextColorChange:t.setTextColor,animationType:t.animationType,onAnimationTypeChange:P=>t.setAnimationType(P),animationSpeed:t.animationSpeed,onAnimationSpeedChange:t.setAnimationSpeed,toText:t.to,onToTextChange:t.setTo,toFont:t.toFont,onToFontChange:t.setToFont,toSize:t.toSize,onToSizeChange:t.setToSize,fromText:t.from,onFromTextChange:t.setFrom,fromFont:t.fromFont,onFromFontChange:t.setFromFont,fromSize:t.fromSize,onFromSizeChange:t.setFromSize,envelopeColor:t.envelopeColor,onEnvelopeColorChange:t.setEnvelopeColor,paperColor:t.letterColor,onPaperColorChange:t.setLetterColor,insideColor:t.insideEnvelopeColor,onInsideColorChange:t.setInsideEnvelopeColor,postmarkLocation:t.postmarkText,onPostmarkLocationChange:t.setPostmarkText,stampSrc:t.stampSrc,onStampSrcChange:t.setStampSrc,sealSrc:t.sealSrc,onSealSrcChange:t.setSealSrc,logo1Src:t.logo1Src,onLogo1SrcChange:t.setLogo1Src,logo2Src:t.logo2Src,onLogo2SrcChange:t.setLogo2Src,stampFilename:t.stampFilename,onStampFilenameChange:t.setStampFilename,sealFilename:t.sealFilename,onSealFilenameChange:t.setSealFilename,logo1Filename:t.logo1Filename,onLogo1FilenameChange:t.setLogo1Filename,logo2Filename:t.logo2Filename,onLogo2FilenameChange:t.setLogo2Filename,hideStamp:t.hideStamp,onHideStampChange:t.setHideStamp,hideSeal:t.hideSeal,onHideSealChange:t.setHideSeal,hideLogo1:t.hideLogo1,onHideLogo1Change:t.setHideLogo1,hideLogo2:t.hideLogo2,onHideLogo2Change:t.setHideLogo2,letterLogoSrc:t.letterLogoSrc,onLetterLogoSrcChange:t.setLetterLogoSrc,letterLogoFilename:t.letterLogoFilename,onLetterLogoFilenameChange:t.setLetterLogoFilename,hideLetterLogo:t.hideLetterLogo,onHideLetterLogoChange:t.setHideLetterLogo,generatedUrl:S,onCopyUrl:()=>navigator.clipboard.writeText(S),onSaveAndShare:D})]})}),E.jsx("div",{ref:h,className:"lg:h-full lg:overflow-y-auto min-h-screen lg:min-h-0 p-4 md:p-8 bg-gray-50/50",children:E.jsx("div",{className:"max-w-2xl mx-auto pt-0 lg:pt-12 space-y-4",children:E.jsx("div",{ref:d,className:"relative min-h-[500px] flex items-center justify-center",children:E.jsx(Rw,{onOpen:w,onClose:()=>i(!1),isOpen:r,to:t.to,from:t.from,stampSrc:t.hideStamp?void 0:t.stampSrc,logo1Src:t.hideLogo1?void 0:t.logo1Src,logo2Src:t.hideLogo2?void 0:t.logo2Src,sealSrc:t.hideSeal?void 0:t.sealSrc,postmarkSrc:t.postmarkSrc,postmarkText:t.postmarkText,toFont:t.toFont,toSize:t.toSize,fromFont:t.fromFont,fromSize:t.fromSize,paperColor:t.envelopeColor,insideEnvelopeColor:t.insideEnvelopeColor,letterColor:t.letterColor,letterLogoSrc:t.letterLogoSrc,hideLetterLogo:t.hideLetterLogo,letterFont:t.letterFont,children:k},s)})})})]}),E.jsx("button",{onClick:()=>i(!1),className:"fixed bottom-8 right-8 w-14 h-14 text-white rounded-full shadow-lg hover:shadow-xl active:scale-95 transition-all flex items-center justify-center z-[100]",style:{backgroundColor:"#6200ea"},onMouseEnter:P=>P.currentTarget.style.backgroundColor="#5000ca",onMouseLeave:P=>P.currentTarget.style.backgroundColor="#6200ea",onMouseDown:P=>P.currentTarget.style.backgroundColor="#4000aa",onMouseUp:P=>P.currentTarget.style.backgroundColor="#5000ca",title:"Reset View",children:E.jsx(fD,{className:"w-6 h-6"})})]})]})]})}class $V extends F.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?E.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif",color:"#333"},children:[E.jsx("h2",{style:{color:"#d32f2f"},children:"Something went wrong."}),E.jsx("p",{children:"Please take a screenshot of this error and send it to your developer:"}),E.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"5px",overflow:"auto",fontSize:"12px",border:"1px solid #ccc",marginTop:"10px"},children:[E.jsx("strong",{children:this.state.error?.toString()}),E.jsx("br",{}),E.jsx("br",{}),E.jsx("details",{style:{whiteSpace:"pre-wrap"},children:this.state.errorInfo?.componentStack})]}),E.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"10px 20px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",fontSize:"16px"},children:"Reload Page"})]}):this.props.children}}Sb.createRoot(document.getElementById("root")).render(E.jsx($V,{children:E.jsx(KV,{})}));
